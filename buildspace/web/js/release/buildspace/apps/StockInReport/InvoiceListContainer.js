(function(){define("buildspace/apps/StockInReport/InvoiceListContainer","dojo/_base/declare dojo/_base/lang dojo/request dijit/focus dijit/form/Button dijit/DropDownMenu dijit/form/DropDownButton dijit/MenuItem dijit/layout/BorderContainer buildspace/widget/grid/cells/Formatter buildspace/widget/grid/Filter ./InvoiceDeliveryOrderTab/MasterTabContainer dojo/i18n!../../nls/StockIn".split(" "),function(f,q,r,g,t,u,v,w,l,m,n,p,a){var h;h=f("buildspace.apps.StockInReport.InvoiceListGrid",dojox.grid.EnhancedGrid,
{style:"border-top:none;",rowSelector:"0px",region:"center",workArea:null,project:null,canSort:function(b){return!1},deleteRow:function(b){var d,c,e,k;e=this;d=this.getItem(b);c=buildspace.dialog.indeterminateProgressBar({title:a.deleting+". "+a.pleaseWait+"..."});g.curNode.blur();g.curNode=null;c.show();k={url:"stockIn/deleteInvoice",content:{invoiceId:d.id,_csrf_token:d._csrf_token},handleAs:"json",load:function(a){if(a.success){if(a=dijit.byId("main-invoiceInformation-"+d.id[0]))e.workArea.removeChild(a),
a.destroy();e.refreshGrid();c.hide();e.selection.clear();return window.setTimeout(function(){return e.focus.setFocusIndex(b,0)},10)}},error:function(a){e.selection.clear();return c.hide()}};return new buildspace.dialog.confirm(a.deleteInvoiceDialogBoxTitle,a.deleteInvoiceDialogBoxMsg,80,320,function(){return dojo.xhrPost(k)},function(){return c.hide()})},refreshGrid:function(){this.store.save();this.store.close();return this.setStore(this.store)}});return f("buildspace.apps.StockInReport.InvoiceListContainer",
l,{workArea:null,project:null,store:null,style:"height:100%;width:100%;padding:0;margin:0;",gutters:!1,postCreate:function(){var b,d,c;this.inherited(arguments);c=this;(b=dijit.byId("StockInReportInvoiceListMaintenance-stackContainer"))&&dijit.byId("StockInReportInvoiceListMaintenance-stackContainer").destroyRecursive();b=c.stackContainer=new dijit.layout.StackContainer({style:"width:100%;height:100%;",region:"center",id:"StockInReportInvoiceListMaintenance-stackContainer"});b=new dojo.data.ItemFileWriteStore({url:"stockIn/getStockInInvoiceList/pId/"+
c.project.id,clearOnClose:!0,urlPreventCache:!0});d=this.grid=new h({workArea:c.workArea,structure:c.getGridLayout(),store:b,pId:this.project.id,escapeHTMLInData:!1,onRowDblClick:function(a){var b,d;a=this.getItem(a.rowIndex);if(0>a.id[0])return!1;b="main-invoiceInformation-"+a.id[0];return(d=dijit.byId(b))?c.workArea.selectChild(d):c.workArea.createContentPaneTab(b,a.invoice_no[0],c.createInvoiceAndDeliveryOrderTabContent(a),!0)}});b=new n({region:"top",grid:d,editableGrid:!1,filterFields:[{invoice_no:a.invoiceNo},
{selected_po:a.selected_po},{supplier_name:a.supplier},{created_by:a.created_by}]});this.addChild(b);return this.addChild(new dijit.layout.ContentPane({style:"width:100%",content:d,region:"center"}))},createInvoiceAndDeliveryOrderTabContent:function(a){return new p({id:"stock-in-master-tabcontainer-"+a.id[0],project:this.project,invoice:a})},getGridLayout:function(){var b;b=new m;return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:b.rowCountCellFormatter,noresize:!0,filterable:!1},
{name:a.invoiceNo,field:"invoice_no",styles:"text-align: center; color: red;",width:"140px",noresize:!0},{name:a.selected_po,field:"selected_po",styles:"text-align: center; color: red;",width:"140px",noresize:!0},{name:a.supplier,field:"supplier_name",styles:"text-align: center;",width:"auto",noresize:!0},{name:a.invoiceTotal,field:"invoice_total",styles:"text-align:right;",width:"120px",formatter:b.unEditableCurrencyCellFormatter,noresize:!0},{name:a.created_by,field:"created_by",styles:"text-align:center;",
width:"140px",noresize:!0},{name:a.created_at,field:"invoice_date",styles:"text-align:center;",width:"160px",noresize:!0,filterable:!1}]}})})}).call(this);
