define("buildspace/apps/TenderingReport/WorkArea",["dojo/_base/declare","./ProjectProperties","./ProjectBreakdown","dojo/i18n!buildspace/nls/Tendering"],function(g,h,k,f){return g("buildspace.apps.TenderingReport.WorkArea",dijit.layout.TabContainer,{region:"center",style:"padding:0px;margin:0px;border:0px;width:100%;height:100%;",rootProject:null,explorer:null,postCreate:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});b.show().then(function(){dojo.xhrGet({url:"projectAnalyzer/getAnalysisStatus/pid/"+
a.rootProject.id,content:{pid:a.rootProject.id},handleAs:"json"}).then(function(c){dojo.xhrGet({url:"tendering/mainInfoForm",content:{id:a.rootProject.id},handleAs:"json"}).then(function(d){b.hide();buildspace.currencyAbbreviation=buildspace.billCurrencyAbbreviation=d.currency;d=new h({id:"main-project_properties",title:f.projectProperties,rootProject:a.rootProject,id:"projectProperties-"+a.rootProject.id,explorer:a.explorer,data:d});var e=new k({id:"main-project_breakdown",title:f.projectBreakdown,
rootProject:a.rootProject,explorer:a.explorer,analysisStatus:c});a.addChild(e);a.addChild(d);a.selectChild(e)})})})},createContentPaneTab:function(a,b,c,d,e){c=new dijit.layout.ContentPane({closable:d,id:a,style:"padding:0px;border:0px;margin:0px;overflow:hidden;",title:buildspace.truncateString(b,35),content:c});this.addChild(c);this.selectChild(c);c.pane_info={name:b,type:e,id:a}},removeBillTab:function(){var a=this.getChildren(),b;for(b in a)"object"==typeof a[b].pane_info&&a[b].pane_info.type==
buildspace.apps.TenderingReport.ProjectStructureConstants.TYPE_BILL&&(this.removeChild(a[b]),a[b].destroy())},removeTabByType:function(a){var b=this.getChildren(),c;for(c in b)"object"==typeof b[c].pane_info&&b[c].pane_info.type==a&&(this.removeChild(b[c]),b[c].destroy())},makeTab:function(a,b,c){var d,e;switch(parseInt(a.type)){case buildspace.apps.TenderingReport.ProjectStructureConstants.TYPE_BILL:d=buildspace.apps.TenderingReport.getBillTypeText(a.bill_type);b=new buildspace.apps.TenderingReport.BillManager(b);
e=a.id+"-form_"+a.type;d=buildspace.truncateString(a.title,35)+" :: "+d;break;case 9999999:b=new buildspace.apps.TenderingReport.SubPackages(b);e=a.id+"-form_"+a.type;d=f.subPackages;break;default:b=null,e=a.id+"-form_"+a.type,d=buildspace.truncateString(a.title,35)}this.createContentPaneTab(e,d,b,c,a.type)}})});
