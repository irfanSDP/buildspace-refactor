define("buildspace/apps/TenderingReport/BillManager/BillPropertiesForm","dojo/_base/declare dojo/html dojo/dom dojo/dom-construct dojo/keys dojo/dom-style dojo/dom-attr dojo/dom-geometry dijit/form/Form dijit/form/RadioButton dijit/form/Select dijit/form/ValidationTextBox dijit/form/NumberTextBox dijit/form/CurrencyTextBox dojo/number dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/billPropertiesForm.html dojo/text!./templates/columnSettingsForm.html dojo/text!./templates/markupSettingsForm.html dojo/i18n!buildspace/nls/Tendering ./buildUpFloorAreaDialog".split(" "),
function(g,e,B,t,C,d,D,u,k,E,F,G,H,I,h,m,J,n,p,v,w,x,b,y,K){var z=g("buildspace.apps.TenderingReport.BillManager.MarkupSettingsForm",[m,n,p],{billId:-1,templateString:x,baseClass:"buildspace-form",nls:b,billElementObj:null,markupSettings:null,_csrf_token:0,region:"center",style:"padding:5px;overflow:auto;border:0px;height:146px;",constructor:function(){this.ROUNDING_TYPE_DISABLED=buildspace.constants.ROUNDING_TYPE_DISABLED;this.ROUNDING_TYPE_UPWARD=buildspace.constants.ROUNDING_TYPE_UPWARD;this.ROUNDING_TYPE_DOWNWARD=
buildspace.constants.ROUNDING_TYPE_DOWNWARD;this.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER=buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER;this.ROUNDING_TYPE_NEAREST_TENTH=buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH;this.ROUNDING_TYPE_DISABLED_TEXT=buildspace.constants.ROUNDING_TYPE_DISABLED_TEXT;this.ROUNDING_TYPE_UPWARD_TEXT=buildspace.constants.ROUNDING_TYPE_UPWARD_TEXT;this.ROUNDING_TYPE_DOWNWARD_TEXT=buildspace.constants.ROUNDING_TYPE_DOWNWARD_TEXT;this.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER_TEXT=
buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER_TEXT;this.ROUNDING_TYPE_NEAREST_TENTH_TEXT=buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH_TEXT;this.currencyAbbreviation=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:buildspace.currencyAbbreviation;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.setValues()},setValues:function(){this.elementMarkupEnabledNode.set("checked",this.markupSettings.element_markup_enabled);e.set(this.elementMarkupEnabledViewDivNode,
this.markupSettings.element_markup_enabled?b.yesCapital:b.noCapital);this.itemMarkupEnabledNode.set("checked",this.markupSettings.item_markup_enabled);e.set(this.itemMarkupEnabledViewDivNode,this.markupSettings.item_markup_enabled?b.yesCapital:b.noCapital);this.roundingTypeNode.set("value",this.markupSettings.rounding_type);var a=this.getRoundingTypeText();e.set(this.roundingTypeViewDivNode,a)},getRoundingTypeText:function(){switch(this.markupSettings.rounding_type.toString()){case buildspace.constants.ROUNDING_TYPE_DISABLED:return buildspace.constants.ROUNDING_TYPE_DISABLED_TEXT;
case buildspace.constants.ROUNDING_TYPE_UPWARD:return buildspace.constants.ROUNDING_TYPE_UPWARD_TEXT;case buildspace.constants.ROUNDING_TYPE_DOWNWARD:return buildspace.constants.ROUNDING_TYPE_DOWNWARD_TEXT;case buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER:return buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER_TEXT;case buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH:return buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH_TEXT;default:return null}}}),r=g("buildspace.apps.TenderingReport.BillManager.ColumnSettingsForm",
[m,n,p],{count:0,billId:-1,columnSettingName:"",columnSettingQuantity:"",columnSettingRemeasurementQuantityEnabled:!1,columnSettingUseOriginalQuantity:!0,columnSettingTotalFloorAreaM2:0,columnSettingTotalFloorAreaFT2:0,columnSettingShowEstimatedTotalCost:!1,columnSettingFloorAreaHasBuildUp:!1,columnSettingFloorAreaUseMetric:!1,columnSettingFloorAreaDisplayMetric:!1,editMode:!1,columnId:-1,quantity:1,locked:!1,templateString:w,billElementObj:null,_csrf_token:0,postCreate:function(){this.inherited(arguments);
this.toggleEditableInputElements(this.editMode);this.setValues()},setValues:function(){this.nameNode.set("value",this.columnSettingName);this.quantityNode.set("value",this.columnSettingQuantity);this.totalFloorAreaM2Node.set("value",this.columnSettingTotalFloorAreaM2);this.totalFloorAreaFT2Node.set("value",this.columnSettingTotalFloorAreaFT2);this.remeasurementQuantityEnabledNode.set("checked",this.columnSettingRemeasurementQuantityEnabled);this.showEstimatedTotalCostNode.set("checked",this.columnSettingShowEstimatedTotalCost);
var a=this.columnSettingShowEstimatedTotalCost?b.yesCapital:b.noCapital;e.set(this.nameViewDivNode,this.columnSettingName);e.set(this.showEstimatedTotalCostViewDivNode,a);e.set(this.quantityViewDivNode,""+this.columnSettingQuantity+"");this.columnSettingFloorAreaUseMetric?(e.set(this.totalFloorAreaM2ViewDivNode,this.createBuildUpFloorAreaLinks("M2")),e.set(this.totalFloorAreaFT2ViewDivNode,""+this.columnSettingTotalFloorAreaFT2+"")):(e.set(this.totalFloorAreaM2ViewDivNode,""+this.columnSettingTotalFloorAreaM2+
""),e.set(this.totalFloorAreaFT2ViewDivNode,this.createBuildUpFloorAreaLinks("FT2")));this.columnSettingUseOriginalQuantity?(this.originalQtyNode.set("checked",!0),this.locked&&this.remeasurementQtyNode.set("disabled",!0)):(this.remeasurementQtyNode.set("checked",!0),this.locked&&this.originalQtyNode.set("disabled",!0));this.columnSettingFloorAreaDisplayMetric?this.floorAreaDisplayMetricNode.set("checked",!0):this.floorAreaDisplayImperialNode.set("checked",!0);this.toggleCheckUseMetric();this.locked&&
this.lockColumnSetting()},lockColumnSetting:function(){},toggleCheckUseMetric:function(){this.columnSettingFloorAreaUseMetric?this.floorAreaUseMetricNode.set("checked",!0):this.floorAreaUseImperialNode.set("checked",!0)},createBuildUpFloorAreaLinks:function(a){var c=this,d=null,d="M2"==a?c.columnSettingTotalFloorAreaM2:c.columnSettingTotalFloorAreaFT2;return t.create("a",{onclick:function(){y({billColumnSettingId:c.columnId,billId:c.billId,columnSettingForm:c,unit:a}).show()},"class":"buildUpLink",
href:"#",title:"Open Build Up Floor Area",innerHTML:d})},toggleDeleteButton:function(){dojo.query("#columnSettingTbody-"+this.billId+" > tr")},toggleEditableInputElements:function(a){var c=this,l=function(a){a?(d.set(c.remeasurementQuantityEnabledViewDivNode,"display","none"),d.set(c.showEstimatedTotalCostViewDivNode,"display","none"),d.set(c.remeasurementQuantityEnabledInputDivNode,"display",""),d.set(c.showEstimatedTotalCostInputDivNode,"display",""),this.locked&&(d.set(c.nameViewDivNode,"display",
"none"),d.set(c.quantityViewDivNode,"display","none"),d.set(c.nameInputDivNode,"display",""),d.set(c.quantityInputDivNode,"display",""))):(d.set(c.nameInputDivNode,"display","none"),d.set(c.quantityInputDivNode,"display","none"),d.set(c.remeasurementQuantityEnabledInputDivNode,"display","none"),d.set(c.showEstimatedTotalCostInputDivNode,"display","none"),d.set(c.nameViewDivNode,"display",""),d.set(c.quantityViewDivNode,"display",""),d.set(c.showEstimatedTotalCostViewDivNode,"display",""));c.toggleFloorAreaInputDiv(a)};
a?(l(!0),this.toggleFloorAreaDisplayMetric(!0),this.columnSettingRemeasurementQuantityEnabled?this.toggleUseOriginalQuantity(!0):this.toggleUseOriginalQuantity(!1)):(l(!1),e.set(this.remeasurementQuantityEnabledViewDivNode,this.columnSettingRemeasurementQuantityEnabled?b.yesCapital:b.noCapital),this.toggleUseOriginalQuantity(!1),this.toggleFloorAreaDisplayMetric(!1))},toggleUseOriginalQuantity:function(a){var c=this,b=function(a){a?(d.set(c.originalQtyViewDivNode,"display","none"),d.set(c.remeasurementQtyViewDivNode,
"display","none"),d.set(c.originalQtyInputDivNode,"display",""),d.set(c.remeasurementQtyInputDivNode,"display","")):(d.set(c.originalQtyInputDivNode,"display","none"),d.set(c.remeasurementQtyInputDivNode,"display","none"),d.set(c.originalQtyViewDivNode,"display","block"),d.set(c.remeasurementQtyViewDivNode,"display","block"))};a?b(!0):(b(!1),b=a=null,this.columnSettingRemeasurementQuantityEnabled&&(a=this.columnSettingUseOriginalQuantity?"icon-16-container icon-16-checkmark2":"icon-16-container icon-16-cross",
b=this.columnSettingUseOriginalQuantity?"icon-16-container icon-16-cross":"icon-16-container icon-16-checkmark2"),e.set(this.originalQtyViewDivNode,'<span class="dijitReset dijitInline dijitIcon '+a+'"></span>'),e.set(this.remeasurementQtyViewDivNode,'<span class="dijitReset dijitInline dijitIcon '+b+'"></span>'))},toggleFloorAreaInputDiv:function(a){a?this.columnSettingFloorAreaUseMetric?(d.set(this.totalFloorAreaM2ViewDivNode,"display","none"),d.set(this.totalFloorAreaM2InputDivNode,"display",""),
d.set(this.totalFloorAreaFT2ViewDivNode,"display",""),d.set(this.totalFloorAreaFT2InputDivNode,"display","none"),this.totalFloorAreaFT2Node.set("value",this.columnSettingTotalFloorAreaFT2),e.set(this["error-total_floor_area_ft2"],"")):(d.set(this.totalFloorAreaFT2ViewDivNode,"display","none"),d.set(this.totalFloorAreaFT2InputDivNode,"display",""),d.set(this.totalFloorAreaM2ViewDivNode,"display",""),d.set(this.totalFloorAreaM2InputDivNode,"display","none"),this.totalFloorAreaM2Node.set("value",this.columnSettingTotalFloorAreaM2),
e.set(this["error-total_floor_area_m2"],"")):(d.set(this.totalFloorAreaM2InputDivNode,"display","none"),d.set(this.totalFloorAreaM2ViewDivNode,"display",""),d.set(this.totalFloorAreaFT2InputDivNode,"display","none"),d.set(this.totalFloorAreaFT2ViewDivNode,"display",""))},toggleFloorAreaDisplayMetric:function(a){var c=this,b=function(a){a?(d.set(c.floorAreaDisplayMetricViewDivNode,"display","none"),d.set(c.floorAreaDisplayImperialViewDivNode,"display","none"),d.set(c.floorAreaDisplayMetricInputDivNode,
"display",""),d.set(c.floorAreaDisplayImperialInputDivNode,"display","")):(d.set(c.floorAreaDisplayMetricInputDivNode,"display","none"),d.set(c.floorAreaDisplayImperialInputDivNode,"display","none"),d.set(c.floorAreaDisplayMetricViewDivNode,"display",""),d.set(c.floorAreaDisplayImperialViewDivNode,"display",""))};a?b(!0):(b(!1),a=this.columnSettingFloorAreaDisplayMetric?"icon-16-container icon-16-cross":"icon-16-container icon-16-checkmark2",e.set(this.floorAreaDisplayMetricViewDivNode,'<span class="dijitReset dijitInline dijitIcon '+
(this.columnSettingFloorAreaDisplayMetric?"icon-16-container icon-16-checkmark2":"icon-16-container icon-16-cross")+'"></span>'),e.set(this.floorAreaDisplayImperialViewDivNode,'<span class="dijitReset dijitInline dijitIcon '+a+'"></span>'))},doEnableRemeasurementQuantity:function(){var a=this;this.remeasurementQuantityEnabledNode.get("checked")?a.toggleUseOriginalQuantity(!0):this.columnSettingRemeasurementQuantityEnabled?buildspace.dialog.confirm(b.confirmation,"<div>"+b.detachAllQty2BuildUpAndLink+
"</div>",60,280,function(){a.columnSettingRemeasurementQuantityEnabled=!1;a.toggleUseOriginalQuantity(!1)},function(){a.remeasurementQuantityEnabledNode.set("checked",!0);a.toggleUseOriginalQuantity(!0)}):a.toggleUseOriginalQuantity(!1)},checkManualFloorArea:function(){var a=h.format(this.totalFloorAreaM2Node.get("value"),{places:2}),c=h.format(this.totalFloorAreaFT2Node.get("value"),{places:2});if(0<this.columnId&&this.columnSettingFloorAreaHasBuildUp&&(a!=this.columnSettingTotalFloorAreaM2||c!=
this.columnSettingTotalFloorAreaFT2))return!0},doSave:function(){var a=this,c=buildspace.dialog.indeterminateProgressBar({title:b.savingData+"..."}),d=this.billElementObj;c.show();var A=this.originalQtyNode.get("checked")?!0:!1,g=this.floorAreaDisplayMetricNode.get("checked")?!0:!1,q=this.floorAreaUseMetricNode.get("checked")?!0:!1;xhrArgs={url:"billManager/billColumnSettingUpdate",content:{id:this.columnId,"bill_column_setting[project_structure_id]":this.billId,"bill_column_setting[name]":this.nameNode.get("value"),
"bill_column_setting[quantity]":this.quantityNode.get("value"),"bill_column_setting[total_floor_area_m2]":this.totalFloorAreaM2Node.get("value"),"bill_column_setting[total_floor_area_ft2]":this.totalFloorAreaFT2Node.get("value"),"bill_column_setting[floor_area_display_metric]":g,"bill_column_setting[floor_area_use_metric]":q,"bill_column_setting[floor_area_has_build_up]":this.columnSettingFloorAreaHasBuildUp,"bill_column_setting[remeasurement_quantity_enabled]":this.remeasurementQuantityEnabledNode.get("checked"),
"bill_column_setting[show_estimated_total_cost]":this.showEstimatedTotalCostNode.get("checked"),"bill_column_setting[use_original_quantity]":A,"bill_column_setting[_csrf_token]":this._csrf_token},handleAs:"json",load:function(b){e.set(a["error-name"],"");e.set(a["error-quantity"],"");e.set(a["error-total_floor_area_m2"],"");e.set(a["error-total_floor_area_ft2"],"");if(1==b.success)a.editMode=!1,a.columnId=b.item.id,a.columnSettingName=b.item.name,a.columnSettingQuantity=b.item.quantity,a.columnSettingRemeasurementQuantityEnabled=
b.item.remeasurement_quantity_enabled,a.columnSettingUseOriginalQuantity=b.item.use_original_quantity,a.columnSettingTotalFloorAreaFT2=h.format(b.item.total_floor_area_ft2,{places:2}),a.columnSettingTotalFloorAreaM2=h.format(b.item.total_floor_area_m2,{places:2}),a.columnSettingFloorAreaHasBuildUp=b.item.floor_area_has_build_up,a.columnSettingFloorAreaUseMetric=b.item.floor_area_use_metric,a.columnSettingFloorAreaDisplayMetric=b.item.floor_area_display_metric,a.columnSettingShowEstimatedTotalCost=
b.item.show_estimated_total_cost,a.setValues(),a.toggleEditableInputElements(!1),d.reconstructBillContainer();else{b=b.errors;for(var l in b)a["error-"+l]&&e.set(a["error-"+l],b[l])}c.hide()},error:function(a){c.hide()}};dojo.xhrPost(xhrArgs)},refreshColumn:function(){var a=this,c=buildspace.dialog.indeterminateProgressBar({title:b.savingData+"..."}),d=this.billElementObj;c.show();dojo.xhrPost({url:"billManager/getBillColumnSetting",content:{id:this.columnId},handleAs:"json",load:function(b){a.editMode=
!1;a.columnId=b.item.id;a.columnSettingName=b.item.name;a.columnSettingQuantity=b.item.quantity;a.columnSettingRemeasurementQuantityEnabled=b.item.remeasurement_quantity_enabled;a.columnSettingUseOriginalQuantity=b.item.use_original_quantity;a.columnSettingTotalFloorAreaFT2=h.format(b.item.total_floor_area_ft2,{places:2});a.columnSettingTotalFloorAreaM2=h.format(b.item.total_floor_area_m2,{places:2});a.columnSettingFloorAreaHasBuildUp=b.item.floor_area_has_build_up;a.columnSettingFloorAreaUseMetric=
b.item.floor_area_use_metric;a.columnSettingFloorAreaDisplayMetric=b.item.floor_area_display_metric;a.columnSettingShowEstimatedTotalCost=b.item.show_estimated_total_cost;a.setValues();a.toggleEditableInputElements(!1);d.reconstructBillContainer();c.hide()},error:function(a){c.hide()}})},doChangeFloorAreaUseMetric:function(a){if(a&&this.floorAreaUseMetricNode.get("checked")!=this.columnSettingFloorAreaUseMetric){var c=this;a=function(){c.toggleCheckUseMetric()};var d=function(){c.columnSettingFloorAreaUseMetric=
c.floorAreaUseMetricNode.get("checked")?!0:!1},e=function(){c.columnSettingFloorAreaHasBuildUp=!1;d();this.editMode?c.toggleFloorAreaInputDiv(!0):c.doSave()};c.columnSettingFloorAreaHasBuildUp?buildspace.dialog.confirm(b.confirmation,"<div>"+b.detachAllBuildUpAndLink+"</div>",60,280,e,a):this.editMode?(d(),c.toggleFloorAreaInputDiv(!0)):c.doSave()}},onDelete:function(){}});k=g("buildspace.apps.TenderingReport.BillManager.BillPropertiesMainInfoForm",[k,m,n,p,dojox.form.manager._Mixin,dojox.form.manager._NodeMixin,
dojox.form.manager._ValueMixin,dojox.form.manager._DisplayMixin],{templateString:v,baseClass:"buildspace-form",region:"top",billId:-1,explorer:null,formData:null,buildUpRateRoundingType:null,buildUpQuantityRoundingType:null,unitTypeText:null,description:null,nls:b,style:"padding:5px;overflow:auto;border:0px;height:140px;",constructor:function(){var a=this.BillTypeConstantArray=[];this.ROUNDING_TYPE_DISABLED=buildspace.constants.ROUNDING_TYPE_DISABLED;this.ROUNDING_TYPE_UPWARD=buildspace.constants.ROUNDING_TYPE_UPWARD;
this.ROUNDING_TYPE_DOWNWARD=buildspace.constants.ROUNDING_TYPE_DOWNWARD;this.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER=buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER;this.ROUNDING_TYPE_NEAREST_TENTH=buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH;this.ROUNDING_TYPE_DISABLED_TEXT=buildspace.constants.ROUNDING_TYPE_DISABLED_TEXT;this.ROUNDING_TYPE_UPWARD_TEXT=buildspace.constants.ROUNDING_TYPE_UPWARD_TEXT;this.ROUNDING_TYPE_DOWNWARD_TEXT=buildspace.constants.ROUNDING_TYPE_DOWNWARD_TEXT;this.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER_TEXT=
buildspace.constants.ROUNDING_TYPE_NEAREST_WHOLE_NUMBER_TEXT;this.ROUNDING_TYPE_NEAREST_TENTH_TEXT=buildspace.constants.ROUNDING_TYPE_NEAREST_TENTH_TEXT;a[buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_STANDARD]=buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_STANDARD_TEXT;a[buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PRELIMINARY]=buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PRELIMINARY_TEXT;a[buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PROVISIONAL]=
buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PROVISIONAL_TEXT;a[buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PROVISIONAL]=buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PROVISIONAL_TEXT;a[buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PRIMECOST]=buildspace.apps.TenderingReport.ProjectStructureConstants.BILL_TYPE_PRIMECOST_TEXT;this.currencyAbbreviation=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:
buildspace.currencyAbbreviation;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);e.set(this.unitTypeTextNode,this.unitTypeText);e.set(this.billTypeTextNode,this.BillTypeConstantArray[this.formData.billType])},disableForm:function(){this.buildUpQuantityRoundingTypeNode.set("disabled",!0);this.titleNode.set("disabled",!0);this.descriptionNode.set("disabled",!0)},startup:function(){this.inherited(arguments);this.setFormValues(this.formData);this.explorer.rootProject.status_id!=
buildspace.constants.STATUS_PRETENDER&&this.disableForm()}});return g("buildspace.apps.TenderingReport.BillManager.BillPropertiesForm",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;margin:0px;border:0px;height:100%;overflow:auto;",gutters:!1,region:"center",billId:-1,explorer:null,billElementObj:null,nls:b,totalColumnSettings:0,locked:!1,columnSettings_csrf_token:null,postCreate:function(){this.inherited(arguments);var a=this,c=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+
"..."});c.show();dojo.xhrGet({url:"billManager/billPropertiesForm",handleAs:"json",content:{id:this.billId},load:function(b){a.markupSettings_csrf_token=b.markup_settings_csrf_token;a.columnSettings_csrf_token=b.column_settings_csrf_token;a.renderBillPropertiesInfoForm(b.bill_setting);a.renderMarkupSettings(b.markup_settings);a.renderBillColumnSettings(b.column_settings);a.resize();a.toggleDeleteButtonAfterStartup();c.hide()},error:function(a){c.hide()}})},renderBillPropertiesInfoForm:function(a){a=
this.mainForm=new k({billId:this.billId,explorer:this.explorer,unitTypeText:a.unit_type_text,billElementObj:this.billElementObj,formData:a});this.addChild(a)},renderMarkupSettings:function(a){a=new z({billId:this.billId,billElementObj:this.billElementObj,markupSettings:a,_csrf_token:this.markupSettings_csrf_token});this.addChild(a)},renderBillColumnSettings:function(a){var c=this,d=this.billId,e=this.billElementObj,k=this.columnSettings_csrf_token;g("ColumnSettingTableWidget",[m,n,p],{style:"padding:5px;overflow:auto;border:0px;overflow:auto;",
region:"bottom",locked:c.locked,baseClass:"buildspace-form",totalColumnSettings:0,columnSettings:a,templateString:"<div><fieldset><legend>"+b.columnSettings+'</legend><div data-dojo-type="dijit/form/Button" id="addColumnButton-'+d+'" data-dojo-attach-event="onClick:addColumn" data-dojo-attach-point="addColumnButton" data-dojo-props="iconClass:\'icon-16-container icon-16-add\'">'+b.addType+'</div><div style="height:2px;">&nbsp;</div><table class="buildspace-table"><thead><tr class="gridHeader"><th class="gridCell" style="text-align:center;" rowspan="2">No.</th><th class="gridCell" rowspan="2">'+
b.name+'</th><th class="gridCell" style="text-align: center;" rowspan="2">'+b.totalUnit+'</th><th class="gridCell" style="text-align: center;" rowspan="2">'+b.enable+" "+b.qty+' (2)</th><th class="gridCell" style="text-align: center;" rowspan="2">'+b.use+" "+b.qty+'</th><th class="gridCell" style="text-align: center;" rowspan="2">'+b.use+" "+b.qty+' (2)</th><th class="gridCell" style="text-align: center;" colspan="7">'+b.gross+" "+b.floorArea+'</th></tr><tr class="gridHeaderBottom"><th style="text-align:center;" colspan="2">'+
b.metreSquare+'</th><th style="text-align:center;" colspan="2">'+b.squareFeet+'</th><th style="text-align:center;">'+b.show+" "+b.metreSquare+'</th><th style="text-align:center;">'+b.show+" "+b.squareFeet+'</th><th style="text-align:center;">'+b.show+" "+b.estimation+'</th></tr></thead><tbody id="columnSettingTbody-'+d+'" data-dojo-attach-point="columnSettingsTBody"></tbody></table></fieldset></div>',postCreate:function(){this.inherited(arguments);var a=this,b=0;dojo.forEach(this.columnSettings,function(f,
g){a.updateTotalColumnSettings(!0);b=a.totalColumnSettings;var q=new r({count:b,locked:c.locked,columnSettingName:f.name,columnSettingQuantity:f.quantity,columnSettingRemeasurementQuantityEnabled:f.remeasurement_quantity_enabled,columnSettingUseOriginalQuantity:f.use_original_quantity,columnSettingTotalFloorAreaM2:h.format(f.total_floor_area_m2,{places:2}),columnSettingTotalFloorAreaFT2:h.format(f.total_floor_area_ft2,{places:2}),columnSettingFloorAreaHasBuildUp:f.floor_area_has_build_up,columnSettingFloorAreaUseMetric:f.floor_area_use_metric,
columnSettingFloorAreaDisplayMetric:f.floor_area_display_metric,columnSettingShowEstimatedTotalCost:f.show_estimated_total_cost,columnId:f.id,billId:d,billElementObj:e,_csrf_token:k,onDelete:function(){a.updateTotalColumnSettings(!1);a.addColumnButton.set("disabled",!1);c.resize()}});q.placeAt(a.columnSettingsTBody);dojo.parser.parse(q.domNode)},a)},updateTotalColumnSettings:function(a){this.totalColumnSettings=a?this.totalColumnSettings+1:this.totalColumnSettings-1;5<=this.totalColumnSettings||this.locked?
this.addColumnButton.set("disabled",!0):this.addColumnButton.set("disabled",!1)},addColumn:function(){this.updateTotalColumnSettings(!0);var a=new r({count:this.totalColumnSettings,billId:d,billElementObj:e,_csrf_token:k,count:this.totalColumnSettings,editMode:!0,onDelete:dojo.hitch(this,"updateTotalColumnSettings",!1)});a.placeAt(this.columnSettingsTBody);dojo.parser.parse(a.domNode);a.toggleDeleteButton();c.resize()}});this.columnSettingsTable=new ColumnSettingTableWidget;this.addChild(this.columnSettingsTable)},
resize:function(){var a=u.getContentBox(this.domNode).h-265;this.columnSettingsTable&&d.set(this.columnSettingsTable.domNode,"height",a+"px");this.inherited(arguments)},toggleDeleteButtonAfterStartup:function(){dojo.query("#columnSettingTbody-"+this.billId+" > tr")}})});
