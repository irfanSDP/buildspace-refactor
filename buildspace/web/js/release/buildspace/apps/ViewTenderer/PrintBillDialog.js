define("buildspace/apps/ViewTenderer/PrintBillDialog","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dojox/form/manager/_Mixin dojox/form/manager/_NodeMixin dojox/form/manager/_ValueMixin dojox/form/manager/_DisplayMixin dijit/form/Form dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dijit/Menu dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem dijit/PopupMenuItem dojo/i18n!buildspace/nls/PrintBillDialog".split(" "),
function(f,I,J,K,L,M,l,m,q,r,t,u,v,w,N,x,y,O,z,A,B,C,D,e){var E=f("buildspace.apps.ViewTenderer.PrintBillGrid",dojox.grid.EnhancedGrid,{projectId:0,region:"center",contractor:null,style:"border-top:none;",_csrf_token:null,printRationalizedRate:null,currentModuleName:null,canSort:function(a){return!1},postCreate:function(){var a=this,b=this.contractor;this.inherited(arguments);this.on("RowClick",function(c){var d=a.getItem(c.rowIndex);c=c.cell.field;if(a.contractor)switch(parseInt(String(d.type))){case buildspace.constants.TYPE_SUPPLY_OF_MATERIAL_BILL:if("printWithNotListedItem"==
c||"printWithoutNotListedItem"==c)return window.open("supplyOfMaterialBill/printContractorsRate/bid/"+d.id+"/tcid/"+b.tender_company_id+"/pid/"+a.projectId,"_blank"),window.focus();break;case buildspace.constants.TYPE_SCHEDULE_OF_RATE_BILL:if("printWithNotListedItem"==c||"printWithoutNotListedItem"==c)return window.open("scheduleOfRateBill/printContractorsRate/bid/"+d.id+"/tcid/"+b.tender_company_id+"/pid/"+a.projectId,"_blank"),window.focus();break;case buildspace.constants.TYPE_BILL:if("printWithoutNotListedItem"==
c&&0<parseInt(String(d.id)))return window.open("ContractorBQFinalPdf/"+a.projectId+"/"+d.id+"/"+b.tender_company_id+"/"+a._csrf_token+"/0","_blank"),window.focus();if("printWithoutNotListedItem"==c&&0==parseInt(String(d.id)))return window.open("ContractorBQSummary/"+a.projectId+"/"+b.tender_company_id+"/"+a._csrf_token+"/0","_blank"),window.focus();if("printWithNotListedItem"==c&&0<parseInt(String(d.id)))return window.open("ContractorBQFinalPdf/"+a.projectId+"/"+d.id+"/"+b.tender_company_id+"/"+a._csrf_token+
"/1","_blank"),window.focus();if("printWithNotListedItem"==c&&0==parseInt(String(d.id)))return window.open("ContractorBQSummary/"+a.projectId+"/"+b.tender_company_id+"/"+a._csrf_token+"/1","_blank"),window.focus()}else switch(parseInt(String(d.type))){case buildspace.constants.TYPE_SUPPLY_OF_MATERIAL_BILL:if("printWithNotListedItem"==c||"printWithoutNotListedItem"==c)return window.open("supplyOfMaterialBill/printBill/id/"+d.id,"_blank"),window.focus();break;case buildspace.constants.TYPE_SCHEDULE_OF_RATE_BILL:if("printWithNotListedItem"==
c||"printWithoutNotListedItem"==c)return window.open("scheduleOfRateBill/printBill/id/"+d.id,"_blank"),window.focus();break;case buildspace.constants.TYPE_BILL:if("printWithoutNotListedItem"==c&&0<parseInt(String(d.id)))return window.open("EstimationBQFinalPdf/"+a.projectId+"/"+d.id+"/"+a._csrf_token+"/0","_blank"),window.focus();if("printWithoutNotListedItem"==c&&0==parseInt(String(d.id)))return window.open("EstimationBQSummary/"+a.projectId+"/-1/"+a._csrf_token+"/0","_blank"),window.focus();if("printWithNotListedItem"==
c&&0<parseInt(String(d.id)))return window.open("EstimationBQFinalPdf/"+a.projectId+"/"+d.id+"/"+a._csrf_token+"/1","_blank"),window.focus();if("printWithNotListedItem"==c&&0==parseInt(String(d.id)))return window.open("EstimationBQSummary/"+a.projectId+"/-1/"+a._csrf_token+"/1","_blank"),window.focus()}})},dodblclick:function(a){this.onRowDblClick(a)}}),F=f("buildspace.apps.ViewTenderer.PrintBillGrid.CellFormatter",null,{rowCountCellFormatter:function(a,b,c){return parseInt(b)+1},descriptionCellFormatter:function(a,
b){return(b=this.grid.getItem(b))&&0==parseInt(String(b.id))?e.summaryPage:a},printCellAddendumWithoutNotListedItemFormatter:function(a,b){return(a=this.grid.getItem(b))&&0<=parseInt(String(a.id))?'<a href="javascript:void(0);">'+e.print+"</a>":null},printCellAddendumWithNotListedItemFormatter:function(a,b){return(a=this.grid.getItem(b))&&0<=parseInt(String(a.id))?'<a href="javascript:void(0);">'+e.print+"</a>":null}}),G=f("buildspace.apps.ViewTenderer.ProjectSummary.ExportToExcelForm",[v,w,x,y,q,
r,t,u],{templateString:'<form data-dojo-attach-point="containerNode"><table class="table-form"><tr><td class="label" style="width:80px;"><label style="display: inline;"></span>'+e.exportAs+' :</label></td><td><input type="text" name="filename" style="padding:2px;width:220px;" data-dojo-type="dijit/form/ValidationTextBox" data-dojo-props="trim:true, propercase:true, maxlength:45, required: true"> .xlsx</td></tr></table></form>',projectId:null,tenderAlternative:null,contractor:null,_csrf_token:null,
opt:"with",region:"center",dialogWidget:null,style:"outline:none;padding:0px;margin:0px;border:none;",baseClass:"buildspace-form",startup:function(){this.inherited(arguments);var a=new Date;this.setFormValues({filename:"Project_Summary"+a.getDate()+(a.getMonth()+1)+a.getFullYear()})},submit:function(){var a=dojo.formToObject(this.id);if(this.validate()){a=a.filename.replace(/ /g,"_");var b=this.tenderAlternative?parseInt(String(this.tenderAlternative.id)):-1;window.open("ContractorProjectSummaryXls/"+
this.contractor.tender_company_id+"/"+this.projectId+"/"+b+"/"+this._csrf_token+"/"+this.opt+"/"+a,"_self");this.dialogWidget&&this.dialogWidget.hide()}}}),H=f("buildspace.apps.ViewTenderer.ProjectSummary.ExportExcelDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:e.exportToExcel,projectId:null,tenderAlternative:null,contractor:null,_csrf_token:null,opt:"with",buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){m.set(this.containerNode,
{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==l.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:400px;height:80px;",gutters:!1}),b=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"}),c=G({projectId:this.projectId,tenderAlternative:this.tenderAlternative,contractor:this.contractor,
_csrf_token:this._csrf_token,opt:this.opt,dialogWidget:this});b.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:e.export,iconClass:"icon-16-container icon-16-export",style:"outline:none!important;",onClick:dojo.hitch(c,"submit")}));a.addChild(b);a.addChild(c);return a}});return f("buildspace.apps.ViewTenderer.PrintBillGridDialog",
dijit.Dialog,{style:"padding:0px;margin:0px;",title:e.printBQ,contractor:!1,projectId:null,tenderAlternative:null,bqCSRFToken:null,printRationalizedRate:!1,_csrf_token:null,currentModuleName:"tendering",buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){m.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==l.ESCAPE&&dojo.stopEvent(a)},
onHide:function(){this.destroyRecursive()},createContent:function(){var a=this,b=new dijit.layout.BorderContainer({style:"padding:0px;width:800px;height:350px;",gutters:!1}),c=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;border:0px;"});c.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));if(this.contractor){var d=new B({style:"display: none;"});dojo.forEach([{opt:"printToPdf",
iconClass:"icon-16-print",subMenus:[{id:"with"},{id:"without"}]},{opt:"exportToExcel",iconClass:"icon-16-spreadsheet",subMenus:[{id:"with"},{id:"without"}]}],function(g){var n=new z;dojo.forEach(g.subMenus,function(p){n.addChild(new C({label:e[p.id]+" "+e.notListedItem,onClick:dojo.hitch(a,g.opt,p.id)}))});d.addChild(D({label:e[g.opt],iconClass:"icon-16-container "+g.iconClass,popup:n}))});c.addChild(new dijit.ToolbarSeparator);c.addChild(new A({label:e.projectSummary,iconClass:"icon-16-container icon-16-list",
style:"outline:none!important;",dropDown:d}))}var h="printBQ/getProjectPrintList/id/"+this.projectId+"/no_summary/true";this.tenderAlternative&&(h+="/tid/"+parseInt(String(this.tenderAlternative.id)));var k=new F;h=dojo.data.ItemFileWriteStore({url:h});b.addChild(c);b.addChild(E({projectId:this.projectId,contractor:this.contractor,_csrf_token:this._csrf_token,store:h,structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:k.rowCountCellFormatter},{name:e.description,field:"title",
width:"auto",formatter:k.descriptionCellFormatter},{name:e.numberOfItems,field:"item_count",width:"120px",styles:"text-align:center;"},{name:e.w_o+e.notListedItem,field:"printWithoutNotListedItem",width:"120px",styles:"text-align:center;",formatter:k.printCellAddendumWithoutNotListedItemFormatter},{name:e.w+e.notListedItem,field:"printWithNotListedItem",width:"120px",styles:"text-align:center;",formatter:k.printCellAddendumWithNotListedItemFormatter}],currentModuleName:this.currentModuleName}));return b},
printToPdf:function(a){var b=this.tenderAlternative?parseInt(String(this.tenderAlternative.id)):-1;window.open("ContractorProjectSummaryPdf/"+this.contractor.tender_company_id+"/"+this.projectId+"/"+b+"/"+this._csrf_token+"/"+a,"_blank");return window.focus()},exportToExcel:function(a){H({projectId:this.projectId,tenderAlternative:this.tenderAlternative,contractor:this.contractor,_csrf_token:this._csrf_token,opt:a}).show()}})});
