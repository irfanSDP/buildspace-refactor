define("buildspace/apps/ProjectAnalyzerReport/MultiRateAnalyzerDialog","dojo/_base/declare dojo/_base/lang dojo/html dojo/keys dojo/dom-style buildspace/widget/grid/plugins/FormulatedColumn buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/ProjectAnalyzer".split(" "),function(f,r,t,h,m,n,p,e){var q=f("buildspace.apps.ProjectAnalyzerReport.MultiRateAnalyzerGrid",dojox.grid.EnhancedGrid,{resourceStore:null,projectId:0,resourceId:0,billGrid:null,style:"border-top:0px;",canSort:function(a){return!1},
postCreate:function(){this.formulatedColumn=n(this,{});this.inherited(arguments)},doApplyCellEdit:function(a,l,b){var c=this,d=c.getItem(l),f=c.store,g=b.replace("-value","");if(a!==d[b][0]){var k=buildspace.dialog.indeterminateProgressBar({title:e.mayTakeAWhile+". "+e.pleaseWait+"..."}),h=function(b,a){for(var c in b)d.hasOwnProperty(c)&&c!=a._getIdentifierAttribute()&&a.setValue(d,c,b[c]);a.save()},g={url:"projectAnalyzer/resourceMultiValueUpdate",content:{id:d.id,pid:c.projectId,rid:c.resourceId,
cname:g,oval:d[g+"-value"],val:a,_csrf_token:d._csrf_token?d._csrf_token:null},handleAs:"json",load:function(a){h(a.data,f);var e=c.getCellByField(b);a=a.resource_store;window.setTimeout(function(){c.focus.setFocusIndex(l,e.index)},10);if(!a.multi){var d=c.resourceStore,g=a.data;d.fetchItemByIdentity({identity:g.id,onItem:function(a){for(var b in g)a.hasOwnProperty(b)&&b!=d._getIdentifierAttribute()&&d.setValue(a,b,g[b])}});f.save();d.save()}k.hide()},error:function(a){k.hide()}};k.show();dojo.xhrPost(g)}c.inherited(arguments)}});
return f("buildspace.apps.ProjectAnalyzerReport.MultiRateAnalyzerDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",resourceStore:null,resourceId:0,projectId:0,columnName:"rate",buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){m.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){key=a.keyCode;key==h.ESCAPE&&dojo.stopEvent(a)},
onHide:function(){this.destroyRecursive()},createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:350px;height:250px;",gutters:!1}),f=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;border-bottom:0px;"});f.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));var b=new p,b="rate"==this.columnName?[{name:"No.",field:"id",
width:"30px",styles:"text-align:center;",formatter:b.rowCountCellFormatter},{name:e.rate,field:"rate-value",width:"150px",styles:"text-align:right;",formatter:b.formulaCurrencyCellFormatter},{name:e.noOfBillItems,field:"no_bill_items",styles:"text-align:center;",width:"150px"}]:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:b.rowCountCellFormatter},{name:e.wastage,field:"wastage-value",width:"150px",styles:"text-align:right;",formatter:b.formulaNumberCellFormatter},{name:e.noOfBillItems,
field:"no_bill_items",styles:"text-align:center;",width:"150px"}],c=dojo.data.ItemFileWriteStore({url:"projectAnalyzer/getValuesFromResourceAndProject/cname/"+this.columnName+"/rid/"+this.resourceId+"/pid/"+this.projectId}),b=q({resourceStore:this.resourceStore,resourceId:this.resourceId,projectId:this.projectId,store:c,structure:b}),b=new dijit.layout.ContentPane({content:b,style:"width:100%;height:100%;border:0px;",region:"center"});a.addChild(f);a.addChild(b);return a}})});
