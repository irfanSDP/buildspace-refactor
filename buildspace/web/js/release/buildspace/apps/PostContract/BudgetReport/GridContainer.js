define("buildspace/apps/PostContract/BudgetReport/GridContainer","dojo/_base/declare dojo/currency dojo/number dojox/grid/EnhancedGrid buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/PostContract".split(" "),function(h,m,n,p,q,a){var f=h("buildspace.apps.PostContract/BudgetReport/Grid",p,{style:"border:none;",region:"center",keepSelection:!0,escapeHTMLInData:!1,canSort:function(){return!1}}),k=function(b,c,a){c=this.grid.getItem(c);var d=16*c.level;b=null==b?"&nbsp":b;if(c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER||
c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N)b="<b>"+b+"</b>";c.is_sub_project||c.id==buildspace.constants.GRID_LAST_ROW||a.customClasses.push("hasAddendumTypeItemCell");void 0==c.is_tagged||c.is_tagged[0]||a.customClasses.push("hasCurrentAddendumTypeItemCell");return'<div class="treeNode" style="color:black; padding-left:'+d+'px;"><div class="treeContent">'+b+"&nbsp;</div></div>"},l=function(b,c,a){c=this.grid.getItem(c);var d=16*(c.level-1);b=null==b?"&nbsp":b;c.type!=buildspace.apps.PostContract.ProjectStructureConstants.TYPE_ROOT||
isNaN(c.id)||(b="<b>"+b+"</b>");1>c.type?a.customClasses.push("invalidTypeItemCell"):b='<div class="treeNode" style="padding-left:'+d+'px;"><div class="treeContent">'+b+"&nbsp;</div></div>";return b},g=function(b,c,a){c=this.grid.getItem(c);b=n.parse(b);if(isNaN(b)||0==b||null==b)b="&nbsp;";else{var d=m.format(b);b=d;c.type==buildspace.constants.HIERARCHY_TYPE_WORK_ITEM&&(b='<strong><span style="color:green;">'+d+"</span></strong>")}a.customClasses.push("disable-cell");return b};return h("buildspace.apps.PostContract.BudgetReport.GridContainer",
dijit.layout.BorderContainer,{region:"center",title:"",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,grid:null,stackContainer:null,parentContainer:null,project:null,bill:null,variationOrder:null,postCreate:function(){this.inherited(arguments);this.formatter=new q;var b=this.stackContainer=this.createStackContainer(),c=new dijit.layout.BorderContainer({title:this.title,style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,region:"center"});c.addChild(this.createProjectBudgetGrid());
b.addChild(c)},exportProjectReport:function(){form=document.createElement("form");form.setAttribute("method","post");form.setAttribute("action","budgetReportExport/exportProjectReport/pid/"+this.project.id);form.setAttribute("target","_self");document.body.appendChild(form);return form.submit()},exportBillReport:function(){form=document.createElement("form");form.setAttribute("method","post");form.setAttribute("action","budgetReportExport/exportBillReport/pid/"+this.project.id+"/bill_id/"+this.bill.id);
form.setAttribute("target","_self");document.body.appendChild(form);return form.submit()},exportElementReport:function(){form=document.createElement("form");form.setAttribute("method","post");form.setAttribute("action","budgetReportExport/exportElementReport/pid/"+this.project.id+"/bill_id/"+this.bill.id+"/element_id/"+this.element.id);form.setAttribute("target","_self");document.body.appendChild(form);return form.submit()},exportVariationOrderReport:function(){form=document.createElement("form");
form.setAttribute("method","post");form.setAttribute("action","budgetReportExport/exportVariationOrderReport/pid/"+this.project.id);form.setAttribute("target","_self");document.body.appendChild(form);return form.submit()},exportVariationOrderItemReport:function(){form=document.createElement("form");form.setAttribute("method","post");form.setAttribute("action","budgetReportExport/exportVariationOrderItemReport/pid/"+this.project.id+"/vo_id/"+this.variationOrder.id);form.setAttribute("target","_self");
document.body.appendChild(form);return form.submit()},getProjectBudgetGridStructure:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:this.formatter.rowCountCellFormatter},{name:a.description,field:"description",width:"auto",formatter:l},{name:a.untaggedItems,field:"untagged_item_count",width:"90px",styles:"text-align: center;",formatter:this.formatter.unEditableIntegerCellFormatter},{name:a.revenue,field:"revenue",width:"90px",styles:"text-align: right;",
formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.budget,field:"budget",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConBudget,field:"sub_con_budget",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConCost,field:"sub_con_cost",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressRevenue,field:"progress_revenue",
width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressCost,field:"progress_cost",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter}]},getBillBudgetGridStructure:function(){return this.getProjectBudgetGridStructure()},getElementBudgetGridStructure:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:this.formatter.rowCountCellFormatter},{name:a.description,
field:"description",width:"500px",formatter:k},{name:a.unit,field:"uom_symbol",width:"70px",styles:"text-align: center;",formatter:this.formatter.unitIdCellFormatter},{name:a.contractQty,field:"total_quantity",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConQty,field:"sub_con_quantity",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressQty,field:"up_to_date_qty",width:"90px",
styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.contractRate,field:"rate",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.budgetRate,field:"budget_rate",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConRate,field:"sub_con_rate",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.revenue,
field:"revenue",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.budget,field:"budget",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConBudget,field:"sub_con_budget",width:"90px",styles:"text-align: right;",formatter:g},{name:a.subConCost,field:"sub_con_cost",width:"90px",styles:"text-align: right;",formatter:g},{name:a.progressRevenue,field:"progress_revenue",width:"90px",styles:"text-align: right;",
formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressCost,field:"progress_cost",width:"90px",styles:"text-align: right;",formatter:g}]},getVariationOrderGridStructure:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:this.formatter.rowCountCellFormatter},{name:a.description,field:"description",width:"auto",formatter:l},{name:a.untaggedItems,field:"untagged_item_count",width:"90px",styles:"text-align: center;",formatter:this.formatter.unEditableIntegerCellFormatter},
{name:a.revenue,field:"revenue",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.subConCost,field:"sub_con_cost",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressRevenue,field:"progress_revenue",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressCost,field:"progress_cost",width:"90px",styles:"text-align: right;",
formatter:this.formatter.unEditableCurrencyCellFormatter}]},getVariationOrderItemGridStructure:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:this.formatter.rowCountCellFormatter},{name:a.description,field:"description",width:"auto",formatter:k},{name:a.unit,field:"uom_symbol",width:"70px",styles:"text-align: center;",formatter:this.formatter.unitIdCellFormatter},{name:a.revenue,field:"revenue",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},
{name:a.subConCost,field:"sub_con_cost",width:"90px",styles:"text-align: right;",formatter:g},{name:a.progressRevenue,field:"progress_revenue",width:"90px",styles:"text-align: right;",formatter:this.formatter.unEditableCurrencyCellFormatter},{name:a.progressCost,field:"progress_cost",width:"90px",styles:"text-align: right;",formatter:g}]},createStackContainer:function(){var b=this.id+"-budgetReport-stackContainer",c=this.stackContainer=new dijit.layout.StackContainer({style:"border:0px;width:100%;height:100%;",
region:"center",id:b});dojo.subscribe(b+"-selectChild","",function(a){var c=dijit.byId(b);if(c){var d=c.getChildren();a=dojo.indexOf(d,a);a+=1;if(d.length>a)for(;d.length>a;)c.removeChild(d[a]),d[a].destroyDescendants(),d[a].destroyRecursive(),a+=1}});var a=new dijit.layout.StackController({region:"top",containerId:b});a=new dijit.layout.ContentPane({style:"padding:0px;overflow:hidden;",baseClass:"breadCrumbTrail",region:"top",id:this.id+"-budgetReport-controllerPane",content:a});this.addChild(c);
this.addChild(a);return c},createProjectBudgetGrid:function(){var b=this,c=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});c.addChild(new dijit.form.Button({label:a.export,iconClass:"icon-16-container icon-16-print",style:"outline:none!important;",onClick:function(){b.exportProjectReport()}}));var e=f({structure:b.getProjectBudgetGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"budgetReport/getProjectBudgetReport/pid/"+
b.project.id}),onRowDblClick:function(a){a=this.getItem(a.rowIndex);a.type==buildspace.apps.PostContract.ProjectStructureConstants.TYPE_BILL&&0<a.id[0]?b.createBillBudgetGrid(a):a.type==buildspace.apps.PostContract.ProjectStructureConstants.TYPE_VARIATION_ORDER&&b.createVariationOrderGrid()}}),d=new dijit.layout.BorderContainer({style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,region:"center"});d.addChild(c);d.addChild(e);return d},createBillBudgetGrid:function(b){var c=this;this.bill=
b;var e=new dijit.layout.BorderContainer({title:buildspace.truncateString(b.description,60),region:"center",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,item:b}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});d.addChild(new dijit.form.Button({label:a.export,iconClass:"icon-16-container icon-16-print",style:"outline:none!important;",onClick:function(){c.exportBillReport()}}));b=f({item:c.item,structure:c.getBillBudgetGridStructure(),
store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"budgetReport/getBillBudgetReport/pid/"+c.project.id+"/bill_id/"+b.id}),onRowDblClick:function(a){a=this.getItem(a.rowIndex);0<a.id[0]&&c.createElementBudgetGrid(a)}});e.addChild(d);e.addChild(b);this.stackContainer.addChild(e);this.stackContainer.selectChild(e)},createElementBudgetGrid:function(b){var c=this;this.element=b;var e=new dijit.layout.BorderContainer({title:buildspace.truncateString(b.description,60),region:"center",style:"padding:0px;border:none;width:100%;height:100%;",
gutters:!1,item:b}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});d.addChild(new dijit.form.Button({label:a.export,iconClass:"icon-16-container icon-16-print",style:"outline:none!important;",onClick:function(){c.exportElementReport()}}));b=f({item:c.item,structure:c.getElementBudgetGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"budgetReport/getElementBudgetReport/pid/"+c.project.id+"/bill_id/"+this.bill.id+"/element_id/"+
b.id})});e.addChild(d);e.addChild(b);this.stackContainer.addChild(e);this.stackContainer.selectChild(e)},createVariationOrderGrid:function(){var b=this,c=new dijit.layout.BorderContainer({title:a.variationOrders,region:"center",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1}),e=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});e.addChild(new dijit.form.Button({label:a.export,iconClass:"icon-16-container icon-16-print",style:"outline:none!important;",
onClick:function(){b.exportVariationOrderReport()}}));var d=f({structure:b.getVariationOrderGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"budgetReport/getVariationOrderList/pid/"+b.project.id}),onRowDblClick:function(a){a=this.getItem(a.rowIndex);0<a.id[0]&&b.createVariationOrderItemGrid(a)}});c.addChild(e);c.addChild(d);this.stackContainer.addChild(c);this.stackContainer.selectChild(c)},createVariationOrderItemGrid:function(b){var c=this;this.variationOrder=b;var e=
new dijit.layout.BorderContainer({title:a.variationOrders,region:"center",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});d.addChild(new dijit.form.Button({label:a.export,iconClass:"icon-16-container icon-16-print",style:"outline:none!important;",onClick:function(){c.exportVariationOrderItemReport()}}));b=f({structure:c.getVariationOrderItemGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,
url:"budgetReport/getVariationOrderItemList/pid/"+c.project.id+"/vo_id/"+b.id})});e.addChild(d);e.addChild(b);this.stackContainer.addChild(e);this.stackContainer.selectChild(e)},close:function(){this.parentContainer.removeChild(this);return this.destroyRecursive()}})});
