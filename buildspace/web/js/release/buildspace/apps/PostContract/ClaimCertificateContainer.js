define("buildspace/apps/PostContract/ClaimCertificateContainer","dojo/_base/declare dojo/_base/lang dojo/aspect dojo/html dojo/on dojo/dom dojo/NodeList-manipulate dojo/keys dojo/query dojo/dom-construct dojo/dom-style dojo/dom-prop dojo/currency dojo/number dijit/form/FilteringSelect dojox/widget/Standby dojox/form/manager/_Mixin dojox/form/manager/_NodeMixin dojox/form/manager/_ValueMixin dojox/form/manager/_DisplayMixin dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/claimCertificateForm.html dojo/text!./templates/claimCertificateViewForm.html dojo/text!./templates/claimCertificatePrintInfo.html dojo/text!./templates/claimCertificateFormatAPrintInfo.html dojo/text!./templates/claimCertificateFormatBPrintInfo.html dojo/text!./templates/claimCertificateFormatAPrintInfoWithTax.html dojo/text!./templates/claimCertificateFormatNscPrintInfo.html dojo/text!./templates/claimCertificatePrintSettingsForm.html dojo/text!./templates/invoiceInformationForm.html dojo/text!./templates/topManagementVerifierSelectionRow.html dojox/grid/EnhancedGrid buildspace/widget/grid/cells/Formatter ./ClaimCertificatePaymentDialog ./ClaimCertificateNoteContainer ./PostContractClaim/ClaimExportDialog ./PostContractClaim/ClaimImportDialog ./AccountCodeSetting/AccountCodeSettingsTabContainer dijit/form/Form dojo/i18n!buildspace/nls/PostContract".split(" "),
function(q,A,Q,n,D,r,qa,E,F,B,h,H,w,G,C,ra,I,J,K,L,x,y,z,R,S,T,U,V,sa,W,X,Y,Z,aa,ba,ca,da,ea,fa,ha,M,f,ta){var ia=q("buildspace.apps.PostContract.ClaimCertificateForm",[x,y,z],{templateString:R,baseClass:"buildspace-form",nls:f,claimCertificateContainer:null,grid:null,startup:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),d={pid:this.claimCertificateContainer.project.id};b.show().then(function(){dojo.xhrGet({url:"postContract/claimCertificateForm",
handleAs:"json",content:d,load:function(c){for(var g in c.post_contract_info)n.set(a[g],c.post_contract_info[g]);n.set(a.contractorSubmittedDateLbl,c.contractorSubmittedDateLabel+" :");n.set(a.siteVerifiedDateLbl,c.siteVerifiedDateLabel+" :");n.set(a.certificateReceivedDateLbl,c.certificateReceivedDateLabel+" :");a.claimCertificateForm.setFormValues(c.claim_certificate);parseFloat(c.claim_certificate["claim_certificate[retention_limit]"]);var e=c.claim_certificate["claim_certificate[retention_sum]"],
k=c.currencyCode,m="";for(g in e){var l=G.parse(e[g]);if(isNaN(l)||0==l||null==l)l=0;l=w.format(l);m+=k+" "+l+" ( "+c.taxLabel+" : "+g+" )% <br>"}n.set(a.retentionSum,m);c.claim_certificate["claim_certificate[is_first_claim_certificate]"]||0==e.length?(a.releaseRetentionAmountInput.setDisabled(!0),a.releaseRetentionPercentageInput.setDisabled(!0)):a.releaseRetentionPercentageInput.set("constraints",{min:0,max:100,pattern:"##0.00"});b.hide()},error:function(c){b.hide()}})})},postCreate:function(){this.inherited(arguments);
(new C({name:"claim_certificate[retention_tax_percentage]",id:"retention_tax_percentage_drop_down",store:new dojo.data.ItemFileReadStore({url:"postContract/getTaxPercentage/pid/"+this.claimCertificateContainer.project.id}),style:"padding:2px;",searchAttr:"name",readOnly:!1,required:!1})).placeAt(this.retention_tax_percentage);(new C({name:"claim_certificate[tax_percentage]",id:"claim_certificate_tax_percentage_drop_down",store:new dojo.data.ItemFileReadStore({url:"postContract/getClaimCertificateTaxPercentage"}),
style:"padding:2px;",searchAttr:"name",readOnly:!1,required:!1})).placeAt(this.claim_certificate_tax_percentage);D(this.releaseRetentionPercentageInput,"keyup",A.hitch(this,"updateReleaseRetention","percentage"));D(this.releaseRetentionAmountInput,"keyup",A.hitch(this,"updateReleaseRetention","amount"))},updateReleaseRetention:function(a){var b=this,d=dijit.byId("retention_tax_percentage_drop_down")?dijit.byId("retention_tax_percentage_drop_down").get("value"):null,c="percentage"==a?this.release_retention_amount_standby:
this.release_retention_percentage_standby,g=dijit.byId("saveClaimCertificate-button");d&&0<=d&&(c.show(),g.setDisabled(!0),dojo.xhrGet({url:"postContract/getRetentionSum",handleAs:"json",content:{pid:b.claimCertificateContainer.project.id},load:function(e){b.retentionSumBYGST=e.retentionSumByGST;b.retentionLimit=b.retentionSumBYGST[d];switch(a){case "percentage":e=b.releaseRetentionAmountInput;var k=isNaN(b.releaseRetentionPercentageInput.get("value"))?0:b.releaseRetentionPercentageInput.get("value");
k=k/100*b.retentionLimit;break;default:e=b.releaseRetentionPercentageInput,k=isNaN(b.releaseRetentionAmountInput.get("value"))?0:b.releaseRetentionAmountInput.get("value"),k=0!=b.retentionLimit?k/b.retentionLimit*100:0}e.set("value",k);g.setDisabled(!1);c.hide()}}))},save:function(){var a=buildspace.dialog.indeterminateProgressBar({title:f.savingData+"..."}),b=this,d=dojo.formToObject(this.claimCertificateForm.id);A.mixin(d,{pid:this.claimCertificateContainer.project.id});this.claimCertificateForm.validate()&&
a.show().then(function(){dojo.xhrPost({url:"postContract/claimCertificateUpdate",content:d,handleAs:"json",load:function(c){dojo.query('[id^="error-claim_certificate_"]').forEach(function(k){k.innerHTML=""});if(c.success)b.claimCertificateContainer.grid.reload(),b.claimCertificateContainer.workArea.removeBillTab(),b.claimCertificateContainer.openClaimCertificateViewForm(c.claimCertificate);else for(var g in c.errorMsg){var e=c.errorMsg[g];n.set(r.byId("error-claim_certificate_"+g),e)}a.hide()},error:function(c){a.hide()}})})}}),
N=q("buildspace.apps.PostContract.TopManagementVerifier.SelectionRow",[x,y,z],{templateString:Z,baseClass:"buildspace-form",nls:f,name:null,value:null,textAlign:null,editMode:null,locked:null,addVerifierButton:null,verifierSelect:null,claimCertificateInfo:null,recordInfo:null,ClaimCertificateViewForm:null,_csrf_token:null,project:null,constructor:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.toggleEditableInputElements();this.locked?(h.set(this.actionColumnNode,
"display","none"),h.set(this.deleteColumnNode,"display","none")):this.editMode?(h.set(this.editButton.domNode,"display","none"),h.set(this.saveButton.domNode,"display","")):(h.set(this.saveButton.domNode,"display","none"),h.set(this.editButton.domNode,"display",""))},toggleEditableInputElements:function(){if(this.editMode){var a=new dojo.data.ItemFileReadStore({url:"claimCertificate/getTopManagementVerifiers/pid/"+this.project.id});a=new C({name:"claim_certificate[top_management_verifiers][]",store:a,
style:"width:100%;padding-top:2px;padding-bottom:2px;",searchAttr:"name",readOnly:!1,required:!0});a.placeAt(this.verifierSelectNode);this.verifierSelect=a;h.set(this.verifierSelectDivNode,"display","");h.set(this.verifierViewNode,"display","none")}else null!=this.recordInfo&&(n.set(this.verifierViewNode,this.recordInfo.name),n.set(this.verifierEmailNode,this.recordInfo.email)),h.set(this.verifierSelectDivNode,"display","none"),h.set(this.verifierViewNode,"display","")},edit:function(){this.addVerifierButton.set("disabled",
!0);h.set(this.editButton.domNode,"display","none");h.set(this.saveButton.domNode,"display","");this.editMode=!0;var a=new dojo.data.ItemFileReadStore({url:"claimCertificate/getTopManagementVerifiers/pid/"+this.project.id}),b=new C({name:"claim_certificate[top_management_verifiers][]",store:a,style:"width:100%;padding-top:2px;padding-bottom:2px;",searchAttr:"name",readOnly:!1,required:!0});a.fetchItemByIdentity({identity:this.recordInfo.user_id,onItem:function(d){b.set("item",d)}});b.placeAt(this.verifierSelectNode);
this.verifierSelect=b;h.set(this.verifierSelectDivNode,"display","");h.set(this.verifierViewNode,"display","none")},save:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.savingData+"..."}),d=a.verifierSelect.get("value"),c=a.recordInfo?a.recordInfo.id:-1,g=a.recordInfo?"claimCertificate/updateTopManagementVerifier":"claimCertificate/saveTopManagementVerifier";b.show().then(function(){dojo.xhrPost({url:g,content:{"post_contract_claim_top_management_verifier[id]":c,"post_contract_claim_top_management_verifier[user_id]":d,
"post_contract_claim_top_management_verifier[objectId]":a.claimCertificateInfo.id,"post_contract_claim_top_management_verifier[_csrf_token]":a._csrf_token},handleAs:"json",load:function(e){e.success?(a.ClaimCertificateViewForm.populatePostContractClaimTopManagementVerifierRecords(),a.addVerifierButton.set("disabled",!1)):buildspace.dialog.alert("Warning",Object.values(e.errors)[0],100,300);b.hide()},error:function(e){b.hide()}});b.hide()})},removeColumn:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.deleting+
". "+f.pleaseWait+"..."});null!==a.recordInfo?new buildspace.dialog.confirm(f.deletePostContractTopManagementVerifierDialogBoxTitle,f.deletePostContractTopManagementVerifierDialogBoxMsg,80,320,function(){b.show().then(function(){dojo.xhrPost({url:"claimCertificate/deleteTopManagementVerifier",content:{id:a.recordInfo.id},handleAs:"json",load:function(d){!0===d.success&&(a.ClaimCertificateViewForm.populatePostContractClaimTopManagementVerifierRecords(),a.addVerifierButton.set("disabled",!1));b.hide()},
error:function(d){b.hide()}})})}):(this.destroyRecursive(),this.addVerifierButton.set("disabled",!1))}}),ja=q("buildspace.apps.PostContract.ClaimCertificateViewForm",[x,y,z],{templateString:S,baseClass:"buildspace-form",project:null,claimCertificateInfo:null,claimCertificate:null,claimCertificateContainer:null,isTopManagementVerifierEditable:null,nls:f,startup:function(){this.inherited(arguments);var a=this.claimCertificateInfo;this.claimCertificateViewForm.setFormValues(a);n.set(this.contractorSubmittedDateLbl,
a.contractorSubmittedDateLabel+" :");n.set(this.siteVerifiedDateLbl,a.siteVerifiedDateLabel+" :");n.set(this.certificateReceivedDateLbl,a.certificateReceivedDateLabel+" :");n.set(this.accRemarksNode,a.acc_remarks);n.set(this.qsRemarksNode,a.qs_remarks);n.set(this.contractSum,a.contractSum);n.set(this.workDoneAmount,a.workDoneAmount);n.set(this.completionPercentage,a.completionPercentage);var b=a.retention_sum,d=a.currencyCode,c="",g;for(g in b){var e=G.parse(b[g]);if(isNaN(e)||0==e||null==e)e=0;e=
w.format(e);c+=d+" "+e+" ( "+a.taxLabel+" : "+g+" )% <br>"}n.set(this.retentionSum,c)},postCreate:function(){this.inherited(arguments);this.populatePostContractClaimTopManagementVerifierRecords();this.btnAddVerifier.set("onClick",dojo.hitch(this,"addVerifierRow"));this.isTopManagementVerifierEditable||(h.set(this.btnAddVerifier.domNode,"display","none"),h.set(this.actionHeaderNode,"display","none"),h.set(this.deleteHeaderNode,"display","none"))},populatePostContractClaimTopManagementVerifierRecords:function(){var a=
this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});dojo.empty(a.topManagementVerifierRowContainer);b.show().then(function(){dojo.xhrGet({url:"claimCertificate/getSavedTopManagementVerifiers",content:{claimCertificateId:a.claimCertificateInfo.id},handleAs:"json",load:function(d){0<d.records.length?dojo.forEach(d.records,function(c){(new N({editMode:!1,locked:!a.isTopManagementVerifierEditable,addVerifierButton:a.btnAddVerifier,claimCertificateInfo:a.claimCertificateInfo,
recordInfo:c,ClaimCertificateViewForm:a,_csrf_token:a.claimCertificate._csrf_token,project:a.project})).placeAt(a.topManagementVerifierRowContainer)}):a.isTopManagementVerifierEditable||h.set(a.topManagementVerifierSection,"display","none");b.hide()},error:function(d){b.hide()}})})},addVerifierRow:function(){(new N({editMode:!0,locked:!1,addVerifierButton:this.btnAddVerifier,claimCertificateInfo:this.claimCertificateInfo,recordInfo:null,ClaimCertificateViewForm:this,_csrf_token:this.claimCertificate._csrf_token,
project:this.project})).placeAt(this.topManagementVerifierRowContainer);this.btnAddVerifier.set("disabled",!0)},submitForApproval:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});b.show().then(function(){dojo.xhrPost({url:"claimCertificate/creditDebitNoteClaimItemsDescriptionCheck",content:{pid:a.project.id,id:a.claimCertificateInfo.id},handleAs:"json",load:function(d){if(d.success)dojo.xhrGet({url:"claimCertificate/getVerifierList",content:{pid:a.project.id,
id:a.claimCertificate.id},handleAs:"json",load:function(g){var e=0+Object.keys(g.verifiers).length;e+=g.topManagementVerifiers.length;g.success?buildspace.dialog.confirm(f.confirmSubmit,"<div>"+f.numberOfReviewers+": "+e+"</div>",60,200,function(){var k=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});k.show().then(function(){dojo.xhrPost({url:"claimCertificate/submitForApproval",handleAs:"json",content:{id:a.claimCertificate.id,pid:a.project.id},load:function(m){m.success&&
(a.claimCertificateContainer.grid.reload(),a.claimCertificateContainer.workArea.removeBillTab(),a.claimCertificateContainer.removeStackContainerChildren());k.hide()},error:function(m){k.hide()}})})}):buildspace.dialog.alert("Warning",g.errorMsg,100,300);b.hide()},error:function(g){b.hide()}});else{var c="<div>";d.details.forEach(function(g,e){c+=`${e+1}) ${g.account_group} => ${g.claim_description} [ ${g.count} ${f.records} ]</br>`});c+="</div>";buildspace.dialog.alert(f.error,f.requiredDescriptionDebitCreditNoteClaimItems+
"</br></br>"+c,150,400)}b.hide()},error:function(d){b.hide()}});b.hide()})}}),O=q("buildspace.apps.PostContract.ClaimCertificatePrintInfoForm",[x,y,z],{templateString:T,baseClass:"buildspace-form",project:null,claimCertificateInfo:null,claimCertificate:null,format:buildspace.constants.CERTIFICATE_INFO_FORMAT_STANDARD,nls:f,buildRendering:function(){switch(this.format){case buildspace.constants.CERTIFICATE_INFO_FORMAT_A:this.templateString=U;break;case buildspace.constants.CERTIFICATE_INFO_FORMAT_NSC:this.templateString=
W;break;case buildspace.constants.CERTIFICATE_INFO_FORMAT_B:this.templateString=V}this.inherited(arguments)},startup:function(){this.setDetails(this.claimCertificateInfo)},postCreate:function(){this.inherited(arguments)},addSubPackageRows:function(a){var b=a.claimCertificateInfo.subPackages,d;for(d in b){var c=r.byId("subpackage-row-1-template").cloneNode(!0);c.id="subpackage-row-1-"+d;c.hidden=!1;c.querySelector("[data-type=title]").innerHTML=b[d].title;c.querySelector("[data-type=index]").innerHTML=
"A"+(parseInt(d)+1);B.place(c,r.byId("subPackagesSection"),"before");c=r.byId("subpackage-row-2-template").cloneNode(!0);c.id="subpackage-row-2-"+d;c.hidden=!1;B.place(c,r.byId("subPackagesSection"),"before");c=r.byId("subpackage-row-3-template").cloneNode(!0);c.id="subpackage-row-3-"+d;c.hidden=!1;c.querySelector("[data-type=cumulativeAmountCertified]").innerHTML=b[d].cumulativeAmountCertified;c.querySelector("[data-type=cumulativePreviousAmountCertified]").innerHTML=b[d].cumulativePreviousAmountCertified;
c.querySelector("[data-type=amountCertified]").innerHTML=b[d].amountCertified;c.querySelector("[data-type=amountCertifiedTaxAmount]").innerHTML=b[d].amountCertifiedTaxAmount;c.querySelector("[data-type=amountCertifiedIncludingTax]").innerHTML=b[d].amountCertifiedIncludingTax;B.place(c,r.byId("subPackagesSection"),"before");c=r.byId("subpackage-row-4-template").cloneNode(!0);c.id="subpackage-row-4-"+d;c.hidden=!1;B.place(c,r.byId("subPackagesSection"),"before")}this.subPackageNetPayableAmountCurrencyCode&&
n.set(this.subPackageNetPayableAmountCurrencyCode,a.progressClaimInfo.currencyCode);this.subPackageNetPayableAmount&&n.set(this.subPackageNetPayableAmount,a.claimCertificateInfo.projectAndSubPackagesCurrentAmountCertified);this.subPackageNetPayableAmountIncludingTax&&n.set(this.subPackageNetPayableAmountIncludingTax,a.claimCertificateInfo.projectAndSubPackagesCurrentAmountCertifiedIncludingTax)},setDetails:function(a){this.format==buildspace.constants.CERTIFICATE_INFO_FORMAT_NSC&&this.addSubPackageRows(a);
for(e in a.claimCertificatePrintSettings){var b=buildspace.toCamelCase(e),d=a.claimCertificatePrintSettings.display_section_b,c=a.claimCertificatePrintSettings.display_section_c,g=a.claimCertificatePrintSettings.display_section_d;switch(e){case "display_section_b":d||F(".section_b-row").forEach(function(k,m,l){dojo.destroy(k)});break;case "display_section_c":c||F(".section_c-row").forEach(function(k,m,l){dojo.destroy(k)});break;case "display_section_d":g||F(".section_d-row").forEach(function(k,m,
l){dojo.destroy(k)});break;default:this[b]&&(0===e.indexOf("include_",0)&&"boolean"===typeof a.claimCertificatePrintSettings[e]&&a.claimCertificatePrintSettings[e]?h.set(this[b],"display",""):n.set(this[b],a.claimCertificatePrintSettings[e]))}}a.progressClaimInfo.showRequestForVariationWorkDone||dojo.destroy(this.requestForVariationWorkDoneNode);a.letterOfAwardOptions.retentionSumIncludeMaterialOnSite?r.byId("tr-misc-materialOnSite")&&H.set("tr-misc-materialOnSite","hidden","hidden"):H.set("tr-main-contract-materialOnSite",
"hidden","hidden");for(var e in a.claimCertificateInfo)b=e,this[b]&&n.set(this[b],a.claimCertificateInfo[e]);for(e in a.progressClaimInfo)this[e]&&n.set(this[e],a.progressClaimInfo[e]);null===a.claimCertificatePrintSettings.request_for_variation_category_id_to_print&&(this.rfvCategorynameDivider&&h.set(this.rfvCategorynameDivider,"display","none"),this.rfvCategoryNameSection&&h.set(this.rfvCategoryNameSection,"display","none"));if(c&&a.claimCertificatePrintSettings.debit_credit_note_with_breakdown){for(e in a.progressClaimInfo.debitCreditNoteBreakdownOverallTotal)c=
a.progressClaimInfo.debitCreditNoteBreakdownPreviousClaim[e]?a.progressClaimInfo.debitCreditNoteBreakdownPreviousClaim[e].total:0,b=a.progressClaimInfo.debitCreditNoteBreakdownThisClaim[e]?a.progressClaimInfo.debitCreditNoteBreakdownThisClaim[e].total:0,d=a.progressClaimInfo.debitCreditNoteBreakdownThisClaimAfterGST[e]?a.progressClaimInfo.debitCreditNoteBreakdownThisClaimAfterGST[e].total:0,B.create("tr",{innerHTML:'<td></td><td><label style="display:inline;">'+a.progressClaimInfo.debitCreditNoteBreakdownOverallTotal[e].description+
'</label></td><td class="label" style="text-align:right"><label style="display:inline;">'+w.format(a.progressClaimInfo.debitCreditNoteBreakdownOverallTotal[e].total)+'</label></td><td class="label" style="text-align:right"><label style="display:inline;">'+w.format(c)+'</label></td><td></td><td class="label" style="text-align:right"><label style="display:inline;">'+w.format(b)+'</label></td><td class="label" style="text-align:right"><label style="display:inline;">'+w.format(d)+"</label></td><td></td>"},
this.includeDebitCreditNote,"before");dojo.destroy(this.includeDebitCreditNote)}}}),ka=q("buildspace.apps.PostContract.ClaimCertificatePrintSettingForm",[x,y,z],{templateString:X,baseClass:"buildspace-form",title:f.claimCertificatePrintSettings,project:null,nls:f,startup:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),d={pid:this.project.id};b.show().then(function(){dojo.xhrGet({url:"postContract/getEnabledPostContractClaimModules",
handleAs:"json",load:function(c){dojo.xhrGet({url:"postContract/claimCertificatePrintSettingsForm",handleAs:"json",content:d,load:function(g){a.claimCertificatePrintSettingsForm.setFormValues(g);h.set(a.footerFormatATableLblNode,"display",a.footerFormatANode.checked?"":"none");Object.values({[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_ADVANCE_PAYMENT]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_ADVANCE_PAYMENT],[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEPOSIT]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEPOSIT],
[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_POST_CONTRACT_CLAIM_MATERIAL_ON_SITE]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_POST_CONTRACT_CLAIM_MATERIAL_ON_SITE],[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_KONGSIKONG]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_KONGSIKONG],[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF_BACKCHARGE]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF_BACKCHARGE]}).some(e=>
!0===e)?(c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_ADVANCE_PAYMENT]||h.set(a["sectionB-include_advance_payment"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEPOSIT]||h.set(a["sectionB-include_deposit"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_POST_CONTRACT_CLAIM_MATERIAL_ON_SITE]||h.set(a["sectionB-include_material_on_site"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_KONGSIKONG]||
h.set(a["sectionB-include_ksk"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF_BACKCHARGE]||h.set(a["sectionB-include_work_on_behalf_mc"],"display","none")):(h.set(a["sectionB-label"],"display","none"),h.set(a.sectionB,"display","none"));Object.values({[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEBIT_CREDIT_NOTE]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEBIT_CREDIT_NOTE],[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PURCHASE_ON_BEHALF]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PURCHASE_ON_BEHALF],
[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF],[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PENALTY]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PENALTY]}).some(e=>!0===e)?(c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_DEBIT_CREDIT_NOTE]||h.set(a["sectionC-include_debit_credit_note"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PURCHASE_ON_BEHALF]||
h.set(a["sectionC-include_purchase_on_behalf"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WORK_ON_BEHALF]||h.set(a["sectionC-include_work_on_behalf"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PENALTY]||h.set(a["sectionC-include_penalty"],"display","none")):(h.set(a["sectionC-label"],"display","none"),h.set(a.sectionC,"display","none"));Object.values({[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WATER_DEPOSIT]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WATER_DEPOSIT],
[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PERMIT]:c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PERMIT]}).some(e=>!0===e)?(c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_WATER_DEPOSIT]||h.set(a["sectionD-include_utility"],"display","none"),c.modules[buildspace.apps.PostContract.ProjectStructureConstants.TYPE_PERMIT]||h.set(a["sectionD-include_permit"],"display","none")):(h.set(a["sectionD-label"],"display","none"),h.set(a.sectionD,
"display","none"));(new C({name:"claim_certificate_print_setting[request_for_variation_category_id_to_print]",id:"request_for_variation_category_id_to_print",store:new dojo.data.ItemFileReadStore({url:"postContract/getRequestForVariationCategories"}),value:g["claim_certificate_print_setting[request_for_variation_category_id_to_print]"],style:"padding:2px;",searchAttr:"name",readOnly:!1,required:!1})).placeAt(a.RfvCategoryToPrintNode);b.hide()},error:function(g){b.hide()}})}})})},postCreate:function(){this.inherited(arguments);
var a=this;D(this.footerFormatANode,"change",function(b){h.set(a.footerFormatATableLblNode,"display",this.checked?"":"none")})},save:function(){var a=buildspace.dialog.indeterminateProgressBar({title:f.savingData+"..."}),b=dojo.formToObject(this.claimCertificatePrintSettingsForm.id);A.mixin(b,{pid:this.project.id});this.claimCertificatePrintSettingsForm.validate()&&a.show().then(function(){dojo.xhrPost({url:"postContract/claimCertificatePrintSettingsUpdate",content:b,handleAs:"json",load:function(d){dojo.query('[id^="error-claim_certificate_print_settings_"]').forEach(function(e){e.innerHTML=
""});if(!d.success)for(var c in d.errorMsg){var g=d.errorMsg[c];n.set(r.byId("error-claim_certificate_print_settings_"+c),g)}a.hide()},error:function(d){a.hide()}})})}}),la=q("buildspace.apps.PostContract.ClaimCertificateGrid",aa,{style:"border:none;",region:"center",keepSelection:!0,rowSelector:"0px",project:null,claimCertificateContainer:null,constructor:function(a){var b=new ba;this.structure={noscroll:!1,cells:[[{name:f.claimNumber,field:"version",width:"80px",styles:"text-align:center;"},{name:f.amountCertified,
field:"amount_certified",width:"200px",styles:"text-align:right;",formatter:b.unEditableCurrencyCellFormatter},{name:f.status,field:"status_txt",width:"150px",styles:"text-align:center;"},{name:f.paidAmount,field:"paid_amount",width:"200px",styles:"text-align:right;",formatter:function(d,c){c=this.grid.getItem(c);var g=G.parse(d);d="&nbsp;";c&&!isNaN(parseInt(String(c.id)))&&(d=isNaN(g)||null==g?"&nbsp;":'<a href="#" onclick="return false;">'+w.format(g)+"</a>");return d}},{name:f.approvalDate,field:"approval_date",
width:"200px",styles:"text-align:center;"},{name:f.created_at,field:"created_at",width:"200px",styles:"text-align:center;"},{name:f.currentPrintingRevision,field:"current_selected_revision",width:"auto",styles:"text-align:center;",formatter:function(d,c){c=this.grid.getItem(c);d="&nbsp;";c&&!isNaN(parseInt(String(c.id)))&&(d=c.current_selected_revision[0]?'<div style="margin:auto;" class="icon-16-container icon-16-checkmark2"></div>':'<a href="#" onclick="return false;">'+f.printThisRevision+"</a>");
return d}}]]};this.inherited(arguments)},canSort:function(a){return!1},postCreate:function(){this.inherited(arguments);this.on("RowClick",function(a){var b=this.getItem(a.rowIndex);a=a.cell?a.cell.field:null;"paid_amount"!=a||isNaN(parseInt(String(b.id)))?"current_selected_revision"!=a||isNaN(parseInt(String(b.id)))||b.current_selected_revision[0]||this.setSelectedRevision(b):(new ca({claimCertificate:b,claimCertificatesGrid:this})).show()})},dodblclick:function(a){this.onRowDblClick(a)},onRowDblClick:function(a){this.inherited(arguments);
var b=this.getItem(this.selection.selectedIndex),d=a.cell?a.cell.field:null;if(-1<this.selection.selectedIndex&&b&&!isNaN(parseInt(String(b.id)))&&"paid_amount"!=d&&"current_selected_revision"!=d){d=new dijit.ProgressBar({value:0,title:"Importing Claims",layoutAlign:"center"});var c=new dijit.Dialog({content:d,style:"background:#fff;padding:5px;height:78px;width:280px;",splitter:!1});c.closeButtonNode.style.display="none";c._onKey=function(g){g.keyCode==E.ESCAPE&&dojo.stopEvent(g)};c.onHide=function(){c.destroyRecursive()};
this.importClaimProgress(b,c,d)}},importClaimProgress:function(a,b,d){var c=this;dojo.xhrPost({url:"claimTransfer/getImportClaimProgress",content:{id:parseInt(String(this.project.id))},handleAs:"json",sync:!1,load:function(g){var e=parseInt(g.total_imported_files),k=parseInt(g.total_files),m=parseInt(g.version);if(g.exists&&0<k&&e!=k)b.open||b.show(),b.set({title:"Importing "+e+"/"+k+" Files for Claim Revision "+m}),d.set({value:e/k*100}),setTimeout(function(){c.importClaimProgress(a,b,d)},5E3);else return b.open&&
b.hide(),c.claimCertificateContainer.openClaimCertificateViewForm(a)},error:function(g){b.open&&b.hide()}})},setSelectedRevision:function(a){var b=buildspace.dialog.indeterminateProgressBar({title:f.savingData+". "+f.pleaseWait+"..."}),d={id:a.id,_csrf_token:a._csrf_token},c=this,g=this.store;b.show().then(function(){dojo.xhrPost({url:"postContract/claimCertificateSetSelectedRevision",content:d,handleAs:"json",load:function(e){if(e.success){c.claimCertificateContainer.workArea.projectBreakdown.claimCertificate=
null;var k=[],m=-1;dojo.forEach(e.items,function(l){g.fetchItemByIdentity({identity:l.id,onItem:function(t){g.setValue(t,"current_selected_revision",l.current_selected_revision)}});k.push(l.revision_id);1==l.current_selected_revision&&(m=l.revision_id)});e=null;Math.max.apply(null,k)!=m&&(e={post_contract_claim_revision_id:m});c.claimCertificateContainer.workArea.projectBreakdown.claimCertificate=e;g.save();c.claimCertificateContainer.workArea.projectBreakdown.grid.reload();c.claimCertificateContainer.closeBillTabs();
b.hide()}},error:function(e){b.hide()}})})},reload:function(){this.store.close();this._refresh()}}),ma=q("buildspace.apps.PostContract.ClaimCertificate.EditInvoiceInformationForm",[M,x,y,z,I,J,K,L],{templateString:Y,nls:f,claimCertificateInfo:null,region:"center",dialogWidget:null,style:"outline:none;padding:0px;margin:0px;border:none;",baseClass:"buildspace-form",startup:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});b.show().then(function(){dojo.xhrGet({url:"postContract/getInvoiceInformation",
handleAs:"json",content:{claimCertificateId:a.claimCertificateInfo.id},load:function(d){null==d.invoiceInformation?a.setPostMonth():(a.invoice_date.set("value",d.invoiceInformation.invoice_date),a.invoice_number.set("value",d.invoiceInformation.invoice_number),a.post_month.set("value",d.invoiceInformation.post_month));a.setFormValues({"claim_certificate_invoice[_csrf_token]":d._csrf_token,"claim_certificate_invoice[claimCertificateId]":a.claimCertificateInfo.id});b.hide()},error:function(d){console.log(d);
b.hide()}})});this.invoice_date.on("change",dojo.hitch(this,function(){this.setPostMonth()}))},setPostMonth:function(){var a=this.invoice_date.get("value");if(null!=a){var b=("0"+(a.getMonth()+1)).slice(-2);a=a.getFullYear()+""+b;this.post_month.set("value",a)}else this.post_month.set("value","")},save:function(){if(this.validate()){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),d=dojo.formToObject(this.id);b.show().then(function(){dojo.xhrPost({url:"postContract/updateInvoiceInformation",
handleAs:"json",content:d,load:function(c){c.success?(b.hide(),buildspace.dialog.alert("Success",f.invoiceInformationSaved,50,300),a.dialogWidget.hide()):b.hide()},error:function(c){console.log(c);b.hide()}})})}}}),na=q("buildspace.apps.PostContract.ClaimCertificate.ExportToExcelForm",[M,x,y,z,I,J,K,L],{templateString:'<form data-dojo-attach-point="containerNode"><table class="table-form"><tr><td class="label" style="width:80px;"><label style="display: inline;"></span>'+f.exportAs+' :</label></td><td><input type="text" name="filename" style="padding:2px;width:220px;" data-dojo-type="dijit/form/ValidationTextBox" data-dojo-props="trim:true, propercase:true, maxlength:45, required: true"> .xlsx</td></tr></table></form>',
project:null,claimCertificateObj:null,region:"center",dialogWidget:null,fileName:null,url:null,style:"outline:none;padding:0px;margin:0px;border:none;",baseClass:"buildspace-form",startup:function(){this.inherited(arguments);var a=new Date;this.setFormValues({filename:this.fileName+"_"+a.getDate()+(a.getMonth()+1)+a.getFullYear()})},submit:function(){var a=dojo.formToObject(this.id);this.validate()&&(a=a.filename.replace(/ /g,"_"),window.open(this.url+a,"_self"),this.dialogWidget&&this.dialogWidget.hide())}}),
oa=q("buildspace.apps.PostContract.ClaimCertificate.EditInvoiceInformationDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:f.invoiceInformation,claimCertificateInfo:null,buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){h.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},startup:function(){this.inherited(arguments)},_onKey:function(a){a.keyCode==
E.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:400px;height:120px;",gutters:!1}),b=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"}),d=ma({claimCertificateInfo:this.claimCertificateInfo,dialogWidget:this});b.addChild(new dijit.form.Button({label:f.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,
"hide")}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:f.save,iconClass:"icon-16-container icon-16-save",style:"outline:none!important;",onClick:dojo.hitch(d,"save")}));a.addChild(b);a.addChild(d);return a}}),pa=q("buildspace.apps.PostContract.ClaimCertificate.ExportExcelDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:f.exportToExcel,project:null,claimCertificateObj:null,fileName:null,url:null,buildRendering:function(){var a=this.createContent();a.startup();
this.content=a;this.inherited(arguments)},postCreate:function(){h.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==E.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:400px;height:80px;",gutters:!1}),b=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"}),
d=na({project:this.project,claimCertificateObj:this.claimCertificateObj,dialogWidget:this,fileName:this.fileName,url:this.url});b.addChild(new dijit.form.Button({label:f.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:f.export,iconClass:"icon-16-container icon-16-export",style:"outline:none!important;",onClick:dojo.hitch(d,"submit")}));a.addChild(b);a.addChild(d);
return a}});return q("buildspace.apps.PostContract.ClaimCertificateContainer",dijit.layout.BorderContainer,{style:"padding:0;width:100%;margin:0;border:none;height:100%;",gutters:!1,project:null,isApproval:!1,claimCertificate:!1,workArea:null,locked:!1,postCreate:function(){this.inherited(arguments);var a=this,b=this.project;dojo.subscribe("postContractClaimCertificate"+b.id+"-stackContainer-selectChild","",function(l){var t=dijit.byId("postContractClaimCertificate"+b.id+"-stackContainer");if(t){var u=
t.getChildren(),v=dojo.indexOf(u,dijit.byId(l));v+=1;if(u.length>v){for(;u.length>v;)t.removeChild(u[v]),u[v].destroyDescendants(),u[v].destroyRecursive(),v+=1;if(l.grid){var p=l.grid.selection.selectedIndex;l.grid.store.save();l.grid.store.close();var P=Q.after(l.grid,"_onFetchComplete",function(){P.remove();-1<p&&(this.scrollToRow(p),this.selection.setSelected(p,!0))});l.grid.sort()}}}});var d="postContract/getClaimCertificates/pid/"+b.id;this.claimCertificate&&(d+="/oid/"+this.claimCertificate.id);
this.grid=new la({title:f.claimCertificateList,claimCertificateContainer:this,project:b,store:new dojo.data.ItemFileWriteStore({url:d,handleAs:"json",clearOnClose:!0,urlPreventCache:!0})});if(!this.locked){var c=new dijit.Toolbar({region:"top",style:"outline:none!important;border-bottom:none;padding:2px;width:100%;"});c.addChild(new dijit.form.Button({id:b.id+"ActivateClaimCertificate-button",label:f.activateClaimCertificate,iconClass:"icon-16-container icon-16-certificate-2",onClick:dojo.hitch(this,
"validateOpeningNewClaimCert")}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({id:b.id+"ClaimCertificatePrintSettings-button",label:f.claimCertificatePrintSettings,iconClass:"icon-16-container icon-16-monitor",onClick:dojo.hitch(this,"openClaimCertificatePrintSettingsForm")}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({id:b.id+"ReloadClaimCertificateGrid-button",label:f.reload,iconClass:"icon-16-container icon-16-reload",onClick:function(l){a.grid.reload()}}))}(d=
dijit.byId("postContractClaimCertificate"+b.id+"-stackContainer"))&&dijit.byId("postContractClaimCertificate"+b.id+"-stackContainer").destroyRecursive();d=this.stackContainer=new dijit.layout.StackContainer({style:"border:0px;width:100%;height:100%;",region:"center",id:"postContractClaimCertificate"+b.id+"-stackContainer"});d.addChild(this.grid);var g=new dijit.layout.StackController({region:"top",containerId:"postContractClaimCertificate"+b.id+"-stackContainer"});g=new dijit.layout.ContentPane({style:"padding:0px;overflow:hidden;",
baseClass:"breadCrumbTrail",region:"top",content:g});var e=new dijit.layout.BorderContainer({region:"center",style:"padding:0;width:100%;margin:0;border:none;height:100%;",gutters:!1});e.addChild(d);e.addChild(g);c&&this.addChild(c);if(this.isApproval){a=this;var k=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),m={id:this.claimCertificate.id};k.show().then(function(){dojo.xhrGet({url:"postContract/claimCertificateInfo",handleAs:"json",content:m,load:function(l){l=new O({title:f.claimCertificatePrintInfo,
project:this.project,claimCertificate:this.claimCertificate,claimCertificateInfo:l.printInfo,region:"center",format:l.printInfo.claimCertificatePrintSettings.certificate_print_format,style:"width:100%;border:none;height:100%;overflow:auto;"});a.addChild(l);k.hide()},error:function(l){k.hide()}})})}else this.addChild(e)},validateOpeningNewClaimCert:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),d={pid:this.project.id};b.show().then(function(){dojo.xhrGet({url:"postContract/checkForPendingClaimCertificates",
handleAs:"json",content:d,load:function(c){c.hasPendingClaimCertificates&&!c.hasInProgressClaimCertificates?buildspace.dialog.confirm(f.confirmation,"<p>"+f.startNewClaimCertConfirmation+"</p><p>"+f.cannotBeUndoneWishToContinue+"</p>",120,380,function(){a.openClaimCertificateForm()}):a.openClaimCertificateForm();b.hide()},error:function(c){b.hide()}})})},openClaimCertificateForm:function(){var a=dijit.byId("postContractClaimCertificate"+this.project.id+"-stackContainer");if(a){var b=dijit.byId("claimCertificatePage-"+
this.project.id);b&&(a.removeChild(b),b.destroyRecursive());b=new dijit.layout.BorderContainer({title:f.claimCertificate,id:"claimCertificatePage-"+this.project.id,region:"center",style:"padding:0;width:100%;margin:0;border:none;height:100%;",gutters:!1});var d=new ia({claimCertificateContainer:this,region:"center",style:"width:100%;border:none;height:100%;overflow:auto;"}),c=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;width:100%;"});c.addChild(new dijit.form.Button({label:f.save,
id:"saveClaimCertificate-button",iconClass:"icon-16-container icon-16-save",onClick:dojo.hitch(d,"save")}));b.addChild(c);b.addChild(d);a.addChild(b);a.selectChild("claimCertificatePage-"+this.project.id)}},openClaimCertificatePrintSettingsForm:function(){var a=dijit.byId("postContractClaimCertificate"+this.project.id+"-stackContainer");if(a){var b=dijit.byId("claimCertificatePage-"+this.project.id);b&&(a.removeChild(b),b.destroyRecursive());b=new dijit.layout.BorderContainer({title:f.claimCertificatePrintSettings,
id:"claimCertificatePage-"+this.project.id,region:"center",style:"padding:0;width:100%;margin:0;border:none;height:100%;",gutters:!1});var d=new ka({project:this.project,region:"center",style:"width:100%;border:none;height:100%;overflow:auto;"}),c=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;width:100%;"});c.addChild(new dijit.form.Button({label:f.save,iconClass:"icon-16-container icon-16-save",onClick:dojo.hitch(d,"save")}));b.addChild(c);b.addChild(d);a.addChild(b);
a.selectChild("claimCertificatePage-"+this.project.id)}},openClaimCertificateViewForm:function(a){var b=this,d=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),c={id:a.id};d.show().then(function(){dojo.xhrGet({url:"postContract/claimCertificateInfo",handleAs:"json",content:c,load:function(g){var e=dijit.byId("postContractClaimCertificate"+b.project.id+"-stackContainer");if(e){var k=dijit.byId("claimCertificatePage-"+b.project.id);k&&(e.removeChild(k),k.destroyRecursive());k=
Array.isArray(a.status)?a.status[0]:a.status;switch(k){case buildspace.constants.CLAIM_CERTIFICATE_STATUS_APPROVED:var m="#69FA72";break;case buildspace.constants.CLAIM_CERTIFICATE_STATUS_REJECTED:m="#cc1313";break;default:m="#F7D76D"}m=new dijit.layout.TabContainer({title:f.claimCertificate+" :: "+a.version+" ( <span style='color:"+m+"!important;'>"+a.status_txt+"</span> )",id:"claimCertificatePage-"+b.project.id,region:"center",style:"padding:0;width:100%;margin:0;border:none;height:100%;",gutters:!1});
var l=new dijit.layout.BorderContainer({title:f.claimCertificateInfo,style:"padding:0px;width:400px;height:80px;",gutters:!1}),t=new dijit.layout.BorderContainer({title:f.claimCertificatePrintInfo,style:"padding:0px;width:400px;height:80px;",gutters:!1}),u=new ja({project:b.project,claimCertificateInfo:g.certInfo,claimCertificate:a,claimCertificateContainer:b,isTopManagementVerifierEditable:g.isTopManagementVerifierEditable,region:"center",style:"width:100%;border:none;height:100%;overflow:auto;"}),
v=new O({title:f.claimCertificatePrintInfo,project:this.project,claimCertificateInfo:g.printInfo,claimCertificate:a,claimCertificateContainer:this,region:"center",format:g.printInfo.claimCertificatePrintSettings.certificate_print_format,style:"width:100%;border:none;height:100%;overflow:auto;"}),p=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;width:100%;"});parseInt(k)!=buildspace.constants.CLAIM_CERTIFICATE_STATUS_IN_PROGRESS||b.locked||(p.addChild(new dijit.form.Button({label:f.submit,
iconClass:"icon-16-container icon-16-save",disabled:!g.certInfo.can_submit,onClick:dojo.hitch(u,"submitForApproval")})),p.addChild(new dijit.ToolbarSeparator),p.addChild(new dijit.form.Button({label:f.edit,iconClass:"icon-16-container icon-16-edit",onClick:dojo.hitch(b,"openClaimCertificateForm")})),p.addChild(new dijit.ToolbarSeparator));p.addChild(new dijit.form.Button({label:f.invoiceInformation,iconClass:"icon-16-container icon-16-list",onClick:dojo.hitch(b,"editInvoiceInformation",g.certInfo)}));
p.addChild(new dijit.form.Button({label:f.exportToExcel,iconClass:"icon-16-container icon-16-spreadsheet",onClick:dojo.hitch(b,"exportToExcel",a)}));p.addChild(new dijit.ToolbarSeparator);p.addChild(new dijit.form.Button({label:f.exportClaims,iconClass:"icon-16-container icon-16-export",onClick:function(){ea({project:b.project,claimCertificateObj:a}).show()}}));p.addChild(new dijit.ToolbarSeparator);p.addChild(new dijit.form.Button({id:"claimCertificatePage-"+b.project.id+"-importClaimsButton",label:f.importClaims,
iconClass:"icon-16-container icon-16-import",disabled:!g.importedClaim.can_submit,onClick:function(P){(new fa({importUrl:"claimTransfer/importClaims/revision_id/"+a.claim_revision_id,title:f.importClaims,rootProject:b.project})).show()}}));k=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;width:100%;"});k.addChild(new dijit.form.Button({label:f.print,iconClass:"icon-16-container icon-16-print",onClick:dojo.hitch(b,"printToPDF",a)}));l.addChild(p);l.addChild(u);t.addChild(k);
t.addChild(v);m.addChild(l);m.addChild(t);g.showAccountCodeSettings&&m.addChild(new ha({title:f.accountCodeSettings,id:String(b.project.id)+"-AccountCodeSettings",project:b.project,claimCertificate:a}));m.addChild(new da({id:String(a.id)+"-ClainCertificateNote",claimCertificate:a}));e.addChild(m);e.selectChild("claimCertificatePage-"+b.project.id)}d.hide()},error:function(g){d.hide()}})})},editInvoiceInformation:function(a){oa({claimCertificateInfo:a}).show()},exportToExcel:function(a){pa({project:this.project,
claimCertificateObj:a,fileName:"Claim_Certificate",url:"ClaimCertificateXls/"+this.project.id+"/"+this.project._csrf_token+"/"+a.id+"/"}).show()},printToPDF:function(a){window.open("ClaimCertificatePDF/"+this.project.id+"/"+a.id,"_blank");return window.focus()},removeStackContainerChildren:function(){var a=dijit.byId("postContractClaimCertificate"+this.project.id+"-stackContainer");if(a){var b=dijit.byId("claimCertificatePage-"+this.project.id);b&&(a.removeChild(b),b.destroyRecursive())}},closeBillTabs:function(){return A.hitch(this.workArea,
"removeBillTab")()}})});
