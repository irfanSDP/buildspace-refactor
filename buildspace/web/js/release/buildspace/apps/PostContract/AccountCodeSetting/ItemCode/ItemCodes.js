define("buildspace/apps/PostContract/AccountCodeSetting/ItemCode/ItemCodes","dojo/_base/declare dojo/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../../templates/itemCodeSettingsBreakdownColumHeaderCell.html dojo/text!../../templates/itemCodeSettingsBreakdownForm.html dojo/text!../../templates/itemCodeSettingsBreakdownRowContainer.html dojo/text!../../templates/itemCodeSettingsBreakdownInputCell.html dojo/text!../../templates/itemCodeSettingsBreakdownCell.html dojo/i18n!buildspace/nls/ItemCodeSettings".split(" "),
function(f,l,g,h,k,n,p,q,r,t,b){var w=f("buildspace.apps.PostContract.AccountCodeSetting.ItemCode.ItemCodesettingsBreakdownForm",[g,h,k],{templateString:p,baseClass:"buildspace-form",nls:b,project:null,claimCertificate:null,data:null,constructor:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.renderItemCodeSettingBreakdownColumHeaderCells();this.renderItemCodeSettingBreakdownRows()},startup:function(){this.inherited(arguments);this.itemCodeSettingObjectIdsHiddenInput.set("value",
this.data.objectIds.join(","));this.itemCodeSettingIdsHiddenInput.set("value",this.data.itemCodeSettingIds.join(","))},renderItemCodeSettingBreakdownColumHeaderCells:function(){for(var a=0;a<this.data.itemCodeSettings.length;a++)(new u({header:this.data.itemCodeSettings[a].description})).placeAt(this.itemCodeSettingBreakdownColumnHeader)},renderItemCodeSettingBreakdownRows:function(){for(var a=0;a<this.data.itemCodeSettingObjects.length;a++)(new v({objectId:this.data.itemCodeSettingObjects[a].object_id,
rowData:this.data.itemCodeSettingObjects[a]})).placeAt(this.itemCodeSettingsBreakdownBody)},save:function(){var a=this;if(this.itemCodeSettingBreakdownForm.validate()){l.set(a.item_code_settings_error.id,"");var d=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."}),c=dojo.formToObject(a.itemCodeSettingBreakdownForm.id);d.show().then(function(){dojo.xhrPost({url:"AccountCodeSetting/saveItemCodeSettingsBreakdown",handleAs:"json",content:c,load:function(e){e.success?(d.hide(),buildspace.dialog.alert("Success",
b.itemCodeSettingSaved,50,300)):(d.hide(),l.set(a.item_code_settings_error.id,e.errors.global_errors[0]))},error:function(e){console.log(e);d.hide()}})})}}}),u=f("buildspace.apps.PostContract.AccountCodeSettings.ItemCode.ItemCodeSettingsBreakdownColumnHeaderCell",[g,h,k],{templateString:n,baseClass:"buildspace-form",nls:b,header:null}),v=f("buildspace.apps.PostContract.AccountCodeSettings.ItemCode.ItemCodeSettingsBreakdownRowContainer",[g,h,k],{templateString:q,baseClass:"buildspace-form",nls:b,prefix:null,
objectId:null,rowData:null,formHeader:null,constructor:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);(new m({name:"",value:this.rowData.description,textAlign:"left"})).placeAt(this.itemCodeSettingsBreakdownRowContainer);(new m({name:"",value:this.rowData.currentClaim,textAlign:"right"})).placeAt(this.itemCodeSettingsBreakdownRowContainer);for(var a=0;a<this.rowData.breakdowns.length;a++)(new x({name:"item_code_setting_object[item_code_setting_object_id_"+this.rowData.object_id+
"_item_code_setting_id_"+this.rowData.breakdowns[a].item_code_setting_id+"]",value:this.rowData.breakdowns[a].amount,textAlign:"right"})).placeAt(this.itemCodeSettingsBreakdownRowContainer)},startup:function(){this.inherited(arguments);this.currentClaimHiddenInput.set("value",this.rowData.currentClaim);this.objectTypeIdHiddenInput.set("value",this.rowData.objectType)}}),x=f("buildspace.apps.PostContract.AccountCodeSettings.ItemCode.ItemCodeSettingsBreakdownInputCell",[g,h,k],{templateString:r,baseClass:"buildspace-form",
nls:b,name:null,value:null,textAlign:null,constructor:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.breakdownCell.set("value",this.value)}}),m=f("buildspace.apps.PostContract.AccountCodeSettings.ItemCode.ItemCodeSettingsBreakdownCell",[g,h,k],{templateString:t,baseClass:"buildspace-form",nls:b,name:null,value:null,textAlign:null,constructor:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments)}});return f("buildspace.apps.PostContract.AccountCodeSetting.ItemCode.ItemCodes",
dijit.layout.BorderContainer,{region:"center",style:"padding:0;margin:0;width:100%;height:100%;",gutters:!1,project:null,claimCertificate:null,postCreate:function(){this.inherited(arguments);var a=this,d=buildspace.dialog.indeterminateProgressBar({title:b.loading+". "+b.pleaseWait+"..."});d.show().then(function(){dojo.xhrGet({url:"AccountCodeSetting/getItemCodeSettingBreakdowns",content:{projectStructureId:a.project.id,claimCertificateId:a.claimCertificate.id},handleAs:"json",load:function(c){if(c.success){c=
new w({region:"center",id:"item-code-settingsForm-"+a.project.id,style:"padding:0;width:100%;margin:5px;border:none;height:100%;",gutters:!1,project:a.project,claimCertificate:a.claimCertificate,data:c.data});var e=new dijit.Toolbar({id:"itemCodeSettingsToolbar",region:"top",style:"outline:none!important;padding:2px;width:100%;"});e.addChild(new dijit.form.Button({label:b.save,iconClass:"icon-16-container icon-16-save",onClick:dojo.hitch(c,"save")}));a.addChild(e);a.addChild(c)}d.hide()},error:function(c){console.log(c);
d.hide()}})})}})});
