define("buildspace/apps/PostContract/BillManager/editBillNoteDialog","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/editBillNoteForm.html dijit/form/SimpleTextarea dojo/i18n!buildspace/nls/EditBillNote".split(" "),function(e,t,u,v,w,x,f,g,h,k,l,m,n,p,c){var r=e("buildspace.apps.PostContract.BillManager.EditBillNoteForm",
[h,k,l,m],{templateString:n,baseClass:"buildspace-form",region:"center",dialogObj:null,billId:-1,noteItemId:-1,billGrid:null,updateUrl:null,note:null,nls:c,style:"padding:5px;overflow:auto;",postCreate:function(){this.inherited(arguments);(new p({name:"item_note",trim:!0,rows:"10",value:this.note})).placeAt(this.noteInputDivNode)},startup:function(){this.inherited(arguments)},close:function(){},save:function(){var a=this,d=buildspace.dialog.indeterminateProgressBar({title:c.savingData+". "+c.pleaseWait+
"..."}),b=dojo.formToObject(this.editItemNoteForm.id),q={url:a.updateUrl,content:b,handleAs:"json",load:function(b){b.success&&a.updateBillGridStore(b.item);d.hide()},error:function(a){d.hide();console.log(a)}};this.dialogObj.hide();d.show().then(function(){dojo.xhrPost(q)})},updateBillGridStore:function(a){var d=this.billGrid.store;d.fetchItemByIdentity({identity:a.id,onItem:function(b){for(var c in a)b.hasOwnProperty(c)&&c!=d._getIdentifierAttribute()&&(d.setValue(b,c,a[c]),d.save())}})},onCancel:function(){}});
return e("buildspace.apps.PostContract.BillManager.EditBillNoteDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:c.appName,billId:0,billGrid:null,updateUrl:null,item:null,buildRendering:function(){var a=this.createForm();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){g.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==f.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},
createForm:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:400px;height:230px;",gutters:!1}),d=new r({dialogObj:this,billId:this.billId,billGrid:this.billGrid,updateUrl:this.updateUrl,noteItemId:this.item.id,note:this.item.note?this.item.note[0]:""}),b=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});b.addChild(new dijit.form.Button({label:c.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,
"hide")}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:c.save,iconClass:"icon-16-container icon-16-save",style:"outline:none!important;",onClick:dojo.hitch(d,"save")}));a.addChild(b);a.addChild(d);return a}})});
