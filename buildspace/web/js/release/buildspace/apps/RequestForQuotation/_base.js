(function(){define("dojo/_base/declare dojo/data/ItemFileWriteStore dojo/request dijit/layout/TabContainer dijit/layout/ContentPane dijit/layout/BorderContainer dijit/layout/StackController dijit/layout/StackContainer dijit/Toolbar dijit/form/Button ./grid ./WorkArea ./RequestForQuotationDialog buildspace/widget/grid/cells/Formatter dojo/i18n!../../nls/RequestForQuotation buildspace/widget/grid/Filter".split(" "),function(g,t,h,u,v,k,w,x,l,f,m,n,p,q,c,r){return g("buildspace.apps.RequestForQuotation",
buildspace.apps._App,{init:function(a){var b=this;b.win=new buildspace.widget.Window({title:c.appName,height:"300px",width:"450px",showMaximize:!1,iconClass:this.iconClass,onClose:dojo.hitch(this,"kill")});a=new dojo.data.ItemFileWriteStore({url:"requestForQuotation/getRFQListing",clearOnClose:!0,urlPreventCache:!0});var d=this.requestForQuotationGrid=new m({requestForQuotationGridContainer:b,structure:b.getGridLayout(),store:a,onRowDblClick:function(a){a=this.getItem(a.rowIndex);if(!(0<a.id[0]))return!1;
b.kill();b.win=new buildspace.widget.Window({title:buildspace.truncateString("Request For Quotation (RFQ No : "+a.rfq_no[0]+") ("+a.type[0]+")",150),onClose:dojo.hitch(b,"kill")});a=new n({rfq:a});b.win.addChild(a);b.win.show();return b.win.startup()}});var e=new l({region:"top",style:"outline:none!important;padding:2px;border:none;width:100%;"});e.addChild(new f({label:c.add,iconClass:"icon-16-container icon-16-add",onClick:function(){return dojo.hitch(b,"requestForQuotationDialogForm",-1)()}}));
e.addChild(new dijit.ToolbarSeparator);e.addChild(new f({id:"deleteCompanyFromRequestForQuotation",label:c["delete"],iconClass:"icon-16-container icon-16-delete",disabled:!0,onClick:function(){return d.deleteRow(d.selection.selectedIndex)}}));a=this.mainContainer=new k({style:"padding:0px;width:100%;height:100%;",gutters:!1});a.addChild(new r({region:"top",grid:d,editableGrid:!1,filterFields:["rfq_no","project","status"]}));a.addChild(e);a.addChild(d);b.win.addChild(a);b.win.show();return b.win.startup()},
requestForQuotationDialogForm:function(a){var b=this;var d=new buildspace.dialog.indeterminateProgressBar({title:c.processing+"..."});d.show();return h.get("requestForQuotation/getRequestForQuotationInformation",{query:{rfqId:a},handleAs:"json"}).then(function(e){d.hide();return(new p({title:c.addNewRFQ,rfqId:a,data:e,requestForQuotationGrid:b.requestForQuotationGrid})).show()},function(a){return d.hide()})},getGridLayout:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",
formatter:(new q).rowCountCellFormatter},{name:c.rfqNo,field:"rfq_no",width:"120px",styles:"text-align: center;"},{name:c.project,field:"project",width:"auto"},{name:c.type,field:"type",width:"120px",styles:"text-align: center;",formatter:function(a,b,c){return a?a:null}},{name:c.numberOfSupplier,field:"number_of_supplier",width:"140px",styles:"text-align: center;"},{name:c.status,field:"status",width:"120px",styles:"text-align: center;"},{name:c.issued_by,field:"issued_by",width:"140px",styles:"text-align: center;"},
{name:c.date_issued,field:"date_issued",width:"140px",styles:"text-align: center;"}]},kill:function(){this.win&&"undefined"!=typeof this.win&&this.win.close()}})})}).call(this);
