(function(){var l={}.hasOwnProperty;define("buildspace/apps/RequestForQuotation/SupplierList/SupplierSelectionGridDialog","dojo/_base/declare dojo/aspect dojo/_base/lang dojo/_base/connect dojo/request dojo/html dojo/dom dojo/keys dojo/dom-style buildspace/widget/grid/cells/Formatter dojox/grid/enhanced/plugins/IndirectSelection buildspace/widget/grid/Filter dojo/i18n!../../../nls/RequestForQuotation dojo/i18n!../../../nls/CompanyDirectories".split(" "),function(h,t,u,v,m,w,x,n,p,q,y,r,g,c){var k;
k=h("buildspace.apps.RequestForQuotation.SupplierList.SupplierSelectionGrid",dojox.grid.EnhancedGrid,{style:"padding:0;margin:0;border:none;",region:"center",rfqId:-1,selectionMode:"multiple",dialogContainer:null,companyIds:[],_csrf_token:null,plugins:{indirectSelection:{headerSelector:!0,width:"20px",styles:"text-align:center;"}},canSort:function(){return!1},postCreate:function(){this.inherited(arguments);var a=this;this.connect(this.selection,"onDeselected",function(b){b=a.selection.getSelected();
return a.gridAction(b)});return this.connect(this.selection,"onSelected",function(b){b=a.selection.getSelected();return a.gridAction(b)})},gridAction:function(a){var b,d,c,f;b=a.length;this.disableToolbarButtons(!0);this.companyIds=[];if(0<b){f=[];for(c in a)l.call(a,c)&&(b=a[c],d=b.id[0],0<d?(this.companyIds.push(b.id[0]),f.push(this.disableToolbarButtons(!1))):f.push(void 0));return f}},select:function(){var a=this;a.selection.getSelected();var b=buildspace.dialog.indeterminateProgressBar({title:g.pleaseWait+
"..."});b.show();return m.post("requestForQuotation/saveCurrentSelectedSupplierInfo",{data:{rfqId:a.rfqId,"companyIds[]":a.companyIds,_csrf_token:a._csrf_token},handleAs:"json"}).then(function(c){b.hide();a.dialogContainer.supplierListContainer.grid.refreshGrid();return a.dialogContainer.hide()},function(a){return b.hide()})},disableToolbarButtons:function(a,b){return dijit.byId("selectSupplierButtonForRFQ").set("disabled",a)}});return h("buildspace.apps.RequestForQuotation.SupplierList.SupplierSelectionDialog",
dijit.Dialog,{style:"padding:0px;margin:0px;",rfqId:null,data:null,supplierListContainer:null,buildRendering:function(){var a=this.createContent();a.startup();this.content=a;return this.inherited(arguments)},postCreate:function(){p.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},_onKey:function(a){if(a.keyCode===n.ESCAPE)return dojo.stopEvent(a)},onHide:function(){return this.destroyRecursive()},createContent:function(){var a,
b,d,e;d=this;b=this.grid=new k({rfqId:d.rfqId,store:dojo.data.ItemFileWriteStore({data:d.data.data}),_csrf_token:d.data._csrf_token,structure:d.getGridLayout(),dialogContainer:d});e=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:0px;border:none;width:100%;"});e.addChild(new dijit.form.Button({id:"selectSupplierButtonForRFQ",disabled:!0,label:g.select,iconClass:"icon-16-container icon-16-checkmark2",onClick:function(){return b.select()}}));e.addChild(new dijit.ToolbarSeparator);
e.addChild(new dijit.form.Button({label:g.close,iconClass:"icon-16-container icon-16-close",onClick:function(){return d.hide()}}));a=new dijit.layout.BorderContainer({style:"padding:0px;width:850px;height:450px;",gutters:!1,region:"top"});a.addChild(new r({region:"top",editableGrid:!1,grid:b,filterFields:[{company_name:c.companyName,registration_no:c.registrationNo,business_type:c.businessType,country:c.country,state:c.state}]}));a.addChild(e);a.addChild(b);return a},getGridLayout:function(){return[{name:"No",
field:"id",width:"30px",styles:"text-align: center;",formatter:(new q).rowCountCellFormatter},{name:c.companyName,field:"company_name",width:"auto"},{name:c.registrationNo,field:"registration_no",width:"120px",styles:"text-align: center;"},{name:c.businessType,field:"business_type",width:"120px",styles:"text-align: center;"},{name:c.country,field:"country",width:"120px",styles:"text-align: center;"},{name:c.state,field:"state",width:"120px",styles:"text-align: center;"}]}})})}).call(this);
