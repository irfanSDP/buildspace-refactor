(function(){define("buildspace/apps/RequestForQuotation/SupplierList/SupplierExcelExport","dojo/_base/declare dojo/_base/lang dojo/keys dojo/parser dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Toolbar dijit/form/Button dijit/layout/BorderContainer dijit/form/ValidationTextBox dijit/form/SimpleTextarea dijit/registry dojo/dom-style dojo/dom-form dojo/request dojo/request/iframe dojox/validate/web dijit/form/Select dijit/form/FilteringSelect dojo/store/Memory dojox/form/Manager dojo/text!./templates/supplierExcelExportForm.html dojo/i18n!../../../nls/RequestForQuotation".split(" "),
function(h,m,n,z,p,q,r,t,u,v,w,A,B,C,k,D,x,E,F,G,H,I,J,y,e){var l;l=h("buildspace.apps.RequestForQuotation.SupplierList.SupplierExcelExportForm",[p,q,r,t],{baseClass:"buildspace-form",rfqId:-1,rfqSupplierId:-1,rfqSupplierName:null,templateString:y,region:"center",style:"overflow: auto;",formInfo:null,nls:e,dialogContainer:null,"export":function(){var a,d,b;b=this;if(!this.rfqExportForm.validate())return!1;a=dojo.formToObject(this.rfqExportForm.id);d=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+
"..."});m.mixin(a,{rfqId:b.rfqId,rfqSupplierId:b.rfqSupplierId,_csrf_token:this.formInfo._csrf_token});d.show();return x.post("requestForQuotationExportFile/exportExcel",{data:a,handleAs:"json"}).then(function(a){var c,f,g;d.hide();if(a.success)return b.downloadExportedRFQItemFile(a.fileUrl),b.dialogContainer.hide();buildspace.dialog.alert(e.error,"<div>"+a.errorMsg+"</div>",80,280);g=[];for(f in a.errorMsgs)"username"!==f?(c=b["error-"+f],c.innerHTML=a.errorMsgs[f],g.push(k.set(c,"display","block"))):
g.push(void 0);return g},function(a){return d.hide()})},downloadExportedRFQItemFile:function(a){return dojo.create("iframe",{src:a,style:"display: none"},dojo.doc.body)}});return h("buildspace.apps.RequestForQuotation.SupplierList.ExportDialog",dijit.Dialog,{title:e.exportRFQItemExcel,style:"padding:0px;margin:0px;width:480px;height:160px;",rfqId:-1,rfqSupplierId:-1,rfqSupplierName:null,formInfo:null,buildRendering:function(){var a;this.content=a=this.createContent();a.startup();return this.inherited(arguments)},
postCreate:function(){k.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},createContent:function(){var a,d,b,c;b=this;a=new w({style:"width:480px;height:160px;padding:0;margin:0;",gutters:!1});d=new l({rfqId:this.rfqId,rfqSupplierId:this.rfqSupplierId,rfqSupplierName:this.rfqSupplierName,formInfo:this.formInfo,dialogContainer:b});c=new u({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});c.addChild(new v({label:e.exportRFQItemExcel,
iconClass:"icon-16-container icon-16-export",onClick:function(){return d["export"]()}}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",onClick:function(){return b.hide()}}));a.addChild(c);a.addChild(d);return a},_onKey:function(a){if(a.keyCode===n.ESCAPE)return dojo.stopEvent(a)},onHide:function(){return this.destroyRecursive()}})})}).call(this);
