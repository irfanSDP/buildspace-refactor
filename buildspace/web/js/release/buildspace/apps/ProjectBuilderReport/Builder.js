define("buildspace/apps/ProjectBuilderReport/Builder","../../../dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/keys dojo/on ./WorkArea dojo/i18n!buildspace/nls/ProjectBuilder".split(" "),function(f,l,m,n,p,q,g,h){var k=f("buildspace.apps.ProjectBuilderReport.Explorer",dijit.EditableTree,{splitter:!0,region:"left",container:null,openOnClick:!1,labelAttr:"name",rootProject:{},autoExpand:!0,billElementObj:null,style:"background-color:#e5e5e5;width:230px;height:100%;",constructor:function(a){this.inherited(arguments);
var b=new dojo.data.ItemFileWriteStore({url:"projectBuilder/getProjectStructure/id/"+a.rootProject.id}),c=new dijit.tree.ForestStoreModel({store:b,rootId:a.rootProject.id,rootLabel:buildspace.truncateString(a.rootProject.title,200),childrenAttrs:["__children"]});this.getIconClass=dojo.hitch(b,function(a,c){return a.root||a.type==buildspace.apps.ProjectBuilderReport.ProjectStructureConstants.TYPE_LEVEL?c?"icon-16-container icon-16-file":"icon-16-container icon-16-folder":a.type==buildspace.apps.ProjectBuilderReport.ProjectStructureConstants.TYPE_BILL?
"icon-16-container icon-16-list":a.type==buildspace.apps.ProjectBuilderReport.ProjectStructureConstants.TYPE_SUPPLY_OF_MATERIAL_BILL?"icon-16-container icon-16-spreadsheet":"icon-16-container icon-16-document"});this.model=c},createBill:function(a,b){var c=buildspace.dialog.indeterminateProgressBar({title:h.pleaseWait+"..."}),e=this,d={url:"projectBuilder/createBill",content:{parent_id:a.id,type:b,_csrf_token:a._csrf_token},handleAs:"json",load:function(b){if(b.success){var d=e.model;a.root?d.newItem(b.item):
d.newItem(b.item,a);dijit.byId("main-project_breakdown").grid.reload()}c.hide()},error:function(a){c.hide()}};c.show();dojo.xhrPost(d)},removeBillTab:function(){this.container.workarea.removeBillTab()},initTab:function(a,b){var c=!1,e=this.container.workarea.getChildren(),d;for(d in e)"object"==typeof e[d].pane_info&&e[d].pane_info.id==a.id+"-form_"+a.type&&(c=!0,this.container.workarea.selectChild(e[d]));c||this.container.workarea.makeTab(a,b,!0)}});return f("buildspace.apps.ProjectBuilderReport.Builder",
dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",gutters:!1,project:null,workarea:null,postCreate:function(){this.inherited(arguments);var a=this.explorer=k({rootProject:this.project,container:this}),a=this.workarea=new g({rootProject:this.project,explorer:a});a.startup();this.addChild(a)}})});
