define("buildspace/apps/ProjectBuilderReport/BillManager","dojo/_base/declare dojo/dom-style dojo/request dojo/when dojo/currency dojo/json dijit/layout/AccordionContainer dijit/layout/ContentPane dojox/grid/EnhancedGrid dojo/store/Memory ./BillManager/BillPropertiesForm ./BillManager/BillGrid ./BillManager/buildUpGrid ./BillManager/buildUpQuantityGrid ./BillManager/buildUpRateSummary ./BillManager/buildUpQuantitySummary ./BillManager/itemHtmlEditorDialog ./BillManager/primeCostRateDialog ./BillManager/lumpSumPercentDialog ./BillManager/AddResourceCategoryDialog buildspace/apps/ProjectBuilder/BillManager/ScheduleOfQuantityGrid buildspace/widget/grid/cells/Formatter dojo/aspect dojo/i18n!buildspace/nls/ProjectBuilder".split(" "),
function(v,Q,w,x,C,y,R,z,S,l,D,A,E,F,G,H,I,J,K,L,M,B,T,b){var N=v("buildspace.apps.ProjectBuilderReport.BillPropertiesContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;margin:0px;border:0px;height:100%;",gutters:!1,billId:null,billType:null,explorer:null,postCreate:function(){this.inherited(arguments);if(this.billType==buildspace.constants.BILL_TYPE_PRELIMINARY||this.billType==buildspace.constants.BILL_TYPE_PRIMECOST)var a=!0;a=this.billPropertiesForm=D({billId:this.billId,explorer:this.explorer,
locked:a?a:!1});this.addChild(a)}}),P=v("buildspace.apps.ProjectBuilderReport.BillElementContainer",dijit.layout.BorderContainer,{style:"padding:0px;border:0px;width:100%;height:100%;",gutters:!1,billId:null,rootProject:null,bqVersion:0,columnData:null,explorer:null,selectedElementStore:[],selectedItemStore:[],elementItemStore:[],currentBillLockedStatus:!1,postCreate:function(){this.inherited(arguments);var a=this;a.createElementGrid();dojo.subscribe("projectBuilderReportBillGrid"+a.billId+"-stackContainer-selectChild",
"",function(b){var d=dijit.byId("projectBuilderReportBillGrid"+a.billId+"-stackContainer");if(d){var e=d.getChildren();b=dojo.indexOf(e,b);b+=1;if(e.length>b)for(;e.length>b;){d.removeChild(e[b]);e[b].destroyDescendants();e[b].destroyRecursive();b+=1;var g=dijit.byId("add_resource_category_"+a.billId+"-btn");g&&g.destroy()}}})},createElementGrid:function(){this.selectedElementStore=new l({idProperty:"id"});this.selectedItemStore=new l({idProperty:"id"});this.elementItemStore=[];var a=dijit.byId("projectBuilderReportBillGrid"+
this.billId+"-stackContainer");a&&dijit.byId("projectBuilderReportBillGrid"+this.billId+"-stackContainer").destroyRecursive();var a=this.stackContainer=new dijit.layout.StackContainer({style:"border:0px;width:100%;height:100%;",region:"center",id:"projectBuilderReportBillGrid"+this.billId+"-stackContainer"}),g=dojo.data.ItemFileWriteStore({url:"billManager/getElementList/id/"+this.billId,clearOnClose:!0,urlPreventCache:!0}),d=this;dojo.xhrGet({url:"billManager/getBillInfo",handleAs:"json",content:{id:this.billId}}).then(function(e){try{d.currentBillLockedStatus=
!0;var m=new A({stackContainerTitle:"Element",billId:d.billId,pageId:"element-page-"+d.billId,id:"element-page-container-"+d.billId,gridOpts:{gridContainer:d,store:g,typeColumns:e.column_settings,markupSettings:e.markup_settings,bqCSRFToken:e.bqCSRFToken,currentBillLockedStatus:d.currentBillLockedStatus,currentGridType:"element",onRowDblClick:function(a){a=this.getItem(a.rowIndex);0<a.id[0]&&null!==a.description[0]&&""!==a.description[0]&&d.createItemGrid(a,e,m)},singleCheckBoxSelection:function(a){var b=
a.rowIndex;a=this.selection.selected[b];b=this.getItem(b);this.removedIds=[];if(a)return this.gridContainer.selectedElementStore.put({id:b.id[0]}),this.getAffectedItemsByElement(b,"add");this.gridContainer.selectedElementStore.remove(b.id[0]);this.removedIds.push(b.id[0]);return this.getAffectedItemsByElement(b,"remove")},toggleAllSelection:function(a){var b=this,d=this.selection;b.removedIds=[];if(a)return d.selectRange(0,b.rowCount-1),b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,
c){0<a.id&&b.gridContainer.selectedElementStore.put({id:a.id[0]})})}}),b.getAffectedItemsByElement(null,"add");d.deselectAll();b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,c){0<a.id&&(b.gridContainer.selectedElementStore.remove(a.id[0]),b.removedIds.push(a.id[0]))})}});return b.getAffectedItemsByElement(null,"remove")},getAffectedItemsByElement:function(a,d){var e=this,r=[],n=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});n.show();if("add"===d)a?r.push(a.id[0]):
e.gridContainer.selectedElementStore.query().forEach(function(a){r.push(a.id)});else for(var c in e.removedIds)r.push(e.removedIds[c]);w.post("projectBuilderReport/getAffectedItemsByElements",{handleAs:"json",data:{bill_id:e.billId,element_ids:y.stringify(e.gridContainer.arrayUnique(r))}}).then(function(a){for(var b in a)e.gridContainer.elementItemStore[b]||(e.gridContainer.elementItemStore[b]=new l({idProperty:"id"}));if("add"===d)for(b in a)for(var c in a[b])e.gridContainer.elementItemStore[b].put({id:a[b][c]}),
e.gridContainer.selectedItemStore.put({id:a[b][c]});else for(b in a)for(c in e.gridContainer.selectedElementStore.remove(b),a[b])e.gridContainer.elementItemStore[b].remove(a[b][c]),e.gridContainer.selectedItemStore.remove(a[b][c]);n.hide()},function(a){n.hide();console.log(a)})}}}),p=new dijit.layout.StackController({region:"top",containerId:"projectBuilderReportBillGrid"+d.billId+"-stackContainer"}),q=new dijit.layout.ContentPane({style:"padding:0px;overflow:hidden;",baseClass:"breadCrumbTrail",
region:"top",id:"projectBuilderReportBillGrid"+d.billId+"-controllerPane",content:p});d.addChild(a);d.addChild(q)}catch(f){console.debug(f)}})},createItemGrid:function(a,g,d){var e=this,m={options:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL_TEXT,
buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID_TEXT],values:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N,
buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER,buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT,
buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE,buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID]},p={options:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_TEXT],values:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N,buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER]},q=new dojo.data.ItemFileWriteStore({url:"billManager/getItemList/id/"+a.id+"/bill_id/"+e.billId,clearOnClose:!0}),f=dojo.xhrGet({url:"billManager/getUnits/billId/"+
e.billId,handleAs:"json"}),h=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});h.show();return x(f,function(f){h.hide();try{new A({stackContainerTitle:a.description,billId:e.billId,id:"item-page-container-"+e.billId,elementId:a.id,pageId:"item-page-"+e.billId,type:"tree",gridOpts:{gridContainer:e,store:q,escapeHTMLInData:!1,typeColumns:g.column_settings,markupSettings:g.markup_settings,elementGridStore:d,hierarchyTypes:m,hierarchyTypesForHead:p,unitOfMeasurements:f,currentBillLockedStatus:e.currentBillLockedStatus,
currentGridType:"item",onRowDblClick:function(a){var n=a.cell.field,c=this.getItem(a.rowIndex),k=this.store;if(c&&void 0!==c.project_revision_deleted_at&&c.project_revision_deleted_at[0])return!1;if("rate-value"==n&&0<c.id)c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY||
c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE?e.createBuildUpRateContainer(c,k):c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE?(new J({itemObj:c,billGridStore:k,elementGridStore:d,currentBillLockedStatus:e.currentBillLockedStatus})).show():c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT&&
(new K({itemObj:c,billGridStore:k,elementGridStore:d,currentBillLockedStatus:e.currentBillLockedStatus})).show();else{var g=!1,f=a.cell.billColumnSettingId;n.match(/-quantity_per_unit-value/gi)?g=buildspace.constants.QUANTITY_PER_UNIT_ORIGINAL:n.match(/-quantity_per_unit_remeasurement-value/gi)&&(g=buildspace.constants.QUANTITY_PER_UNIT_REMEASUREMENT);if(g&&0<c.id&&"true"==c[f+"-include"][0]&&c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER&&c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N&&
c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID&&c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM&&c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE&&c.type!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY)if(0<c.uom_id[0]){a=dojo.xhrPost({url:"billBuildUpQuantity/getDimensionColumnStructure",content:{uom_id:c.uom_id[0]},handleAs:"json"});var t=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});t.show();
a.then(function(a){e.createBuildUpQuantityContainer(c,a,f,g,k,d);t.hide()})}else buildspace.dialog.alert(b.buildUpQtyAlert,b.pleaseSetUOM,60,300);"description"==n&&0<c.id&&(c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR||c.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID)&&(new I({itemObj:c,billId:e.billId,billGridStore:k,currentBillLockedStatus:e.currentBillLockedStatus})).show()}},singleCheckBoxSelection:function(a){var b=a.rowIndex;a=this.selection.selected[b];
b=this.getItem(b);this.removedIds=[];if(a)return this.gridContainer.selectedItemStore.put({id:b.id[0]}),this.getAffectedElementsByItems(b,"add");this.gridContainer.selectedItemStore.remove(b.id[0]);this.removedIds.push(b.id[0]);return this.getAffectedElementsByItems(b,"remove")},toggleAllSelection:function(a){var b=this,c=this.selection;b.removedIds=[];if(a)return c.selectRange(0,b.rowCount-1),b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,c){0<a.id&&b.gridContainer.selectedItemStore.put({id:a.id[0]})})}}),
b.getAffectedElementsByItems(null,"add");c.deselectAll();b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,c){0<a.id&&(b.gridContainer.selectedItemStore.remove(a.id[0]),b.removedIds.push(a.id[0]))})}});return b.getAffectedElementsByItems(null,"remove")},getAffectedElementsByItems:function(a,e){var c=this,d=[],g=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});g.show();if("add"===e)c.gridContainer.selectedItemStore.query().forEach(function(a){d.push(a.id)});else for(var f in c.removedIds)d.push(c.removedIds[f]);
w.post("projectBuilderReport/getAffectedElementsByItems",{handleAs:"json",data:{bill_id:c.billId,item_ids:y.stringify(c.gridContainer.arrayUnique(d))}}).then(function(a){for(var b in a)c.gridContainer.elementItemStore[b]||(c.gridContainer.elementItemStore[b]=new l({idProperty:"id"}));var d=dijit.byId("element-page-container-"+c.billId);if("add"===e)for(b in a){for(var f in a[b])c.gridContainer.elementItemStore[b].put({id:a[b][f]}),c.gridContainer.selectedItemStore.put({id:a[b][f]});d.grid.store.fetchItemByIdentity({identity:b,
onItem:function(a){if(a)return c.gridContainer.selectedElementStore.put({id:b}),d.grid.rowSelectCell.toggleRow(a._0,!0)}})}else for(b in a){c.gridContainer.selectedElementStore.remove(b);for(f in a[b])c.gridContainer.elementItemStore[b].remove(a[b][f]),c.gridContainer.selectedItemStore.remove(a[b][f]);d.grid.store.fetchItemByIdentity({identity:b,onItem:function(a){if(a&&0===c.gridContainer.elementItemStore[b].data.length)return c.gridContainer.selectedElementStore.remove(b),d.grid.rowSelectCell.toggleRow(a._0,
!1)}})}g.hide()},function(a){g.hide();console.log(a)})}}})}catch(r){console.debug(r)}},function(a){})},createBuildUpRateContainer:function(a,g){var d=this,e=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:buildspace.currencyAbbreviation,m=new dijit.layout.BorderContainer({style:"padding:0px;width:100%;height:100%;border:0px;outline:none;",gutters:!1}),p=new dijit.layout.AccordionContainer({id:"accordian_"+d.billId+"_"+a.id+"-container",region:"center",style:"padding:0px;width:100%;height:100%;border:0px;outline:none;"}),
q=dojo.xhrGet({url:"billBuildUpRate/resourceList/item_id/"+a.id,handleAs:"json"}),f=new B,h=dojo.xhrGet({url:"billBuildUpRate/getUnits",handleAs:"json"}),l=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});l.show();h.then(function(h){x(q,function(h){if(0==h.length)p.addChild(new dijit.layout.ContentPane({title:b.emptyResourceCategoryTitle,style:"padding:0px;border:0px;",doLayout:!1,id:"accPane-empty_resource-"+a.id,content:'<div style="text-align:center;"><p><h1>'+b.emptyResourceCategory+
"</h1></p></div> "}));else{var c=new G({id:"buildUpRateSummary-"+a.id,itemId:a.id,container:m,billGridStore:g,_csrf_token:a._csrf_token,currentBillLockedStatus:d.currentBillLockedStatus});dojo.forEach(h,function(g){var h=new dojo.data.ItemFileWriteStore({url:"billBuildUpRate/getBuildUpRateItemList/bill_item_id/"+a.id+"/resource_id/"+g.id,clearOnClose:!0});try{var k=new E({resource:g,BQItem:a,gridOpts:{itemId:a.id,store:h,buildUpSummaryWidget:c,structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",
formatter:f.rowCountCellFormatter},{name:b.description,field:"description",width:"auto",formatter:f.linkedCellFormatter},{name:b.number,field:"number-value",width:"100px",styles:"text-align:right;",formatter:f.formulaCurrencyCellFormatter},{name:b.constant,field:"constant-value",width:"100px",styles:"text-align:right;",formatter:f.formulaCurrencyCellFormatter},{name:b.qty,field:"quantity-value",width:"70px",styles:"text-align:right;",formatter:f.formulaNumberCellFormatter},{name:b.unit,field:"uom_id",
width:"70px",styles:"text-align:center;",formatter:f.linkedUnitIdCellFormatter},{name:b.rate,field:"rate-value",width:"120px",styles:"text-align:right;",formatter:f.formulaCurrencyCellFormatter},{name:b.total,field:"total",width:"120px",styles:"text-align:right;",formatter:f.linkedCurrencyCellFormatter},{name:b.wastage+" (%)",field:"wastage-value",width:"70px",styles:"text-align:right;",formatter:f.formulaCurrencyCellFormatter},{name:b.lineTotal,field:"line_total",width:"120px",styles:"text-align:right;",
formatter:f.linkedCurrencyCellFormatter}],currentBillLockedStatus:d.currentBillLockedStatus}});p.addChild(new dijit.layout.ContentPane({title:g.name+'<span style="color:blue;float:right;">'+e+"&nbsp;"+C.format(g.total_build_up)+"</span>",style:"padding:0px;border:0px;",doLayout:!1,id:"accPane-"+g.id+"-"+a.id,content:k}))}catch(O){console.log(O)}});m.addChild(c)}m.addChild(p);if(h=dijit.byId("projectBuilderReportBillGrid"+d.billId+"-stackContainer")){var k=dijit.byId("projectBuilderReportBillGrid"+
d.billId+"-controllerPane"),n=new dijit.form.Button({id:"add_resource_category_"+d.billId+"-btn",label:b.addResourceCategory,style:"float:right;color:#333333!important;",iconClass:"icon-16-container icon-16-add",baseClass:"buildUpRateImportResourceCategory",disabled:d.currentBillLockedStatus?!0:!1,onClick:function(b){L({billId:d.billId,billItem:a,currencyAbbr:e,billGridStore:g,baseContainer:m}).show()}});k.addChild(n);k=document.createElement("div");k=new dojox.layout.ContentPane({title:buildspace.truncateString(a.description,
60)+" ("+b.buildUpRate+")",style:"padding:0px;border:0px;",id:"buildUpRatePage-"+a.id,executeScripts:!0},k);h.addChild(k);k.set("content",m);h.selectChild("buildUpRatePage-"+a.id)}l.hide()})})},createBuildUpQuantityContainer:function(a,g,d,e){var m=this,p,q=new dijit.layout.BorderContainer({style:"padding:0px;margin:0px;width:100%;height:100%;border:0px;outline:none;",gutters:!1}),f=new dijit.layout.TabContainer({nested:!0,style:"padding:0;border:none;margin:0;width:100%;height:100%;",region:"center"}),
h=new B,l=dojo.xhrGet({url:"billBuildUpQuantity/getLinkInfo/id/"+a.id+"/bcid/"+d+"/t/"+e,handleAs:"json"}),r=new dojo.data.ItemFileWriteStore({url:"billBuildUpQuantity/getBuildUpQuantityItemList/bill_item_id/"+a.id+"/bill_column_setting_id/"+d+"/type/"+e,clearOnClose:!0}),n=[buildspace.constants.SIGN_POSITIVE_TEXT,buildspace.constants.SIGN_NEGATIVE_TEXT],c=[buildspace.constants.SIGN_POSITIVE,buildspace.constants.SIGN_NEGATIVE],k=!1,v=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+
"..."});v.show();l.then(function(l){var t=[{name:"No.",field:"id",styles:"text-align:center;",width:"30px",formatter:h.rowCountCellFormatter},{name:b.description,field:"description",width:"auto",cellType:"buildspace.widget.grid.cells.Textarea"},{name:b.factor,field:"factor-value",width:"100px",styles:"text-align:right;",cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:h.formulaNumberCellFormatter}];dojo.forEach(g,function(a){t.push({name:a.title,field:a.field_name,width:"100px",styles:"text-align:right;",
cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:h.formulaNumberCellFormatter})});t.push({name:b.total,field:"total",width:"100px",styles:"text-align:right;",formatter:h.numberCellFormatter});t.push({name:b.sign,field:"sign",width:"70px",styles:"text-align:center;",cellType:"dojox.grid.cells.Select",options:n,values:c,formatter:h.signCellFormatter});var u=new H({itemId:a.id,billColumnSettingId:d,type:e,hasLinkedQty:l.has_linked_qty,container:q,_csrf_token:a._csrf_token,disableEditingMode:!0});
l.has_linked_qty&&(k=!0,p=M({title:b.scheduleOfQuantities,BillItem:a,billColumnSettingId:d,disableEditingMode:!0,stackContainerId:"projectBuilderReportBillGrid"+m.billId+"-stackContainer",gridOpts:{qtyType:e,buildUpSummaryWidget:u,store:new dojo.data.ItemFileWriteStore({url:"billBuildUpQuantity/getScheduleOfQuantities/id/"+a.id+"/bcid/"+d+"/type/"+e,clearOnClose:!0}),structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:h.rowCountCellFormatter},{name:b.description,field:"description",
width:"auto",formatter:h.treeCellFormatter},{name:b.type,field:"type",width:"70px",styles:"text-align:center;",formatter:h.typeCellFormatter},{name:b.unit,field:"uom_id",width:"70px",styles:"text-align:center;",formatter:h.unitIdCellFormatter},{name:b.qty,field:"quantity-value",width:"100px",styles:"text-align:right;",formatter:h.formulaNumberCellFormatter}]}}));f.addChild(new F({title:b.manualQtyItems,billColumnSettingId:d,BillItem:a,type:e,disableEditingMode:!0,gridOpts:{store:r,structure:t,buildUpSummaryWidget:u}}));
k&&f.addChild(p);q.addChild(f);q.addChild(u);if(l=dijit.byId("projectBuilderReportBillGrid"+m.billId+"-stackContainer"))u=document.createElement("div"),u=new dojox.layout.ContentPane({title:buildspace.truncateString(a.description,60)+" ("+b.buildUpQuantity+" - "+a.uom_symbol+")",id:"buildUpQuantityPage-"+a.id,content:q,grid:k?p.grid:null,style:"padding:0px;border:0px;",executeScripts:!0},u),l.addChild(u),l.selectChild("buildUpQuantityPage-"+a.id);v.hide()})},reconstructBillContainer:function(){var a=
dijit.byId("projectBuilderReportBillGrid"+this.billId+"-controllerPane"),b=dijit.byId("projectBuilderReportBillGrid"+this.billId+"-stackContainer");a.destroyRecursive();b.destroyRecursive();this.createElementGrid()},markedCheckBoxObject:function(a,b){var d=a.store;b.query().forEach(function(b){b.id!=buildspace.constants.GRID_LAST_ROW&&d.fetchItemByIdentity({identity:b.id,onItem:function(b){if(b)return a.rowSelectCell.toggleRow(b._0,!0)}})})},arrayUnique:function(a){return a.reverse().filter(function(a,
b,e){return-1===e.indexOf(a,b+1)}).reverse()}});return v("buildspace.apps.ProjectBuilderReport.BillManager",dijit.layout.TabContainer,{region:"center",rootProject:null,style:"padding:0px;border:0px;margin:0px;width:100%;height:100%;",billId:null,billType:null,billLayoutSettingId:null,explorer:null,nested:!0,postCreate:function(){this.inherited(arguments);var a=P({id:"bill_element_container_"+this.rootProject.id+"-bill-"+this.billId,rootProject:this.rootProject,billId:this.billId,bqVersion:0,explorer:this.explorer}),
g=N({billId:this.billId,explorer:this.explorer,billType:this.billType});g.billPropertiesForm.billElementObj=a;this.addChild(new z({style:"padding:0px;border:0px;width:100%;height:100%;",title:b.elementTradeList,content:a}));this.addChild(new z({style:"padding:0px;border:0px;width:100%;height:100%;",title:b.billProperties,content:g}))}})});
