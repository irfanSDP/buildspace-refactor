define(["dojo/_base/declare","./Builder","buildspace/widget/grid/cells/Formatter","dojo/i18n!buildspace/nls/ProjectBuilder"],function(d,e,f,b){return d("buildspace.apps.ProjectBuilderReport",buildspace.apps._App,{win:null,init:function(a){this.win=new buildspace.widget.Window({title:b.ProjectBuilderReport+" > "+b.projectList,onClose:dojo.hitch(this,"kill")});a=f();this.projectListing=new buildspace.apps.ProjectBuilderReport.ProjectListing({style:"padding:0px;margin:0px;outline:none;width:100%;height:100%;",
region:"center",gridOpts:{structure:[{name:"&nbsp;",field:"id",width:"30px",styles:"text-align:center;",formatter:a.rowCountCellFormatter,filterable:!1},{name:b.title,field:"title",width:"auto",autoComplete:!0},{name:b.reference,field:"reference",width:"120px",styles:"text-align: center;",autoComplete:!0},{name:b.country,field:"country",width:"100px",styles:"text-align: center;",autoComplete:!0},{name:b.state,field:"state",width:"120px",styles:"text-align: center;",autoComplete:!0},{name:b.created_by,
field:"created_by",styles:"text-align: center;",width:"140px"},{name:b.created_at,field:"created_at",width:"120px",styles:"text-align: center;",filterable:!1}],store:new dojo.data.ItemFileWriteStore({url:"projectBuilder/getProjects"}),onRowDblClick:dojo.hitch(this,"projectListingDblClick")}});this.win.addChild(this.projectListing);this.win.show();this.win.startup()},projectListingDblClick:function(a){a=this.projectListing.grid.getItem(a.rowIndex);0<a.id&&this.createBuilderWin(a)},createBuilderWin:function(a){this.kill();
this.project=a;this.win=new buildspace.widget.Window({title:b.ProjectBuilderReport+" > "+buildspace.truncateString(a.title,100)+" ("+b.status+"::"+a.status[0].toUpperCase()+")",onClose:dojo.hitch(this,"kill")});a=new e({project:a});this.win.addChild(a);this.win.show();this.win.startup()},makeTab:function(a,b,c){this.tabArea.addChild(c);this.tabArea.selectChild(c);c.mod_info={title:b,appName:a}},kill:function(){this.win&&"undefined"!=typeof this.win&&this.win.close()}})});
