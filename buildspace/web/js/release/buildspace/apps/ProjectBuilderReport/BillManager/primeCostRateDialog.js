define("buildspace/apps/ProjectBuilderReport/BillManager/primeCostRateDialog","dojo/_base/declare dojo/_base/lang dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dijit/form/Form dijit/form/CurrencyTextBox dijit/form/NumberTextBox dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/primeCostRateForm.html dojo/currency dojo/number dojo/i18n!buildspace/nls/ProjectBuilder".split(" "),function(g,t,u,v,w,k,l,h,x,y,m,n,p,q,r,z,b,c){h=
g("buildspace.apps.ProjectBuilderReport.BillManager.PrimeCostRateForm",[m,n,p,q],{templateString:r,baseClass:"buildspace-form",style:"outline:none;",itemObj:null,nls:c,billGridStore:null,elementGridStore:null,region:"center",disableEditingMode:!1,constructor:function(a){this.inherited(arguments);this.currencyAbbreviation=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:buildspace.currencyAbbreviation},postCreate:function(){this.inherited(arguments);var a=this;dojo.connect(this.supplyRateNode,
"onKeyUp",function(){a.updateTotal()});dojo.connect(this.wastagePercentageNode,"onKeyUp",function(){a.updateTotal()});dojo.connect(this.labourForInstallationNode,"onKeyUp",function(){a.updateTotal()});dojo.connect(this.otherCostNode,"onKeyUp",function(){a.updateTotal()});dojo.connect(this.profitPercentageNode,"onKeyUp",function(){a.updateTotal()})},startup:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:c.pleaseWait+"..."});b.show();dojo.xhrGet({url:"billManager/primeCostRateForm",
handleAs:"json",content:{id:this.itemObj.id},load:function(d){a.primeCostRateForm.setFormValues(d);b.hide()},error:function(a){b.hide()}})},updateTotal:function(){var a=isNaN(this.supplyRateNode.get("value"))?0:this.supplyRateNode.get("value"),e=isNaN(this.wastagePercentageNode.get("value"))?0:this.wastagePercentageNode.get("value"),e=b.parse(a)*(b.parse(e)/100),d=isNaN(this.labourForInstallationNode.get("value"))?0:this.labourForInstallationNode.get("value"),c=isNaN(this.otherCostNode.get("value"))?
0:this.otherCostNode.get("value"),f=isNaN(this.profitPercentageNode.get("value"))?0:this.profitPercentageNode.get("value"),f=(b.parse(a)+e+b.parse(d)+b.parse(c))*(b.parse(f)/100);this.wastageAmountNode.set("value",e);this.profitAmountNode.set("value",f);a=b.parse(a)+b.parse(e)+b.parse(d)+b.parse(c)+b.parse(f);this.totalNode.set("value",a)}});return g("buildspace.apps.ProjectBuilderReport.BillManager.PrimeCostRateDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:c.primeCostRate,itemObj:null,
billGridStore:null,elementGridStore:null,currentBillLockedStatus:!1,disableEditingMode:!1,constructor:function(a){a.currentBillLockedStatus&&(this.disableEditingMode=!0)},buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){l.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){key=a.keyCode;key==k.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},
createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:450px;height:280px;",gutters:!1}),b=new h({itemObj:this.itemObj,billGridStore:this.billGridStore,elementGridStore:this.elementGridStore,disableEditingMode:this.disableEditingMode}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});d.addChild(new dijit.form.Button({label:c.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,
"hide")}));a.addChild(d);a.addChild(b);return a}})});
