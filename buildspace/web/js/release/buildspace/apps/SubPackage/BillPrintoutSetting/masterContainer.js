(function(){define("dojo/_base/declare dijit/layout/BorderContainer dijit/layout/TabContainer dijit/Toolbar dijit/form/Button dojo/request dojo/dom dojo/dom-attr dojo/_base/lang dojo/i18n!buildspace/nls/PrintLayoutSetting".split(" "),function(p,n,q,r,t,h,u,v,w,c){return p("buildspace.apps.SubPackage.BillPrintoutSetting",n,{projectId:1,subPackageId:-1,layoutSettingId:-1,region:"center",saveURL:"subPackagePrintLayoutSetting/saveSettings",style:"padding:0px;margin:0px;outline:none!important;height:100%;width:100%;",
gutters:!1,postCreate:function(){var b;b=this.layoutSettings=this.getSettings();this.layoutSettingId=b.layoutSetting.id;return this.addChild(this.renderTabs(b))},renderTabs:function(b){var d,a,k,f,g,e,l,m,h;a=0;g=this;k=[];d=[];l={headStyling:{title:c.headStyling,nameSpace:"HeadStylingFormatForm",dataName:"headSettings",id:"headSettings-"+this.projectId},fontNumber:{title:c.fontNumFormat,nameSpace:"FontNumberFormatForm",dataName:"layoutSetting",id:"fontNumber-"+this.projectId},pageFormat:{title:c.pageFormat,
nameSpace:"PageFormatForm",dataName:"layoutSetting",id:"pageFormat-"+this.projectId},standardPhrase:{title:c.standardPhrases,nameSpace:"StandardPhrasesForm",dataName:"phrase",id:"standardPhrases-"+this.projectId},headerFooter:{title:c.headerFooter,nameSpace:"HeaderFooterForm",dataName:"phrase",id:"headerFooter-"+this.projectId}};m=new q({style:"padding:0px;margin:0px;outline:none!important;width:100%;height:100%;left:0px!important;",region:"center",nested:!0});for(h in l)e=l[h],f=0===a?!0:!1,d[a]=
new n({id:e.id,title:e.title,style:"padding:0px;margin:0px;outline:none!important;height:100%;width:100%;",gutters:!1,selected:f}),k[a]=new buildspace.apps.SubPackage.BillPrintoutSetting[e.nameSpace]({projectId:g.projectId,subPackageId:g.subPackageId,layoutSettingId:g.layoutSettingId,data:b[e.dataName],region:"center",style:"overflow:auto;"}),f=new r({region:"top",style:"outline:none!important;margin:0px;padding:2px;overflow:hidden;"}),f.addChild(new t({label:c.save,iconClass:"icon-16-container icon-16-save",
formCounter:a,nameSpace:e.nameSpace,onClick:function(){var a;return(a=k[this.formCounter].validateForm())?g.postForm(a):new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,content:c.validationMsg,style:"width: 340px;"})}})),d[a].addChild(f),d[a].addChild(k[a]),m.addChild(d[a]),a++;return m},getSettings:function(){var b;b=void 0;h.get("subPackagePrintLayoutSetting/getSettings/id/"+this.subPackageId,{sync:!0,handleAs:"json",preventCache:!0}).then(function(d){return b=d},function(b){return console.log(b)});
return b},postForm:function(b){var d;d=new buildspace.dialog.indeterminateProgressBar({title:"Processing..."});w.mixin(b,{_csrf_token:this.layoutSettings._csrf_token});d.show();return h.post(this.saveURL,{data:b,handleAs:"json"}).then(function(a){d.hide();return a.success?a.heads:new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,content:a.error,style:"width: 340px;"})},function(a){d.hide();return new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,content:c.serverErrorMsg,style:"width: 340px;"})})},
updateFormNewIdValue:function(b,d){var a,c,f,g,e;c="ReserveWordForm"===d?"word[id]":"content[id]";if(null!=b){e=[];for(f in b)a=b[f],g=u.byId(""+c+"["+f+"]"),e.push(v.set(g,"value",a));return e}}})})}).call(this);
