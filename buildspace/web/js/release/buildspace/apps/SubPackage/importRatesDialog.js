define("buildspace/apps/SubPackage/importRatesDialog","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/importRatesForm.html dojo/i18n!buildspace/nls/ImportRatesDialog dojox/form/Uploader".split(" "),function(c,p,q,r,t,u,e,f,g,h,k,l,m,b,v){var n=c("buildspace.apps.SubPackage.FileImportForm",[g,h,k,l],{templateString:m,baseClass:"buildspace-form",
region:"center",dialogObj:null,projectId:null,contractorGrid:null,subPackageGrid:null,companyId:null,subPackageId:-1,nls:b,uploadUrl:null,style:"padding:5px;overflow:auto;",postCreate:function(){this.inherited(arguments);var a=this.fileUploaderNode;a.on("Complete",dojo.hitch(this,"uploadComplete"));a.on("Begin",dojo.hitch(this,"uploadBegin"))},startup:function(){this.inherited(arguments)},uploadBegin:function(a){(this.pb=buildspace.dialog.indeterminateProgressBar({title:b.uploadingData+". "+b.pleaseWait+
"..."})).show();this.dialogObj.hide()},uploadComplete:function(a){this.pb.hide();a.success?(this.refreshContractorGrid(),this.refreshSubPackageGrid()):buildspace.dialog.alert(b.error,"<div>"+a.errorMsg+"</div>",80,300)},refreshContractorGrid:function(){this.contractorGrid.store.save();this.contractorGrid.store.close();this.contractorGrid._refresh()},refreshSubPackageGrid:function(){this.subPackageGrid.store.save();this.subPackageGrid.store.close();this.subPackageGrid._refresh()}});return c("buildspace.apps.SubPackage.FileImportDialog",
dijit.Dialog,{style:"padding:0px;margin:0px;",title:b.importContractorRates,project:null,subPackage:null,contractorGrid:null,subPackageGrid:null,company:null,uploadUrl:null,buildRendering:function(){var a=this.createForm();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){f.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==e.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},
createForm:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:400px;height:80px;",gutters:!1}),c=new n({dialogObj:this,projectId:this.project.id,companyId:this.company.id,contractorGrid:this.contractorGrid,subPackageGrid:this.subPackageGrid,subPackageId:this.subPackage.id,uploadUrl:"subPackage/importContractorRates/pid/"+this.project.id+"/cid/"+this.company.id+"/sid/"+this.subPackage.id}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});
d.addChild(new dijit.form.Button({label:b.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));a.addChild(d);a.addChild(c);return a}})});
