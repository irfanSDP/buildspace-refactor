(function(){define("buildspace/apps/StockIn/InvoiceDeliveryOrderTab/DeliveryOrderFormDialog","dojo/_base/declare dojo/_base/lang dojo/keys dojo/parser dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Toolbar dijit/form/Button dijit/layout/BorderContainer dijit/form/ValidationTextBox dijit/form/DateTextBox dojo/dom-style dojo/dom-form dojo/request dojox/validate/web dijit/form/FilteringSelect dojo/store/Memory dojox/form/Manager dojo/text!./templates/deliveryOrderForm.html dojo/i18n!../../../nls/StockIn".split(" "),
function(h,k,m,y,n,p,q,r,t,u,v,z,A,f,B,w,C,D,E,F,x,d){var l;l=h("buildspace.apps.StockIn.InvoiceInformation.DeliveryOrderForm",[n,p,q,r],{baseClass:"buildspace-form",invoiceId:-1,templateString:x,region:"center",style:"overflow: auto;",deliveryOrderGrid:null,formInfo:null,nls:d,dialogContainer:null,deliveryOrderId:-1,newDeliveryOrderId:-1,startup:function(){this.inherited(arguments);return this.deliveryOrderForm.setFormValues(this.formInfo)},clearInputErrorMsgs:function(){var a,c,b;b={project_structure_id:null,
purchase_order_id:null,term_type:null,invoice_no:null,invoice_date:null,term_type:null};for(c in b){a=this["error-"+c];if(null==a)return!1;a.innerHTML=b[c];f.set(a,"display","none")}},save:function(){var a,c,b;b=this;this.clearInputErrorMsgs();if(!this.deliveryOrderForm.validate())return!1;a=dojo.formToObject(this.deliveryOrderForm.id);0<b.newDeliveryOrderId?k.mixin(a,{deliveryOrderId:b.newDeliveryOrderId}):k.mixin(a,{deliveryOrderId:b.deliveryOrderId});c=buildspace.dialog.indeterminateProgressBar({title:d.pleaseWait+
"..."});c.show();return w.post("stockIn/saveDeliveryOrderFormInformation/invoiceId/"+b.invoiceId,{data:a,handleAs:"json"}).then(function(a){var e,d,g;c.hide();if(a.success&&0<a.id)return b.deliveryOrderGrid.refreshGrid(),b.newInvoiceId=a.id,b.dialogContainer.hide();g=[];for(d in a.errorMsgs)e=b["error-"+d],e.innerHTML=a.errorMsgs[d],g.push(f.set(e,"display","block"));return g},function(a){return c.hide()})}});return h("buildspace.apps.StockIn.InvoiceInformation.DeliveryOrderFormDialog",dijit.Dialog,
{title:d.addNewDeliveryOrder,style:"padding:0px;margin:0px;",deliveryOrderGrid:null,invoice:null,formInfo:null,buildRendering:function(){var a;this.content=a=this.createContent();a.startup();return this.inherited(arguments)},postCreate:function(){f.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},createContent:function(){var a,c,b,e;b=this;a=new v({style:"width:480px;height:140px;padding:0;margin:0;",gutters:!1});c=new l({invoiceId:b.invoice.id[0],
dialogContainer:b,deliveryOrderGrid:b.deliveryOrderGrid,formInfo:this.formInfo});e=new t({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});e.addChild(new u({label:d.save,iconClass:"icon-16-container icon-16-save",onClick:function(){return c.save()}}));e.addChild(new dijit.ToolbarSeparator);e.addChild(new dijit.form.Button({label:d.close,iconClass:"icon-16-container icon-16-close",onClick:function(){return b.hide()}}));a.addChild(e);a.addChild(c);return a},_onKey:function(a){if(a.keyCode===
m.ESCAPE)return dojo.stopEvent(a)},onHide:function(){return this.destroyRecursive()}})})}).call(this);
