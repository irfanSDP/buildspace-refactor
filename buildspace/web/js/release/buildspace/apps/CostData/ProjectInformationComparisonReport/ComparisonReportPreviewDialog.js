define("buildspace/apps/CostData/ProjectInformationComparisonReport/ComparisonReportPreviewDialog","dojo/_base/declare dojo/dom-style dojo/number dojo/currency dojox/grid/EnhancedGrid buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/CostData".split(" "),function(f,k,q,r,t,l,d){var m=f("buildspace.apps.CostData.ProjectInformationComparisonReportPreview.Grid",dojox.grid.EnhancedGrid,{region:"center",style:"border-top:none;",canSort:function(a){return!1},onStyleRow:function(a){this.inherited(arguments);
if(a.node.children[0]&&2<=a.node.children[0].children[0].rows.length){var b=a.node.children[0].children[0].rows[1],c=a.node.children[0].children[0].rows[0].children;b.parentNode.removeChild(b);dojo.forEach(c,function(g,e){e=dojo.attr(g,"rowSpan");(!e||2>e)&&dojo.attr(g,"rowSpan",2)})}}}),n=function(a,b,c){a=this.grid.getItem(b);return 0<a.id[0]||a.id[0]==buildspace.constants.GRID_LAST_ROW?parseInt(b)+1:null},p=function(a,b,c){b=this.grid.getItem(b);if(b.id[0]==buildspace.constants.GRID_LAST_ROW)return"";
1==b.level[0]&&(a="<b>"+a+"</b>");return'<div style="padding-left:'+16*parseInt(String(b.level-1))+'px">'+a+"</div>"},h=function(a,b,c){this.grid.getItem(b);return void 0===a?"":a};return f("buildspace.apps.CostData.ProjectInformationComparisonReportPreview.Dialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:d.comparisonReport,gridUrl:null,costData:this.costData,selectedItemIds:[],projectInfoItem:null,buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},
postCreate:function(){k.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},onHide:function(){this.destroyRecursive()},createToolbar:function(){var a=this,b=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;width:100%;"});b.addChild(new dijit.form.Button({label:d.close,iconClass:"icon-16-container icon-16-close",onClick:function(){a.hide()}}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:d.export,
iconClass:"icon-16-container icon-16-print",onClick:function(){a.parent.export()}}));return b},createContent:function(){this.formatter=new l;var a=new dijit.layout.BorderContainer({style:"padding:0px;width:1200px;height:450px;",gutters:!1});a.addChild(this.createToolbar());a.addChild(this.createBreakdownGrid());return a},getBreakdownGridStructure:function(){var a=[{name:"No.",field:"count",width:"30px",styles:"text-align:center;",formatter:n},{name:d.item,field:"item",width:"500px",formatter:this.projectInfoItem?
h:p}],b=[this.costData.id].concat(this.selectedItemIds),c;for(c in b)a.push({name:this.selectedCostDataInfo[b[c]].name,field:"description-"+b[c],width:"500px",formatter:h});return a},createBreakdownGrid:function(){var a="projectInformationComparisonReport/getBreakdown/cost_data_id/"+this.costData.id;this.projectInfoItem&&(a+="/parent_id/"+this.projectInfoItem.id);0<this.selectedItemIds.length&&(a+="?selected_ids="+this.selectedItemIds.join());var b=new dijit.layout.BorderContainer({region:"center",
style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1});a=m({structure:this.getBreakdownGridStructure(),store:dojo.data.ItemFileWriteStore({url:a,clearOnClose:!0})});b.addChild(a);return b}})});
