define("buildspace/apps/CostData/ProjectParticulars","dojo/_base/declare dojox/grid/EnhancedGrid buildspace/widget/grid/cells/Formatter dojo/currency buildspace/widget/grid/cells/Textarea buildspace/widget/grid/cells/Select dojo/i18n!buildspace/nls/CostData".split(" "),function(m,n,p,q,x,y,c){var v=m("buildspace.apps.CostData.ProjectParticularsGrid",n,{costData:null,style:"border:none;",region:"center",keepSelection:!0,rowSelector:"0px",escapeHTMLInData:!1,borderContainerWidget:null,constructor:function(a){this.inherited(arguments)},
canSort:function(a){return!1},postCreate:function(){this.inherited(arguments)},dodblclick:function(a){this.onRowDblClick(a)},doApplyCellEdit:function(a,d,k){var e=this,b=e.getItem(d),r=e.store;if(a!==b[k][0]){var l=buildspace.dialog.indeterminateProgressBar({title:c.savingData+". "+c.pleaseWait+"..."}),t=function(f,g){for(var h in f)b.hasOwnProperty(h)&&h!=g._getIdentifierAttribute()&&g.setValue(b,h,f[h]);g.save()},u={url:"costData/updateProjectParticularValue",content:{id:b.id,val:a,cost_data_id:e.costData.id,
_csrf_token:b._csrf_token?b._csrf_token:null},handleAs:"json",load:function(f){if(f.success){0<b.id&&t(f.data,r);var g=e.getCellByField(k);window.setTimeout(function(){e.focus.setFocusIndex(d,g.index)},10)}l.hide()},error:function(f){l.hide()}};l.show();dojo.xhrPost(u)}e.inherited(arguments)},canEdit:function(a,d){return void 0!=a?0<this.getItem(d).id[0]:this._canEdit},reload:function(){this.store.close();this._refresh()}}),w=function(a,d,k){return 0<this.grid.getItem(d).id&&0!=a?q.format(a):"&nbsp;"};
return m("buildspace.apps.CostData.ProjectParticularsContainer",dijit.layout.BorderContainer,{region:"center",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,costData:null,grid:null,editable:!1,postCreate:function(){this.inherited(arguments);this.gridFormatter=new p;var a=this.createBreakdownGrid();a=new dijit.layout.ContentPane({style:"padding:0px;border:none;width:100%;height:100%;",region:"center",content:a,grid:a});this.addChild(a)},getGridStructure:function(){return[{name:"No.",
field:"count",width:"30px",styles:"text-align:center;",formatter:this.gridFormatter.rowCountCellFormatter},{name:c.description,field:"description",width:"auto"},{name:c.summaryDescription,field:"summary_description",width:"auto",formatter:this.gridFormatter.unEditableCellFormatter},{name:c.value,field:"value",width:"140px",styles:"text-align:right;",cellType:"buildspace.widget.grid.cells.Textarea",editable:this.editable,formatter:w},{name:c.unit,field:"uom_id",width:"70px",styles:"text-align:center;",
formatter:this.gridFormatter.unitCellFormatter}]},createBreakdownGrid:function(){return this.grid=v({costData:this.costData,borderContainerWidget:this,structure:this.getGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"costData/getProjectParticularList/costData/"+this.costData.id})})}})});
