define("buildspace/apps/CostData/LinkVariationOrderItems/ProjectListingGrid",["dojo/_base/declare","dojox/grid/EnhancedGrid","./VariationOrderListingGrid","dojo/i18n!buildspace/nls/CostData"],function(f,g,h,e){var k=f("buildspace.apps.LinkVariationOrderItems.ProjectListingGrid",g,{style:"border:none;",region:"center",keepSelection:!0,escapeHTMLInData:!1,canSort:function(){return!1}}),l=function(b,a){return parseInt(a)+1},m=function(b,a){return this.grid.getItem(a).is_linked[0]?'<span style="color:#4c94e6">'+
b+"</span>":b};return f("buildspace.apps.CostData.LinkVariationOrderItems.ProjectListingContainer",dijit.layout.BorderContainer,{region:"center",title:"",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,splitter:!0,costData:null,grid:null,masterItem:null,stackContainer:null,parentContainer:null,postCreate:function(){this.inherited(arguments);this.addChild(this.createToolbar());var b=this.stackContainer=this.createStackContainer(),a=new dijit.layout.BorderContainer({title:this.title+
" - "+e.projects,style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,region:"center"});a.addChild(this.createBreakdownGrid());b.addChild(a)},createToolbar:function(){var b=new dijit.Toolbar({region:"top",style:"outline:none!important;border:none;padding:2px;width:100%;"});b.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-container icon-16-close",style:"float:right;",onClick:dojo.hitch(this,"close")}));return b},getGridStructure:function(){return[{name:"No",
field:"id",width:"30px",styles:"text-align: center;",formatter:l},{name:e.description,field:"description",width:"auto",formatter:m}]},createStackContainer:function(){var b="variationOrderItemsLinker"+this.masterItem.id+"-stackContainer",a=this.stackContainer=new dijit.layout.StackContainer({style:"border:0px;width:100%;height:100%;",region:"center",id:b});dojo.subscribe(b+"-selectChild","",function(a){var c=dijit.byId(b);if(c){var d=c.getChildren();a=dojo.indexOf(d,a);a+=1;if(d.length>a)for(;d.length>
a;)c.removeChild(d[a]),d[a].destroyDescendants(),d[a].destroyRecursive(),a+=1}});var c=new dijit.layout.StackController({region:"top",containerId:b}),c=new dijit.layout.ContentPane({style:"padding:0px;overflow:hidden;",baseClass:"breadCrumbTrail",region:"top",id:"costDataLinkVariationOrderItems"+this.costData.id+"-controllerPane",content:c});this.addChild(a);this.addChild(c);return a},createBreakdownGrid:function(){var b=this,a=b.grid=k({structure:b.getGridStructure(),store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,
url:"variationOrder/getProjectList/costData/"+b.costData.id+"/masterItem/"+b.masterItem.id}),onRowDblClick:function(a){a=this.getItem(a.rowIndex);0<a.id[0]&&b.createVariationOrderListingGrid(a)}});return new dijit.layout.ContentPane({style:"padding:0px;border:none;width:100%;height:100%;",region:"center",content:a,grid:a})},createVariationOrderListingGrid:function(b){b=new h({title:buildspace.truncateString(b.description,60),moduleContainer:this,costData:this.costData,masterItem:this.masterItem,item:b});
this.stackContainer.addChild(b);this.stackContainer.selectChild(b)},close:function(){this.parentContainer.removeChild(this);return this.destroyRecursive()}})});
