define("buildspace/apps/CostData/LinkBillItems/BillListingGrid",["dojo/_base/declare","dojox/grid/EnhancedGrid","buildspace/widget/grid/cells/Formatter","./ElementListingGrid","dojo/i18n!buildspace/nls/CostData"],function(d,f,g,h,e){var k=d("buildspace.apps.LinkBillItems.BillListingGrid",f,{style:"border:none;",region:"center",keepSelection:!0,escapeHTMLInData:!1,costData:null,item:null,linkedIds:[],canSort:function(){return!1}}),l=function(a,b){return parseInt(b)+1},m=function(a,b){var c=this.grid.getItem(b);
return this.grid.linkedIds.includes(c.id[0])?'<span style="color:#4c94e6">'+a+"</span>":a};return d("buildspace.apps.CostData.LinkBillItems.BillListingContainer",dijit.layout.BorderContainer,{region:"center",title:"",style:"padding:0px;border:none;width:100%;height:100%;",gutters:!1,costData:null,item:null,grid:null,moduleContainer:null,linkedIds:[],postCreate:function(){var a=this;this.inherited(arguments);var b=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});a.moduleContainer.linkedBillsUrl?
b.show().then(function(){dojo.xhrGet({url:a.moduleContainer.linkedBillsUrl,handleAs:"json",load:function(c){c.success&&(a.linkedIds=c.ids,a.addChild(a.createBreakdownGrid()));b.hide()},error:function(a){}})}):a.addChild(a.createBreakdownGrid())},getGridStructure:function(){this.gridFormatter=new g;return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:l},{name:e.description,field:"description",width:"auto",formatter:m}]},createBreakdownGrid:function(){var a=this,b=a.grid=
k({costData:a.costData,item:a.item,structure:a.getGridStructure(),linkedIds:a.linkedIds,store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"costData/getLinkBillItemBillList/costData/"+a.costData.id+"/id/"+a.item.id}),onRowDblClick:function(b){b=this.getItem(b.rowIndex);0<b.id[0]&&a.createElementListingGrid(b)}});return new dijit.layout.ContentPane({style:"padding:0px;border:none;width:100%;height:100%;",region:"center",content:b,grid:b})},createElementListingGrid:function(a){a=new h({title:buildspace.truncateString(a.description,
60),moduleContainer:this.moduleContainer,costData:this.costData,item:a});this.moduleContainer.stackContainer.addChild(a);this.moduleContainer.stackContainer.selectChild(a)}})});
