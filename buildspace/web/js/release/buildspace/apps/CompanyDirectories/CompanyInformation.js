(function(){define("buildspace/apps/CompanyDirectories/CompanyInformation","dojo/_base/declare dojo/_base/lang dojo/parser dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Toolbar dijit/form/Button dijit/layout/BorderContainer dijit/form/ValidationTextBox dijit/form/SimpleTextarea dijit/registry dojo/dom-style dojo/dom-form dojo/request dojox/validate/web dijit/form/Select dijit/form/FilteringSelect dojo/store/Memory dojox/form/Manager dojo/text!./templates/companyForm.html dojo/i18n!../../nls/CompanyDirectories".split(" "),
function(g,l,x,m,n,p,q,r,t,u,y,z,A,h,B,v,C,D,E,F,G,w,d){var k;k=g("buildspace.apps.CompanyDirectories.CompanyInformationForm",[m,n,p,q],{baseClass:"buildspace-form",companyId:-1,templateString:w,region:"center",style:"overflow: auto;",companyInfo:null,formInfo:null,dialogContainer:null,companyDirectoriesGrid:null,nls:d,editable:!0,postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this["companyForm-"+this.companyId].setFormValues(this.formInfo);if(!this.editable)return this["companyForm-"+
this.companyId].disable()},clearInputErrorMsgs:function(){var a,b,c,e;c={shortname:null,about:null,contact_person_name:null,contact_person_email:null,contact_person_direct_line:null,contact_person_mobile:null,website:null};e=[];for(b in c)a=this["error-"+b],a.innerHTML=c[b],e.push(h.set(a,"display","none"));return e},save:function(){var a,b,c;c=this;this.clearInputErrorMsgs();if(!this["companyForm-"+this.companyId].validate())return!1;a=dojo.formToObject(this["companyForm-"+this.companyId].id);b=
buildspace.dialog.indeterminateProgressBar({title:d.pleaseWait+"..."});l.mixin(a,{companyId:c.companyId});b.show();return v.post("companyDirectories/updateCompanyInformation",{data:a,handleAs:"json"}).then(function(a){var d,e,f;b.hide();if(a.success)return c.companyDirectoriesGrid.refreshGrid(),c.dialogContainer.hide();f=[];for(e in a.errorMsgs)"username"!==e?(d=c["error-"+e],d.innerHTML=a.errorMsgs[e],f.push(h.set(d,"display","block"))):f.push(void 0);return f},function(a){return b.hide()})}});return g("buildspace.apps.CompanyDirectories.CompanyInformationFormContainer",
u,{companyId:-1,dialogContainer:null,style:"height:100%; width:100%; padding: 0; margin: 0;border:none;",gutters:!1,companyInfo:null,formInfo:null,companyDirectoriesGrid:null,title:d.tabMainInformationDesc,editable:!0,postCreate:function(){this.inherited(arguments);var a=new k({companyId:this.companyId,companyInfo:this.companyInfo,formInfo:this.formInfo,dialogContainer:this.dialogContainer,companyDirectoriesGrid:this.companyDirectoriesGrid,editable:this.editable});if(this.editable){var b=new r({region:"top",
style:"outline:none!important;padding:2px;overflow:hidden;"});b.addChild(new t({label:d.save,iconClass:"icon-16-container icon-16-save",disabled:this.editable?!1:!0,onClick:function(){return a.save()}}));this.addChild(b)}return this.addChild(a)}})})}).call(this);
