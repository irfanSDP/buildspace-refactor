(function(){define("buildspace/apps/SystemAdministration/UserMaintenance/grid","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-attr dojox/grid/enhanced/plugins/Menu dojox/grid/enhanced/plugins/Selector dojo/_base/event dojo/keys dijit/focus dojo/_base/html dojo/request/xhr dijit/PopupMenuItem dojo/request ./UserProfileForm buildspace/widget/grid/cells/Textarea buildspace/widget/grid/cells/Formatter dojo/i18n!../../../nls/SystemAdministration buildspace/widget/grid/Filter".split(" "),
function(f,m,n,p,q,r,t,u,v,w,x,y,z,h,A,k,e,l){var g;g=f("buildspace.apps.SystemAdministration.UserMaintenance.Grid",dojox.grid.EnhancedGrid,{style:"border-top:none;",id:"userMaintenance-userList",keepSelection:!0,rowSelector:"0px",region:"center",userMaintenanceGridContainer:null,canSort:function(a){return!1},onRowDblClick:function(a){a=this.getItem(a.rowIndex);return this.userMaintenanceGridContainer.editExistingUser(a)},refreshGrid:function(){this.store.save();this.store.close();return this.setStore(this.store)}});
return f("buildspace.apps.SystemAdministration.UserMaintenance.Container",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",gutters:!1,postCreate:function(){var a,d,b,c;this.inherited(arguments);(c=dijit.byId("userMaintenance-stackContainer"))&&dijit.byId("userMaintenance-stackContainer").destroyRecursive();c=this.stackContainer=new dijit.layout.StackContainer({style:"width:100%;height:100%;",region:"center",id:"userMaintenance-stackContainer"});a=new dojo.data.ItemFileWriteStore({url:"systemAdministration/getUserLists",
clearOnClose:!0,urlPreventCache:!0});d=this.userMaintenanceGrid=new g({structure:this.getGridLayout(),store:a,userMaintenanceGridContainer:this});a=new l({grid:this.userMaintenanceGrid,region:"top",editableGrid:!1,filterFields:["name","email","company","assignedGroups"]});b=new dijit.layout.BorderContainer({region:"top",gutters:!1});b.addChild(a);b.addChild(new dijit.layout.ContentPane({style:"width:100%",content:d,region:"center"}));a=new dijit.layout.ContentPane({title:e.userList,content:b});c.addChild(a);
a=new dijit.layout.StackController({region:"top",containerId:"userMaintenance-stackContainer"});a=new dijit.layout.ContentPane({style:"padding: 0px; overflow: hidden;",baseClass:"breadCrumbTrail",region:"top",content:a});this.addChild(c);this.addChild(a);return dojo.subscribe("userMaintenance-stackContainer-selectChild","",function(a){var b,c,d;if(c=dijit.byId("userMaintenance-stackContainer")){b=c.getChildren();a=dojo.indexOf(b,dijit.byId(a.id));a+=1;for(d=[];b.length>a;)c.removeChild(b[a]),b[a].destroyRecursive(),
d.push(a+=1);return d}})},editExistingUser:function(a){var d,b,c;b=this;c={id:a.id};d=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});d.show().then(function(){dojo.xhrGet({url:"systemAdministration/getUserInfo",content:c,handleAs:"json",load:function(a){var c;c=new h({region:"center",user:a,userMaintenanceGrid:b.userMaintenanceGrid});a=new dijit.layout.BorderContainer({style:"padding:0px;width:100%;height:100%;",baseClass:"form",gutters:!1,region:"center"});a.addChild(c);b.makePane(e.userInformation,
a);return d.hide()},error:function(a){return d.hide()}})})},makePane:function(a,d){var b,c;c=dijit.byId("userMaintenance-stackContainer");b=new dijit.layout.ContentPane({title:a,content:d});c.addChild(b);return c.selectChild(b)},getGridLayout:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:(new k).rowCountCellFormatter},{name:e.name,field:"name",width:"auto"},{name:e.email,field:"email",width:"200px"},{name:e.company,field:"company",width:"200px"},{name:e.assignedGroups,
field:"assignedGroups",width:"280px",formatter:function(a,d,b){return'<span style="font-weight: bold;">'+a+"</span>"}}]}})})}).call(this);
