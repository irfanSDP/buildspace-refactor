(function(){define("dojo/_base/declare dijit/layout/BorderContainer dijit/layout/TabContainer dijit/Toolbar dijit/form/Button dojo/request dojo/dom dojo/dom-attr dojo/_base/lang dojo/i18n!buildspace/nls/PrintLayoutSetting".split(" "),function(n,p,q,r,t,g,u,v,w,c){return n("buildspace.apps.PrintingLayoutSetting",buildspace.apps._App,{saveURL:"printLayoutSetting/saveSettings",init:function(d){d=this.layoutSettings=this.getSettings();this.baseWindow=new buildspace.widget.Window({title:c.projectLayoutSetting,
iconClass:this.iconClass,style:"padding:0px; width:100%; height:100%;"});d=this.renderTabs(d);this.baseWindow.addChild(d);this.baseWindow.show();return this.baseWindow.startup()},renderTabs:function(d){var b,a,h,f,m,e,l,k,g;a=0;m=this;h=[];b=[];l={headStyling:{title:c.headStyling,nameSpace:"HeadStylingFormatForm",dataName:"headSettings",id:"headSettings"},fontNumber:{title:c.fontNumFormat,nameSpace:"FontNumberFormatForm",dataName:"layoutSetting",id:"fontNumber"},pageFormat:{title:c.pageFormat,nameSpace:"PageFormatForm",
dataName:"layoutSetting",id:"pageFormat"},standardPhrase:{title:c.standardPhrases,nameSpace:"StandardPhrasesForm",dataName:"phrase",id:"standardPhrases"},headerFooter:{title:c.headerFooter,nameSpace:"HeaderFooterForm",dataName:"phrase",id:"headerFooter"}};k=new q({style:"width: 100%; height: 100%;",region:"center"});for(g in l)e=l[g],f=0===a?!0:!1,b[a]=new p({id:e.id,title:e.title,style:"height:100%; width:100%;",gutters:!1,selected:f}),h[a]=new buildspace.apps.PrintingLayoutSetting[e.nameSpace]({data:d[e.dataName],
region:"center",style:"overflow: auto;"}),f=new r({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"}),f.addChild(new t({label:c.save,iconClass:"icon-16-container icon-16-save",formCounter:a,nameSpace:e.nameSpace,onClick:function(){var a;return(a=h[this.formCounter].validateForm())?m.postForm(a):new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,content:c.validationMsg,style:"width: 340px;"})}})),b[a].addChild(f),b[a].addChild(h[a]),k.addChild(b[a]),a++;k.startup();
return k},getSettings:function(d){var b;this.projectId=d;b=void 0;g.get("printLayoutSetting/getSettings",{sync:!0,handleAs:"json",preventCache:!0}).then(function(a){return b=a},function(a){return console.log(a)});return b},postForm:function(d){var b;b=new buildspace.dialog.indeterminateProgressBar({title:"Processing..."});w.mixin(d,{_csrf_token:this.layoutSettings._csrf_token});b.show();return g.post(this.saveURL,{data:d,handleAs:"json"}).then(function(a){b.hide();return a.success?a.heads:new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,
content:a.error,style:"width: 340px;"})},function(a){b.hide();return new buildspace.dialog.dijitDialog({title:c.errorDialogTitle,content:c.serverErrorMsg,style:"width: 340px;"})})},updateFormNewIdValue:function(d,b){var a,c,f,g,e;c="ReserveWordForm"===b?"word[id]":"content[id]";if(null!=d){e=[];for(f in d)a=d[f],g=u.byId(c+"["+f+"]"),e.push(v.set(g,"value",a));return e}}})})}).call(this);
