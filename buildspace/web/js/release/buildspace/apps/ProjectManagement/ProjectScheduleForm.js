define("buildspace/apps/ProjectManagement/ProjectScheduleForm","dojo/_base/declare dojo/_base/lang dojo/html dojo/dom dojo/keys dojo/dom-style ./ImportProjectScheduleDialog dijit/form/Form dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/Textarea dijit/form/Select dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/projectScheduleForm.html dojo/i18n!buildspace/nls/ProjectManagement dojo/on".split(" "),function(h,e,
k,l,v,g,m,w,n,x,y,z,p,q,r,t,u,f,A){return h("buildspace.apps.ProjectManagement.ProjectScheduleForm",[p,q,r,t],{templateString:u,baseClass:"buildspace-form",region:"center",nls:f,dialogWidget:null,projectScheduleId:-1,project:null,subPackage:null,subPackageName:null,style:"padding:5px;overflow:auto;",constructor:function(a){this.inherited(arguments)},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);var a=this,b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+
"..."});b.show().then(function(){var c={id:a.projectScheduleId};a.project&&-1==a.projectScheduleId&&e.mixin(c,{pid:a.project.id});a.subPackage?(-1==a.projectScheduleId&&e.mixin(c,{sid:a.subPackage.id}),g.set(a.scheduleFormSubPackageName,"display","")):g.set(a.scheduleFormSubPackageName,"display","none");dojo.xhrGet({url:"projectManagement/projectScheduleForm",handleAs:"json",content:c,load:function(d){a.projectScheduleForm.setFormValues(d.formValues);(new n({name:"project_schedule[timezone]",store:new dojo.data.ItemFileReadStore({data:d.timezones}),
style:"padding:2px;width:240px;",required:!0,searchAttr:"name",value:d.formValues["project_schedule[timezone]"]})).placeAt(a.timezoneSelectDiv);b.hide()},error:function(a){b.hide()}})})},save:function(){var a=buildspace.dialog.indeterminateProgressBar({title:f.savingData+"..."}),b=this,c=dojo.formToObject(this.projectScheduleForm.id);this.projectScheduleForm.validate()&&a.show().then(function(){e.mixin(c,{id:b.projectScheduleId});b.subPackage&&-1==b.projectScheduleId&&e.mixin(c,{sid:b.subPackage.id});
dojo.xhrPost({url:"projectManagement/projectScheduleUpdate",content:c,handleAs:"json",load:function(d){dojo.query('[id^="error-project_schedule_"]').forEach(function(a){a.innerHTML=""});if(d.success)b.dialogWidget&&b.dialogWidget.hide(),dijit.byId("projectManagement-projectScheduleListGrid").reload();else for(var c in d.errors)k.set(l.byId("error-project_schedule_"+c),d.errors[c]);a.hide()},error:function(b){a.hide()}})})},importProjectSchedule:function(){this.dialogWidget.hide();(new m({project:this.project,
subPackage:this.subPackage})).show()},close:function(){},onCancel:function(){}})});
