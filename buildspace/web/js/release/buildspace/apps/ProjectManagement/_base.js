define("dojo/_base/declare dojo/when dojo/_base/lang dojox/grid/EnhancedGrid buildspace/widget/grid/Filter buildspace/widget/grid/cells/Formatter ./Builder dojo/i18n!buildspace/nls/ProjectManagement".split(" "),function(c,l,d,e,f,g,h,b){var k=c("buildspace.apps.ProjectManagement.ProjectListing",dijit.layout.BorderContainer,{style:"padding:0;margin:0;outline:none;width:100%;height:100%;",gutters:!1,gridOpts:{},postCreate:function(){this.inherited(arguments);d.mixin(this.gridOpts,{region:"center",borderContainerWidget:this,
canSort:function(a){return!1}});var a=this.grid=new e(this.gridOpts);this.addChild(new f({region:"top",grid:a,editableGrid:!1,filterFields:["title","reference","country","state"]}));this.addChild(new dijit.layout.ContentPane({style:"width:100%",content:a,region:"center"}))}});return c("buildspace.apps.ProjectManagement",buildspace.apps._App,{win:null,init:function(a){a=this.win=new buildspace.widget.Window({title:b.projectManagement+" > "+b.projectListing,onClose:dojo.hitch(this,"kill")});var c=new g,
d=new dojo.data.ItemFileWriteStore({url:"projectManagement/getProjects"});this.projectListing=new k({region:"center",gridOpts:{structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:c.rowCountCellFormatter,filterable:!1},{name:b.title,field:"title",width:"auto"},{name:b.reference,field:"reference",width:"120px",styles:"text-align: center;",autoComplete:!0},{name:b.country,field:"country",width:"120px",styles:"text-align: center;"},{name:b.state,field:"state",width:"120px",
styles:"text-align: center;"}],store:d,onRowDblClick:dojo.hitch(this,"projectListingDblClick")}});a.addChild(this.projectListing);a.show();a.startup()},projectListingDblClick:function(a){a=this.projectListing.grid.getItem(a.rowIndex);0<a.id&&this.createBuilderWin(a)},createBuilderWin:function(a){this.kill();this.project=a;this.win=new buildspace.widget.Window({title:b.projectManagement+" > "+buildspace.truncateString(a.title,100)+" ("+b.status+"::"+a.status[0].toUpperCase()+")",onClose:dojo.hitch(this,
"kill")});this.win.addChild(new h({project:a}));this.win.show();this.win.startup()},kill:function(){this.win&&"undefined"!=typeof this.win&&this.win.close()}})});
