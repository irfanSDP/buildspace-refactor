define("dojo/_base/declare dojo/html dijit/form/ToggleButton buildspace/apps/ProjectManagement/Builder ./GanttContainer dojo/i18n!buildspace/nls/ProjectManagement".split(" "),function(f,h,k,g,e,b){return f("buildspace.apps.Gantt",buildspace.apps._App,{win:null,project:null,projectSchedule:null,nonWorkingDays:null,init:function(a){this.project=a.project;this.projectSchedule=a.projectSchedule;this.nonWorkingDays=a.nonWorkingDays;this.planGanttContainer=new e({id:"planView-"+this.projectSchedule.id,
type:"planView",project:this.project,projectSchedule:this.projectSchedule,nonWorkingDays:this.nonWorkingDays});this.win=new buildspace.widget.Window({title:b.projectManagement+"::Gantt > "+buildspace.truncateString(this.project.title,100)+" ("+buildspace.truncateString(this.projectSchedule.title,100)+")",onClose:dojo.hitch(this,"kill")});a=new dijit.layout.BorderContainer({style:"padding:0;width:100%;height:100%;overflow:none;",gutters:!1});var c=this,d=new dijit.Toolbar({region:"top",style:"outline:none!important;border:0px;padding:2px;overflow:hidden;"});
d.addChild(new dijit.form.Button({label:b.backTo+" "+b.projectManagement,iconClass:"icon-16-container icon-16-directional_left",style:"outline:none!important;",onClick:function(a){return c.openBuilderWin(c.project)}}));d.addChild(new dijit.ToolbarSeparator);d.addChild(new dijit.form.ToggleButton({id:"toggleView-"+this.projectSchedule.id,label:b.switchToActualProgressView,iconClass:"icon-16-container icon-16-stats_bars",style:"outline:none!important;",onChange:function(a){if(a)return c.createActualProgressView();
c.createPlanProgressView()}}));a.addChild(d);a.addChild(this.planGanttContainer);this.container=a;this.win.addChild(a);this.win.show();this.win.startup()},createActualProgressView:function(){dijit.byId("toggleView-"+this.projectSchedule.id).set("label",b.switchToPlanProgressView);var a=dijit.byId("planView-"+this.projectSchedule.id);a&&a.destroyRecursive();dijit.byId("actualView-"+this.projectSchedule.id)||this.container.addChild(new e({id:"actualView-"+this.projectSchedule.id,type:"actualView",project:this.project,
projectSchedule:this.projectSchedule,nonWorkingDays:this.nonWorkingDays}))},createPlanProgressView:function(){dijit.byId("toggleView-"+this.projectSchedule.id).set("label",b.switchToActualProgressView);var a=dijit.byId("actualView-"+this.projectSchedule.id);a&&a.destroyRecursive();dijit.byId("planView-"+this.projectSchedule.id)||(this.planGanttContainer=new e({id:"planView-"+this.projectSchedule.id,type:"planView",project:this.project,projectSchedule:this.projectSchedule,nonWorkingDays:this.nonWorkingDays}),
this.container.addChild(this.planGanttContainer))},openBuilderWin:function(a){this.kill();this.project=a;this.win=new buildspace.widget.Window({title:b.projectManagement+" > "+buildspace.truncateString(a.title,100)+" ("+b.status+"::"+a.status[0].toUpperCase()+")",onClose:dojo.hitch(this,"kill")});this.win.addChild(new g({project:a}));this.win.show();this.win.startup()},kill:function(){"undefined"!=typeof this.win&&this.win.close()}})});
