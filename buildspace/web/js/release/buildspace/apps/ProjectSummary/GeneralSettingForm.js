define("buildspace/apps/ProjectSummary/GeneralSettingForm","dojo/_base/declare dojo/html dojo/on dojo/dom dojo/dom-style dijit/form/Form dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dijit/form/CheckBox dojo/text!./templates/GeneralSettingForm.html dojo/currency dojo/i18n!buildspace/nls/ProjectSummary".split(" "),function(e,f,g,h,b,k,l,r,m,n,t,u,p,v,c){var q=e("buildspace.apps.ProjectSummary._GeneralSettingForm",[k,l,m,
n,dojox.form.manager._Mixin,dojox.form.manager._NodeMixin,dojox.form.manager._ValueMixin,dojox.form.manager._DisplayMixin],{templateString:p,project:null,region:"center",style:"outline:none;padding:0px;margin:0px;border:none;overflow:auto;",baseClass:"buildspace-form",nls:c,formValues:[],startup:function(){this.inherited(arguments);this.setFormValues(this.formValues)},postCreate:function(){this.inherited(arguments);this.toggleTaxOptionsVisibility(this.formValues["project_summary_general_setting[include_tax]"]?
"":"none");var a=this;g(this.includeTaxNode,"change",function(d){a.toggleTaxOptionsVisibility(this.checked?"":"none")});this.project.status_id!=buildspace.apps.ProjectSummary.ProjectStatus.STATUS_PRETENDER&&(this.projectTitleNode.set("disabled",!0),this.additionalDescriptionNode.set("disabled",!0),this.summaryTitleNode.set("disabled",!0),this.includeAdditionalDescription.set("disabled",!0),this.includePrintingDateNode.set("disabled",!0),this.includeStateAndCountryNode.set("disabled",!0),this.carriedToNextPageNode.set("disabled",
!0),this.continuedFromPreviousPageNode.set("disabled",!0),this.pageNumberPrefixNode.set("disabled",!0),this.includeTaxNode.set("disabled",!0),this.taxNameNode.set("disabled",!0),this.taxPercentageNode.set("disabled",!0))},submit:function(){var a=dojo.formToObject(this.id),d=buildspace.dialog.indeterminateProgressBar({title:c.saving+". "+c.pleaseWait+"..."});a.pid=this.project.id;this.validate()&&(d.show(),dojo.xhrPost({url:"projectSummary/generalSettingUpdate",content:a,handleAs:"json",load:function(a){dojo.query('[id^="error-project_summary_general_setting_"]').forEach(function(a){a.innerHTML=
""});if(!a.success)for(var b in a.errors){var c=a.errors[b];f.set(h.byId("error-project_summary_general_setting_"+b),c)}d.hide()},error:function(a){d.hide()}}))},toggleTaxOptionsVisibility:function(a){b.set(this.lblTaxName,"display",a);b.set(this.txtTaxName,"display",a);b.set(this.lblTaxPercentage,"display",a);b.set(this.txtTaxPercentage,"display",a)}});return e("buildspace.apps.ProjectSummary.GeneralSettingForm",dijit.layout.BorderContainer,{project:null,region:"center",style:"outline:none;padding:0px;margin:0px;border:none;",
formValues:{},constructor:function(a){a.project.status_id!=buildspace.apps.ProjectSummary.ProjectStatus.STATUS_PRETENDER&&(this.style="outline:none;padding:10px;margin:0px;border:none;");this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=q({project:this.project,formValues:this.formValues});if(this.project.status_id==buildspace.apps.ProjectSummary.ProjectStatus.STATUS_PRETENDER){var b=new dijit.Toolbar({region:"top",style:"outline:none!important;border-left:0px;border-right:0px;border-top:0px;padding:2px;overflow:hidden;"});
b.addChild(new dijit.form.Button({label:c.save,iconClass:"icon-16-container icon-16-save",style:"outline:none!important;",onClick:dojo.hitch(a,"submit")}));this.addChild(b)}this.addChild(a)}})});
