define("buildspace/apps/Location/ProjectLocationManagement/BillSettings/BillSettingsContainer","dojo/_base/declare dojo/_base/lang dojo/dom-construct dijit/layout/TabContainer dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/billSettingsForm.html dojo/i18n!buildspace/nls/Location".split(" "),function(g,h,f,k,l,m,n,p,e){var q=g("buildspace.apps.Location.ProjectLocationManagement.BillSettings.BillSettingsForm",[l,m,n],{templateString:p,baseClass:"buildspace-form",
nls:e,billColumnSettings:null,billId:null,baseApp:null,_csrf_token:null,postCreate:function(){this.inherited(arguments);var a=this,c=!1;dojo.forEach(this.billColumnSettings,function(d){if(d.location_bill_settings.use_original_qty){var b="checked";var e=null}else b=null,e="checked";b='<tr><td class="gridCell counter" style="width:30px;text-align: center;vertical-align: middle;"><h1></h1></td>\n<td class="gridCell" style="vertical-align:middle;padding-right:5px;">'+d.name+'</td>\n<td class="gridCell" style="width:60px;text-align: center;vertical-align: middle;">'+
d.quantity+'</td>\n<td class="gridCell" style="width:80px;text-align:center;vertical-align: middle;">\n<input name="bill_column_setting-'+d.id+'"  '+b+' value="1" type="radio" data-dojo-type="dijit/form/RadioButton" />\n</td>';d.remeasurement_quantity_enabled&&(c=!0,b+='<td class="gridCell" style="width:80px;text-align: center;vertical-align:middle;"><input name="bill_column_setting-'+d.id+'" '+e+' value="0" type="radio" data-dojo-type="dijit/form/RadioButton" /></td>');!d.remeasurement_quantity_enabled&&
c&&(b+='<td class="gridCell" style="width:80px;text-align: center;vertical-align:middle;"></td>');f.place(f.toDom(b+"</tr>"),a.LocationBillSettingsTableBody)});if(c){var b=f.toDom('<th class="gridCell" style="text-align: center;" rowspan="2">'+e.useQty2+"</th>");f.place(b,this.LocationBillSettingsTableHeader)}},save:function(){var a=dojo.formToObject(this.LocationBillSettingsForm.id),c=buildspace.dialog.indeterminateProgressBar({title:e.savingData+"..."});h.mixin(a,{_csrf_token:this._csrf_token,bid:this.billId});
var b=this.baseApp;c.show().then(function(){dojo.xhrPost({url:"location/locationBillSettingUpdate",content:a,handleAs:"json",load:function(a){b&&b.resetBQLocationTab();c.hide()},error:function(a){c.hide()}})})}});return g("buildspace.apps.Location.ProjectLocationManagement.BillSettings.BillSettingsContainer",dijit.layout.BorderContainer,{style:"padding:0;margin:0;width:100%;height:100%;",gutters:!1,project:null,baseApp:null,postCreate:function(){this.inherited(arguments);var a=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+
"..."}),c=this;a.show().then(function(){var b=new k({region:"center",style:"padding:0;margin:0;width:100%;height:100%;border:none;outline:none;"});dojo.xhrGet({url:"location/getBillProperties",handleAs:"json",preventCache:!0,content:{pid:c.project.id},load:function(d){0<d.length&&dojo.forEach(d,function(a){c.createBillForm(a,b)});c.addChild(b);a.hide()},error:function(b){a.hide()}})})},createBillForm:function(a,c){var b=new dijit.layout.BorderContainer({id:"accPane-LocationBillSettings_"+a.bill_id,
title:a.bill_title,style:"padding:0;margin:0;width:100%;height:100%;",gutters:!1});a=new q({billColumnSettings:a.bill_column_settings,billId:a.bill_id,_csrf_token:a._csrf_token,region:"center",baseApp:this.baseApp});var d=new dijit.Toolbar({region:"top",style:"border-top:none;border-left:none;border-right:none;padding:2px;width:100%;"});d.addChild(new dijit.form.Button({label:e.save,iconClass:"icon-16-container icon-16-save",style:"outline:none!important;",onClick:dojo.hitch(a,"save")}));b.addChild(d);
b.addChild(a);c.addChild(b)}})});
