define("buildspace/apps/Editor/ProjectProperties","dojo/_base/declare dojo/html dojo/dom dijit/form/Form dijit/focus dojox/grid/EnhancedGrid dijit/form/ValidationTextBox dijit/form/Textarea dijit/form/DateTextBox dijit/form/Select dijit/form/FilteringSelect dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/projectProperties.html dojo/i18n!buildspace/nls/Tendering".split(" "),function(e,r,t,u,f,g,v,w,x,y,z,h,k,l,m,n,c){var p=e("buildspace.apps.Editor.MainInfoFormWidget",
[h,k,l,m],{templateString:n,baseClass:"buildspace-form",region:"center",style:"border:none;padding:5px;overflow:auto;",project:null,nls:c,close:function(){},onCancel:function(){}}),q=e("buildspace.apps.Editor.PrintRevisionGrid",g,{project:null,workArea:null,style:"border-top:none;",canSort:function(a){return!1},postCreate:function(){this.inherited(arguments);this.on("CellClick",function(a){var b=a.cell.field;a=this.getItem(a.rowIndex);"current_print"!=b||!a||isNaN(parseInt(String(a.id)))||a.current_print[0]||
this.changeCurrentViewingRevision(a)})},changeCurrentViewingRevision:function(a){var b=this,d=buildspace.dialog.indeterminateProgressBar({title:c.pleaseWait+"..."});f.curNode.blur();f.curNode=null;d.show().then(function(){dojo.xhrPost({url:"changeCurrentPrintRevision",content:{id:a.id,pid:b.project.id,_csrf_token:a._csrf_token},handleAs:"json",load:function(a){if(a.success){var c=b.store;dojo.forEach(a.items,function(a){c.fetchItemByIdentity({identity:a.id,onItem:function(b){for(var d in a)b.hasOwnProperty(d)&&
d!=c._getIdentifierAttribute()&&c.setValue(b,d,a[d])}})});c.save();b.workArea.removeBillTab()}d.hide()},error:function(a){d.hide()}})})}});return e("buildspace.apps.Editor.ProjectProperties",dijit.layout.BorderContainer,{region:"center",style:"padding:0;margin:0;width:100%;height:100%;",gutters:!1,project:null,workArea:null,postCreate:function(){this.inherited(arguments);var a=this.projectMainInfoForm=new p({project:this.project,region:"top"}),b=new q({project:this.project,workArea:this.workArea,
region:"center",structure:[{name:"No.",field:"count",width:"30px",styles:"text-align:center;"},{name:c.billRevisionDescription,field:"revision",width:"auto"},{name:c.currentPrintingRevision,field:"current_print",width:"150px",styles:"text-align:center;vertical-align:middle;padding:5px;",formatter:{printRevision:function(a,b,e){return(a=this.grid.getItem(b))&&!isNaN(parseInt(a.id.toString()))?a.current_print[0]?'<span class="icon-16-container icon-16-checkmark2" style="margin: 0 auto;display: block;"></span>':
'<a href="javascript:void(0);">'+c.printThisRevision+"</a>":"&nbsp;"}}.printRevision}],store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"projectRevisions/"+this.project.id})});this.addChild(a);this.addChild(b)}})});
