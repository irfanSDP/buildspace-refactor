define("buildspace/apps/StockOut/StockOutDialog/StockOutFormDialog","dojo/_base/declare dojo/_base/lang dojo/keys dojo/parser dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Toolbar dijit/form/Button dijit/layout/BorderContainer dijit/form/ValidationTextBox dijit/form/DateTextBox dojo/dom-style dojo/dom-form dojo/request dojox/validate/web dojox/form/Manager dojo/text!./templates/stockOutForm.html dojo/i18n!../../../nls/StockOut".split(" "),function(h,
k,n,A,p,q,r,t,u,v,w,B,C,f,D,x,E,F,y,e){var z=h("buildspace.apps.StockOut.StockOutForm",[p,q,r,t],{baseClass:"buildspace-form",templateString:y,region:"center",style:"overflow: auto;",project:null,stockOutGrid:null,formInfo:null,nls:e,dialogContainer:null,stockOutUsedQuantityId:-1,newStockOutUsedQuantityId:-1,startup:function(){this.inherited(arguments);this.stockOutForm.setFormValues(this.formInfo)},clearInputErrorMsgs:function(){var a;var c={project_structure_id:null,stock_out_date:null};for(a in c){var d=
this["error-"+a];if(null==d)return!1;d.innerHTML=c[a];f.set(d,"display","none")}},save:function(){var a=this;this.clearInputErrorMsgs();if(!this.stockOutForm.validate())return!1;var c=dojo.formToObject(this.stockOutForm.id);0<parseInt(a.newStockOutUsedQuantityId)?k.mixin(c,{stockOutUsedQuantityId:a.newStockOutUsedQuantityId}):k.mixin(c,{stockOutUsedQuantityId:a.stockOutUsedQuantityId});var d=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});d.show().then(function(){x.post("stockOut/saveStockOutFormInformation/projectId/"+
parseInt(a.project.id),{data:c,handleAs:"json"}).then(function(b){var g;d.hide();if(b.success&&0<parseInt(b.id))a.stockOutGrid.refreshGrid(),a.newStockOutUsedQuantityId=b.id,a.dialogContainer.hide();else{var l=[];for(g in b.errorMsgs){var m=a["error-"+g];m.innerHTML=b.errorMsgs[g];l.push(f.set(m,"display","block"))}return l}},function(b){d.hide()})})}});return h("buildspace.apps.StockOut.StockOutFormDialog",dijit.Dialog,{title:e.addNewStockOut,style:"padding:0px;margin:0px;",project:null,stockOutGrid:null,
formInfo:null,buildRendering:function(){var a=this.createContent();this.content=a;a.startup();this.inherited(arguments)},postCreate:function(){f.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},createContent:function(){var a=this;var c=new w({style:"width:480px;height:130px;padding:0;margin:0;",gutters:!1});var d=new z({dialogContainer:a,project:a.project,stockOutGrid:a.stockOutGrid,formInfo:this.formInfo});var b=new u({region:"top",
style:"outline:none!important;padding:2px;overflow:hidden;"});b.addChild(new v({label:e.save,iconClass:"icon-16-container icon-16-save",onClick:function(){d.save()}}));b.addChild(new dijit.ToolbarSeparator);b.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",onClick:function(){a.hide()}}));c.addChild(b);c.addChild(d);return c},_onKey:function(a){a.keyCode===n.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()}})});
