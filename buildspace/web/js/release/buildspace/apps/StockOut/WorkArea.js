define("buildspace/apps/StockOut/WorkArea","dojo/_base/declare dojo/request dijit/layout/ContentPane dijit/layout/BorderContainer dijit/layout/TabContainer buildspace/widget/grid/cells/Formatter dojox/grid/enhanced/plugins/Rearrange buildspace/widget/grid/plugins/FormulatedColumn dijit/Toolbar dijit/form/Button buildspace/widget/grid/Filter ./StockOutItemGridContainer ./StockOutDialog/StockOutListingDialog dojo/i18n!../../nls/StockOut".split(" "),function(n,t,A,u,v,p,w,x,B,C,q,y,z,h){var r=n("buildspace.apps.StockOut.ResourceGrid",
dojox.grid.EnhancedGrid,{style:"border-top:none;",keepSelection:!0,rowSelector:"0px",region:"center",stockOutWorkAreaContainer:null,project:null,constructor:function(){this.rearranger=w(this,{});this.formulatedColumn=x(this,{})},canSort:function(){return!1},refreshGrid:function(){this.store.save();this.store.close();this.setStore(this.store)}});return n("buildspace.apps.StockOut.WorkArea",v,{region:"center",style:"padding:0px;margin:0px;border:0px;width:100%;height:100%;",project:null,gutters:!1,
postCreate:function(){this.inherited(arguments);var a=this;var b=new buildspace.dialog.indeterminateProgressBar({title:h.processing+"..."});b.show().then(function(){return t.get("stockOut/getResourceWithStockInsByProject/projectId/"+parseInt(a.project.id),{handleAs:"json"}).then(function(c){a.createContentPaneTab("main-stockOutResourceList",h.resource,a.createResourceContainer(c),!1);c=dijit.byId("main-stockOutResourceList");a.selectChild(c);b.hide()},function(c){b.hide()})})},createResourceContainer:function(a,
b){null==b&&(b=this);a=new dojo.data.ItemFileWriteStore({url:"stockOut/getResourceWithStockInsByProject/projectId/"+parseInt(this.project.id),clearOnClose:!0,urlPreventCache:!0});var c=new r({structure:b.getResourceGridLayout(),store:a,project:this.project,projectId:parseInt(this.project.id),stockOutWorkAreaContainer:b,onRowDblClick:function(e){var f;e=this.getItem(e.rowIndex);if(0<parseInt(e.id)){var k="main-stockOutResourceList-"+parseInt(e.id);(f=dijit.byId(k))?b.selectChild(f):b.createContentPaneTab(k,
e.name[0],b.createResourceTradeGridView(e),!0)}}});a=new q({region:"top",grid:c,editableGrid:!1,filterFields:[{name:h.description}]});var g=new dijit.Toolbar({region:"top",style:"padding:2px;border-bottom:none;width:100%;"});g.addChild(new dijit.form.Button({label:h.manageStockOut,iconClass:"icon-16-container icon-16-import",onClick:function(){(new z({title:h.manageStockOut,project:b.project})).show()}}));var d=new u({region:"top",gutters:!1});d.addChild(a);d.addChild(g);d.addChild(c);return d},createResourceTradeGridView:function(a,
b){var c;null==b&&(b=this);var g="stockOutContainerPane-"+parseInt(a.id);(c=dijit.byId(g+"-stackContainer"))&&dijit.byId(g+"-stackContainer").destroyRecursive();c=b.stackContainer=new dijit.layout.StackContainer({id:g+"-stackContainer",style:"width:100%;height:100%;",region:"center"});var d=new dojo.data.ItemFileWriteStore({url:"stockOut/getResourceTradeWithStockInsByProject/projectId/"+parseInt(b.project.id)+"/resourceId/"+parseInt(a.id),clearOnClose:!0,urlPreventCache:!0});var e=new r({structure:b.getResourceTradeGridLayout(),
project:b.project,projectId:parseInt(b.project.id),stockOutWorkAreaContainer:b,resource:a,store:d,onRowDblClick:function(f){f=this.getItem(f.rowIndex);0<parseInt(f.id)&&b.createResourceItemGridView(a,f)}});d=new dijit.layout.BorderContainer({style:"padding:0px;width:100%;height:100%;",baseClass:"form",gutters:!1,region:"center"});d.addChild(new q({region:"top",grid:e,editableGrid:!1,filterFields:[{description:h.description}]}));d.addChild(e);d=new dijit.layout.ContentPane({title:a.name,content:d});
c.addChild(d);d=new dijit.layout.StackController({region:"top",containerId:g+"-stackContainer"});d=new dijit.layout.ContentPane({style:"padding: 0px; overflow: hidden;",baseClass:"breadCrumbTrail",region:"top",content:d});e=new dijit.layout.BorderContainer({style:"padding:0px;width:100%;height:100%;",baseClass:"form",gutters:!1,region:"center"});e.addChild(c);e.addChild(d);dojo.subscribe(g+"-stackContainer-selectChild","",function(f){var k,m;if(k=dijit.byId(g+"-stackContainer")){var l=k.getChildren();
f=dojo.indexOf(l,dijit.byId(f.id))+1;for(m=[];l.length>f;)k.removeChild(l[f]),l[f].destroyRecursive(),m.push(f+=1);return m}});e.startup();return e},createResourceItemGridView:function(a,b,c){null==c&&(c=this);var g=new y({project:this.project,resource:a,resourceTrade:b,stockOutWorkAreaContainer:c});c.makePane(a,b.description[0],g)},getResourceGridLayout:function(){var a=new p;return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:a.rowCountCellFormatter,noresize:!0},{name:h.description,
field:"name",width:"auto",formatter:a.treeCellFormatter,noresize:!0},{name:h.totalCost,field:"total_cost",width:"140px",styles:"text-align: right;",formatter:a.unEditableCurrencyCellFormatter,noresize:!0}]},getResourceTradeGridLayout:function(){var a=new p;return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:a.rowCountCellFormatter,noresize:!0},{name:h.description,field:"description",width:"auto",formatter:a.treeCellFormatter,noresize:!0},{name:h.totalCost,field:"total_cost",
width:"140px",styles:"text-align: right;",formatter:a.unEditableCurrencyCellFormatter,noresize:!0}]},createContentPaneTab:function(a,b,c,g){a=new dijit.layout.ContentPane({closable:g,id:a,style:"padding:0px;border:0px;margin:0px;overflow:hidden;",title:buildspace.truncateString(b,60),content:c});this.addChild(a);this.selectChild(a)},makePane:function(a,b,c){a=dijit.byId("stockOutContainerPane-"+parseInt(a.id)+"-stackContainer");b=new dijit.layout.ContentPane({title:buildspace.truncateString(b,35),
content:c});a.addChild(b);a.selectChild(b)}})});
