var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var f=0;return function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,e){if(a==Array.prototype||a==Object.prototype)return a;a[f]=e.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<a.length;++f){var e=a[f];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,f){var e=$jscomp.propertyToPolyfillSymbol[f];if(null==e)return a[f];e=a[e];return void 0!==e?e:a[f]};
$jscomp.polyfill=function(a,f,e,k){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,f,e,k):$jscomp.polyfillUnisolated(a,f,e,k))};$jscomp.polyfillUnisolated=function(a,f,e,k){e=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var l=a[k];if(!(l in e))return;e=e[l]}a=a[a.length-1];k=e[a];f=f(k);f!=k&&null!=f&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(a,f,e,k){var l=a.split(".");a=1===l.length;k=l[0];k=!a&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var z=0;z<l.length-1;z++){var G=l[z];if(!(G in k))return;k=k[G]}l=l[l.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?k[l]:null;f=f(e);null!=f&&(a?$jscomp.defineProperty($jscomp.polyfills,l,{configurable:!0,writable:!0,value:f}):f!==e&&($jscomp.propertyToPolyfillSymbol[l]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(l):$jscomp.POLYFILL_PREFIX+l,l=
$jscomp.propertyToPolyfillSymbol[l],$jscomp.defineProperty(k,l,{configurable:!0,writable:!0,value:f})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var f=function(l,z){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:z})};f.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new f("jscomp_symbol_"+(l||"")+"_"+e++,l)};return k},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<f.length;e++){var k=$jscomp.global[f[e]];"function"===typeof k&&"function"!=typeof k.prototype[a]&&$jscomp.defineProperty(k.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,f){a instanceof String&&(a+="");var e=0,k=!1,l={next:function(){if(!k&&e<a.length){var z=e++;return{value:f(z,a[z]),done:!1}}k=!0;return{done:!0,value:void 0}}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(f,e){return e})}},"es8","es3");
define("buildspace/apps/Tendering/BillManager","dojo/_base/declare dojo/dom-style dojo/when dojo/currency dijit/layout/AccordionContainer dijit/layout/ContentPane dojox/grid/EnhancedGrid ./BillManager/BillPropertiesForm ./BillManager/BillGrid ./BillManager/buildUpGrid buildspace/apps/ProjectBuilder/BillManager/ScheduleOfQuantityGrid ./BillManager/buildUpQuantityGrid ./BillManager/buildUpRateSummary ./BillManager/buildUpQuantitySummary ./BillManager/itemHtmlEditorDialog ./BillManager/primeCostRateDialog ./BillManager/lumpSumPercentDialog ./BillManager/AddResourceCategoryDialog ./BillPrintoutSetting/standardPhrases buildspace/widget/grid/cells/Formatter dojo/aspect dojo/i18n!buildspace/nls/Tendering".split(" "),function(a,
f,e,k,l,z,G,K,H,L,M,N,O,P,Q,R,S,T,U,I,V,h){var W=a("buildspace.apps.Tendering.BillPrintingSettingContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;margin:0px;border:0px;height:100%;",gutters:!1,bill:null,postCreate:function(){this.inherited(arguments);var c=this.standardPhrasesForm=new U({billId:String(this.bill.id)});this.addChild(c)}}),X=a("buildspace.apps.ProjectBuilder.BillPropertiesContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;margin:0px;border:0px;height:100%;",
gutters:!1,bill:null,projectBreakdownGrid:null,billElementObj:null,postCreate:function(){this.inherited(arguments);var c=this.billPropertiesForm=K({billId:String(this.bill.id),projectBreakdownGrid:this.projectBreakdownGrid,billElementObj:this.billElementObj,locked:!0});this.addChild(c)}}),Y=a("buildspace.apps.Tendering.BillElementContainer",dijit.layout.BorderContainer,{style:"padding:0;margin:0;border:none;width:100%;height:100%;",gutters:!1,bill:null,rootProject:null,bqVersion:0,columnData:null,
projectBreakdownGrid:null,currentBQAddendumId:-1,currentBillLockedStatus:!1,currentBillVersion:0,currentPrintableVersion:0,postCreate:function(){this.inherited(arguments);this.createElementGrid();var c=String(this.bill.id);dojo.subscribe("billGrid"+c+"-stackContainer-selectChild","",function(q){var d=dijit.byId("billGrid"+c+"-stackContainer");if(d){var b=d.getChildren(),n=dojo.indexOf(b,q);n+=1;if(b.length>n){for(;b.length>n;){d.removeChild(b[n]);b[n].destroyDescendants();b[n].destroyRecursive();
n+=1;var w=dijit.byId("add_resource_category_"+c+"-btn");w&&w.destroy()}if(q.grid){var p=q.grid.selection.selectedIndex;q.grid.store.save();q.grid.store.close();var r=V.after(q.grid,"_onFetchComplete",function(){r.remove();-1<p&&(this.scrollToRow(p),this.selection.setSelected(p,!0))});q.grid.sort()}}}})},createElementGrid:function(){var c=dijit.byId("billGrid"+String(this.bill.id)+"-stackContainer");c&&dijit.byId("billGrid"+String(this.bill.id)+"-stackContainer").destroyRecursive();c=this.stackContainer=
new dijit.layout.StackContainer({style:"border:0px;width:100%;height:100%;",region:"center",id:"billGrid"+String(this.bill.id)+"-stackContainer"});var q=dojo.data.ItemFileWriteStore({url:"billManager/getElementList/id/"+String(this.bill.id),clearOnClose:!0,urlPreventCache:!0}),d=this;dojo.xhrGet({url:"billManager/getBillInfo",handleAs:"json",content:{id:String(this.bill.id)}}).then(function(b){try{d.currentBQAddendumId=b.project_revision_status.id;d.currentBillLockedStatus=b.project_revision_status.locked_status;
d.currentBillVersion=b.project_revision_status.version;d.currentPrintableVersion=b.printable_project_revision_status.version;d.currentBillType=b.bill_type.type;var n=new H({stackContainerTitle:"Element",bill:d.bill,rootProject:d.rootProject,pageId:"element-page-"+String(d.bill.id),id:"element-page-container-"+String(d.bill.id),gridOpts:{store:q,typeColumns:b.column_settings,markupSettings:b.markup_settings,bqCSRFToken:b.bqCSRFToken,addUrl:"billManager/elementAdd",updateUrl:"billManager/elementUpdate",
rowUpdateUrl:"billManager/elementRowUpdate",deleteUrl:"billManager/elementDelete",pasteUrl:"billManager/elementPaste",currentBQAddendumId:d.currentBQAddendumId,currentBillLockedStatus:d.currentBillLockedStatus,currentBillVersion:d.currentBillVersion,currentPrintableVersion:d.currentPrintableVersion,currentBillType:d.currentBillType,currentGridType:"element",onRowDblClick:function(p){(p=this.getItem(p.rowIndex))&&0<parseInt(String(p.id))&&null!==String(p.description)&&""!==String(p.description)&&d.createItemGrid(p,
b,n)}}}),w=new dijit.layout.StackController({region:"top",containerId:"billGrid"+String(d.bill.id)+"-stackContainer"});d.addChild(c);d.addChild(new dijit.layout.ContentPane({style:"padding:0px;overflow:hidden;",baseClass:"breadCrumbTrail",region:"top",id:"billGrid"+String(d.bill.id)+"-controllerPane",content:w}))}catch(p){console.debug(p)}})},createItemGrid:function(c,q,d){var b=this,n={options:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM_TEXT,
buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT_TEXT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE_TEXT,
buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID_TEXT],values:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER,buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM,
buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT,buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE,buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID]},w={options:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_TEXT],values:[buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER]},p=new dojo.data.ItemFileWriteStore({url:"billManager/getItemList/id/"+c.id+"/bill_id/"+String(b.bill.id),clearOnClose:!0}),r=dojo.xhrGet({url:"billManager/getUnits/billId/"+
String(b.bill.id),handleAs:"json"}),A=buildspace.dialog.indeterminateProgressBar({title:h.pleaseWait+"..."});A.show();return e(r,function(x){A.hide();try{new H({stackContainerTitle:c.description,bill:b.bill,rootProject:b.rootProject,id:"item-page-container-"+String(b.bill.id),elementId:c.id,pageId:"item-page-"+String(b.bill.id),type:"tree",gridOpts:{store:p,escapeHTMLInData:!1,typeColumns:q.column_settings,markupSettings:q.markup_settings,elementGridStore:d,hierarchyTypes:n,hierarchyTypesForHead:w,
unitOfMeasurements:x,addUrl:"billManager/itemAdd",updateUrl:"billManager/itemUpdate",rowUpdateUrl:"billManager/itemRowUpdate",deleteUrl:"billManager/itemDelete",deleteRateUrl:"billManager/itemRateDelete",deleteQuantityUrl:"billManager/itemQuantityDelete",pasteUrl:"billManager/itemPaste",indentUrl:"billManager/itemIndent",outdentUrl:"billManager/itemOutdent",currentBQAddendumId:b.currentBQAddendumId,currentBillLockedStatus:b.currentBillLockedStatus,currentBillVersion:b.currentBillVersion,currentBillType:b.currentBillType,
currentGridType:"item",editableCellDblClick:function(v){var m=v.cell.field,g=this.getItem(v.rowIndex),t=this.store;if(g&&void 0!==g.project_revision_deleted_at&&g.project_revision_deleted_at[0])return!1;if("rate-value"==m&&0<parseInt(String(g.id)))parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_WORK_ITEM||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PROVISIONAL||
parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_NOT_LISTED||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE&&parseInt(String(b.rootProject.status_id))==buildspace.constants.STATUS_PRETENDER?b.createBuildUpRateContainer(g,t):parseInt(String(g.type))==
buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_PC_RATE?(new R({itemObj:g,billGridStore:t,elementGridStore:d,currentBillLockedStatus:b.currentBillLockedStatus,currentBillVersion:b.currentBillVersion,currentItemVersion:parseInt(String(g.version))})).show():parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT&&(new S({itemObj:g,billGridStore:t,elementGridStore:d,currentBillLockedStatus:b.currentBillLockedStatus,currentBillVersion:b.currentBillVersion,
currentItemVersion:parseInt(String(g.version))})).show();else{var B=!1,u=v.cell.billColumnSettingId,C=!1;m.match(/-quantity_per_unit-value/gi)?(B=buildspace.constants.QUANTITY_PER_UNIT_ORIGINAL,C=!0):m.match(/-quantity_per_unit_remeasurement-value/gi)&&(B=buildspace.constants.QUANTITY_PER_UNIT_REMEASUREMENT);if(B&&0<parseInt(String(g.id))&&"true"==g[u+"-include"][0]&&parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER&&parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N&&
parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID&&parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM&&parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE&&parseInt(String(g.type))!=buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_RATE_ONLY)if(0<parseInt(String(g.uom_id))){var D=dojo.xhrPost({url:"billBuildUpQuantity/getDimensionColumnStructure",content:{uom_id:parseInt(String(g.uom_id))},
handleAs:"json"}),y=buildspace.dialog.indeterminateProgressBar({title:h.pleaseWait+"..."});y.show().then(function(){D.then(function(F){b.createBuildUpQuantityContainer(g,F,u,B,t,d,C);y.hide()})})}else buildspace.dialog.alert(h.buildUpQtyAlert,h.pleaseSetUOM,60,300);"description"==m&&0<parseInt(String(g.id))&&(parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_ITEM_HTML_EDITOR||parseInt(String(g.type))==buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID)&&(new Q({itemObj:g,
billId:String(b.bill.id),billGridStore:t,currentBillLockedStatus:b.currentBillLockedStatus,currentBillVersion:b.currentBillVersion,currentItemVersion:parseInt(String(g.version))})).show()}}}})}catch(v){console.debug(v)}},function(x){})},createBuildUpRateContainer:function(c,q){var d=this,b=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:buildspace.currencyAbbreviation,n=new dijit.layout.BorderContainer({style:"padding:0px;width:100%;height:100%;border:0px;outline:none;",gutters:!1}),
w=new dijit.layout.AccordionContainer({id:"accordian_"+String(d.bill.id)+"_"+c.id+"-container",region:"center",style:"padding:0px;width:100%;height:100%;border:0px;outline:none;"}),p=dojo.xhrGet({url:"billBuildUpRate/resourceList/item_id/"+c.id,handleAs:"json"}),r=new I,A=dojo.xhrGet({url:"billBuildUpRate/getUnits",handleAs:"json"}),x=buildspace.dialog.indeterminateProgressBar({title:h.pleaseWait+"..."});x.show();A.then(function(v){e(p,function(m){if(0==m.length)w.addChild(new dijit.layout.ContentPane({title:h.emptyResourceCategoryTitle,
style:"padding:0px;border:0px;",doLayout:!1,id:"accPane-empty_resource-"+c.id,content:'<div style="text-align:center;"><p><h1>'+h.emptyResourceCategory+"</h1></p></div> "}));else{var g=new O({id:"buildUpRateSummary-"+c.id,itemId:c.id,container:n,billGridStore:q,_csrf_token:c._csrf_token,currentBillLockedStatus:d.currentBillLockedStatus});dojo.forEach(m,function(u){var C=new dojo.data.ItemFileWriteStore({url:"billBuildUpRate/getBuildUpRateItemList/bill_item_id/"+c.id+"/resource_id/"+u.id,clearOnClose:!0});
try{var D=new L({resource:u,BQItem:c,gridOpts:{itemId:c.id,addUrl:"billBuildUpRate/buildUpRateItemAdd",updateUrl:"billBuildUpRate/buildUpRateItemUpdate",deleteUrl:"billBuildUpRate/buildUpRateItemDelete",pasteUrl:"billBuildUpRate/buildUpRateItemPaste",store:C,buildUpSummaryWidget:g,structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:r.rowCountCellFormatter},{name:h.description,field:"description",width:"auto",editable:!0,cellType:"buildspace.widget.grid.cells.Textarea",
formatter:r.linkedCellFormatter},{name:h.number,field:"number-value",width:"100px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:r.formulaCurrencyCellFormatter},{name:h.constant,field:"constant-value",width:"100px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:r.formulaCurrencyCellFormatter},{name:h.qty,field:"quantity-value",width:"70px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",
formatter:r.formulaNumberCellFormatter},{name:h.unit,field:"uom_id",width:"70px",styles:"text-align:center;",editable:!0,cellType:"dojox.grid.cells.Select",options:v.options,values:v.values,formatter:r.linkedUnitIdCellFormatter},{name:h.rate,field:"rate-value",width:"120px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:r.formulaCurrencyCellFormatter},{name:h.total,field:"total",width:"120px",styles:"text-align:right;",formatter:r.linkedCurrencyCellFormatter},
{name:h.wastage+" (%)",field:"wastage-value",width:"70px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:r.formulaCurrencyCellFormatter},{name:h.lineTotal,field:"line_total",width:"120px",styles:"text-align:right;",formatter:r.linkedCurrencyCellFormatter}],currentBillLockedStatus:d.currentBillLockedStatus}});w.addChild(new dijit.layout.ContentPane({title:u.name+'<span style="color:blue;float:right;">'+b+"&nbsp;"+k.format(u.total_build_up)+"</span>",
style:"padding:0px;border:0px;",doLayout:!1,id:"accPane-"+u.id+"-"+c.id,content:D}))}catch(y){console.log(y)}});n.addChild(g)}n.addChild(w);if(m=dijit.byId("billGrid"+String(d.bill.id)+"-stackContainer")){var t=dijit.byId("billGrid"+String(d.bill.id)+"-controllerPane"),B=new dijit.form.Button({id:"add_resource_category_"+String(d.bill.id)+"-btn",label:h.addResourceCategory,style:"float:right;color:#333333!important;",iconClass:"icon-16-container icon-16-add",baseClass:"buildUpRateImportResourceCategory",
onClick:function(u){T({billId:String(d.bill.id),billItem:c,currencyAbbr:b,billGridStore:q,baseContainer:n}).show()}});t.addChild(B);t=document.createElement("div");t=new dojox.layout.ContentPane({title:buildspace.truncateString(c.description,60)+" ("+h.buildUpRate+")",style:"padding:0px;border:0px;",id:"buildUpRatePage-"+c.id,content:n,executeScripts:!0},t);m.addChild(t);m.selectChild("buildUpRatePage-"+c.id)}x.hide()})})},createBuildUpQuantityContainer:function(c,q,d,b,n,w,p){var r=this,A,x=new dijit.layout.BorderContainer({style:"padding:0;margin:0;width:100%;height:100%;border:none;outline:none;",
gutters:!1}),v=new dijit.layout.TabContainer({nested:!0,style:"padding:0;border:none;margin:0;width:100%;height:100%;",region:"center"}),m=new I;n=dojo.xhrGet({url:"billBuildUpQuantity/getLinkInfo/id/"+c.id+"/bcid/"+d+"/t/"+b,handleAs:"json"});var g=new dojo.data.ItemFileWriteStore({url:"billBuildUpQuantity/getBuildUpQuantityItemList/bill_item_id/"+c.id+"/bill_column_setting_id/"+d+"/type/"+b,clearOnClose:!0}),t=[buildspace.constants.SIGN_POSITIVE_TEXT,buildspace.constants.SIGN_NEGATIVE_TEXT],B=[buildspace.constants.SIGN_POSITIVE,
buildspace.constants.SIGN_NEGATIVE],u=!1,C=buildspace.dialog.indeterminateProgressBar({title:h.pleaseWait+"..."});var D=p&&(c.version[0]!=this.currentBillVersion||this.currentBillLockedStatus)?!0:!1;C.show();n.then(function(y){var F=[{name:"No.",field:"id",styles:"text-align:center;",width:"30px",formatter:m.rowCountCellFormatter},{name:h.description,field:"description",width:"auto",editable:!0,cellType:"buildspace.widget.grid.cells.Textarea"},{name:h.factor,field:"factor-value",width:"100px",styles:"text-align:right;",
editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:m.formulaNumberCellFormatter}];dojo.forEach(q,function(J){F.push({name:J.title,field:J.field_name,width:"100px",styles:"text-align:right;",editable:!0,cellType:"buildspace.widget.grid.cells.FormulaTextBox",formatter:m.formulaNumberCellFormatter})});F.push({name:h.total,field:"total",width:"100px",styles:"text-align:right;",formatter:m.numberCellFormatter});F.push({name:h.sign,field:"sign",width:"70px",styles:"text-align:center;",
editable:!0,cellType:"dojox.grid.cells.Select",options:t,values:B,formatter:m.signCellFormatter});var E=new P({itemId:c.id,billColumnSettingId:d,type:b,hasLinkedQty:y.has_linked_qty,container:x,_csrf_token:c._csrf_token,disableEditingMode:D});y.has_linked_qty&&(u=!0,A=M({title:h.scheduleOfQuantities,BillItem:c,billColumnSettingId:d,disableEditingMode:D,stackContainerId:"billGrid"+String(r.bill.id)+"-stackContainer",gridOpts:{qtyType:b,buildUpSummaryWidget:E,store:new dojo.data.ItemFileWriteStore({url:"billBuildUpQuantity/getScheduleOfQuantities/id/"+
c.id+"/bcid/"+d+"/type/"+b,clearOnClose:!0}),structure:[{name:"No.",field:"id",width:"30px",styles:"text-align:center;",formatter:m.rowCountCellFormatter},{name:h.description,field:"description",width:"auto",formatter:m.treeCellFormatter},{name:h.type,field:"type",width:"70px",styles:"text-align:center;",formatter:m.typeCellFormatter},{name:h.unit,field:"uom_id",width:"70px",styles:"text-align:center;",formatter:m.unitIdCellFormatter},{name:h.qty,field:"quantity-value",width:"100px",styles:"text-align:right;",
formatter:m.formulaNumberCellFormatter}]}}));v.addChild(new N({title:h.manualQtyItems,billColumnSettingId:d,BillItem:c,type:b,disableEditingMode:D,gridOpts:{addUrl:"billBuildUpQuantity/buildUpQuantityItemAdd",updateUrl:"billBuildUpQuantity/buildUpQuantityItemUpdate",deleteUrl:"billBuildUpQuantity/buildUpQuantityItemDelete",pasteUrl:"billBuildUpQuantity/buildUpQuantityItemPaste",store:g,structure:F,buildUpSummaryWidget:E}}));u&&v.addChild(A);x.addChild(v);x.addChild(E);if(y=dijit.byId("billGrid"+String(r.bill.id)+
"-stackContainer"))E=document.createElement("div"),E=new dojox.layout.ContentPane({title:buildspace.truncateString(c.description,60)+" ("+h.buildUpQuantity+" - "+c.uom_symbol+")",id:"buildUpQuantityPage-"+c.id,content:x,style:"padding:0px;border:0px;",grid:u?A.grid:null,executeScripts:!0},E),y.addChild(E),y.selectChild("buildUpQuantityPage-"+c.id);C.hide()})},reconstructBillContainer:function(){dijit.byId("billGrid"+String(this.bill.id)+"-controllerPane").destroyRecursive();dijit.byId("billGrid"+
String(this.bill.id)+"-stackContainer").destroyRecursive();this.createElementGrid()}});return a("buildspace.apps.Tendering.BillManager",dijit.layout.TabContainer,{region:"center",rootProject:null,nested:!0,style:"padding:0;border:none;margin:0;width:100%;height:100%;",bill:null,billLayoutSettingId:null,projectBreakdownGrid:null,postCreate:function(){this.inherited(arguments);var c=new Y({id:"bill_element_container_"+this.rootProject.id+"-bill-"+String(this.bill.id),title:h.elementTradeList,rootProject:this.rootProject,
bill:this.bill,bqVersion:0,projectBreakdownGrid:this.projectBreakdownGrid});this.addChild(c);this.addChild(new X({title:h.billProperties,bill:this.bill,projectBreakdownGrid:this.projectBreakdownGrid,billElementObj:c}));parseInt(String(this.rootProject.status_id))!=buildspace.apps.Tendering.ProjectStructureConstants.STATUS_IMPORT&&this.addChild(new W({title:h.standardPhrases,bill:this.bill}))}})});
