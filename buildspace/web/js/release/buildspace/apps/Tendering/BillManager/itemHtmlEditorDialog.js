define("buildspace/apps/Tendering/BillManager/itemHtmlEditorDialog","dojo/_base/declare dojo/_base/lang dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dijit/form/Form dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Editor dojox/editor/plugins/TablePlugins dijit/_editor/plugins/TextColor dojo/text!./templates/itemHtmlEditorForm.html dojo/i18n!buildspace/nls/Tendering".split(" "),function(e,r,t,u,v,g,h,w,k,l,m,n,x,y,z,p,b){var q=e("buildspace.apps.Tendering.BillManager.ItemHtmlEditorForm",
[k,l,m,n],{templateString:p,style:"outline:none;",itemObj:null,billId:-1,nls:b,billGridStore:null,region:"center",disableEditingMode:!1,postCreate:function(){this.inherited(arguments);this.htmlEditorNode.set("value",this.itemObj.description[0]);this.htmlEditorNode.set("disabled",this.disableEditingMode)},submit:function(a){var c=buildspace.dialog.indeterminateProgressBar({title:b.savingData+"..."}),d=this,f=this.billGridStore,e={url:"billManager/itemUpdate",content:{attr_name:"description",val:this.htmlEditorNode.value,
id:this.itemObj.id,bill_id:this.billId,_csrf_token:this.itemObj._csrf_token},handleAs:"json",load:function(b){b.success&&f.fetchItemByIdentity({identity:d.itemObj.id,onItem:function(a){f.setValue(a,"description",b.data.description);f.save()}});c.hide();a.hide()},error:function(b){c.hide();a.hide()}};c.show();dojo.xhrPost(e)}});return e("buildspace.apps.Tendering.BillManager.ItemHtmlEditorDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",title:b.itemDescription,itemObj:null,billId:-1,billGridStore:null,
currentBillLockedStatus:!1,currentBillVersion:0,currentItemVersion:0,disableEditingMode:!1,constructor:function(a){if(a.currentItemVersion!=a.currentBillVersion||a.currentBillLockedStatus)this.disableEditingMode=!0},buildRendering:function(){var a=this.createContent();a.startup();this.content=a;this.inherited(arguments)},postCreate:function(){h.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(a){a.keyCode==g.ESCAPE&&
dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()},createContent:function(){var a=new dijit.layout.BorderContainer({style:"padding:0px;width:850px;height:350px;",gutters:!1}),c=new q({itemObj:this.itemObj,billId:this.billId,billGridStore:this.billGridStore,disableEditingMode:this.disableEditingMode}),d=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});d.addChild(new dijit.form.Button({label:b.save,iconClass:"icon-16-container icon-16-save",style:"outline:none!important;",
onClick:dojo.hitch(c,"submit",this),disabled:this.disableEditingMode}));d.addChild(new dijit.ToolbarSeparator);d.addChild(new dijit.form.Button({label:b.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));a.addChild(d);a.addChild(c);return a}})});
