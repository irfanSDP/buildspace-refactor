define("buildspace/apps/RationalizeRateReport/Builder","../../../dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/keys dojo/on ./WorkArea dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem dojo/when buildspace/apps/TenderingReport/Builder dojo/i18n!buildspace/nls/RationalizeRate".split(" "),function(g,m,n,p,q,r,h,t,u,v,w,k,f){var l=g("buildspace.apps.RationalizeRateReport.Explorer",dijit.EditableTree,{splitter:!0,region:"left",container:null,openOnClick:!1,labelAttr:"name",
rootProject:{},autoExpand:!0,billElementObj:null,style:"background-color:#e5e5e5;width:230px;height:100%;",constructor:function(a){this.inherited(arguments);var c=new dojo.data.ItemFileWriteStore({url:"tendering/getProjectStructure/id/"+a.rootProject.id}),b=new dijit.tree.ForestStoreModel({store:c,rootId:a.rootProject.id,rootLabel:buildspace.truncateString(a.rootProject.title,200),childrenAttrs:["__children"]});this.getIconClass=dojo.hitch(c,function(a,b){return a.root||a.type==buildspace.apps.RationalizeRateReport.ProjectStructureConstants.TYPE_LEVEL?
b?"icon-16-container icon-16-file":"icon-16-container icon-16-folder":a.type==buildspace.apps.RationalizeRateReport.ProjectStructureConstants.TYPE_BILL?"icon-16-container icon-16-list":a.type==buildspace.apps.RationalizeRateReport.ProjectStructureConstants.TYPE_SUPPLY_OF_MATERIAL_BILL?"icon-16-container icon-16-spreadsheet":"icon-16-container icon-16-document"});this.model=b},createBill:function(a,c){var b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."}),e=this,d={url:"tendering/createBill",
content:{parent_id:a.id,type:c,_csrf_token:a._csrf_token},handleAs:"json",load:function(c){if(c.success){var d=e.model;a.root?d.newItem(c.item):d.newItem(c.item,a);dijit.byId("main-project_breakdown").content.grid.reload()}b.hide()},error:function(a){b.hide()}};b.show();dojo.xhrPost(d)},removeBillTab:function(){this.container.workarea.removeBillTab()},initTab:function(a,c){var b=!1,e=this.container.workarea.getChildren(),d;for(d in e)"object"==typeof e[d].pane_info&&e[d].pane_info.id==a.id+"-form_"+
a.type&&(b=!0,this.container.workarea.selectChild(e[d]));b||this.container.workarea.makeTab(a,c,!0)}});return g("buildspace.apps.RationalizeRateReport.Builder",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",gutters:!1,project:null,type:null,workarea:null,postCreate:function(){this.inherited(arguments);var a=this.explorer=l({rootProject:this.project,container:this}),c=this.project,b=new dijit.Toolbar({region:"top",style:"padding:2px;width:100%;"});b.addChild(new dijit.form.Button({label:f.backTo+
" "+f.tenderingReport,iconClass:"icon-16-container icon-16-directional_left",style:"outline:none!important;",onClick:dojo.hitch(this,"openBuilderWin",c)}));a=this.workarea=new h({rootProject:this.project,explorer:a,type:this.type});a.startup();this.addChild(b);this.addChild(a)},openBuilderWin:function(a){this.kill();this.project=a;this.win=new buildspace.widget.Window({title:f.tenderingReport+" > "+buildspace.truncateString(a.title,100)+" ("+f.status+": "+a.status[0].toUpperCase()+")",onClose:dojo.hitch(this,
"kill")});a=new k({project:a});this.win.addChild(a);this.win.show();this.win.startup()},kill:function(){"undefined"!=typeof this.win&&this.win.close()}})});
