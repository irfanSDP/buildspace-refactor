(function(){define("dojo/_base/declare dojo/data/ItemFileWriteStore dojo/request dijit/layout/TabContainer dijit/layout/ContentPane dijit/layout/BorderContainer dijit/layout/StackController dijit/layout/StackContainer dijit/Toolbar dijit/form/Button ./grid ./WorkArea ./PurchaseOrderDialog buildspace/widget/grid/cells/Formatter dojo/i18n!../../nls/PurchaseOrder buildspace/widget/grid/Filter".split(" "),function(g,t,h,u,v,k,w,x,l,f,m,n,p,q,a,r){return g("buildspace.apps.PurchaseOrder",buildspace.apps._App,
{init:function(c){var b=this;b.win=new buildspace.widget.Window({title:a.appName,height:"300px",width:"450px",showMaximize:!1,iconClass:this.iconClass,onClose:dojo.hitch(this,"kill")});c=new dojo.data.ItemFileWriteStore({url:"purchaseOrder/getPurchaseOrderListings",clearOnClose:!0,urlPreventCache:!0});var d=this.purchaseOrderGrid=new m({requestForQuotationGridContainer:b,structure:b.getGridLayout(),store:c,onRowDblClick:function(a){a=this.getItem(a.rowIndex);if(!(0<a.id[0]))return!1;b.kill();b.win=
new buildspace.widget.Window({title:buildspace.truncateString("Purchase Order (PO No : "+a.po_no[0]+")",150),onClose:dojo.hitch(b,"kill")});a=new n({purchaseOrder:a});b.win.addChild(a);b.win.show();return b.win.startup()}});var e=new l({region:"top",style:"outline:none!important;padding:2px;border:none;width:100%;"});e.addChild(new f({label:a.createNewPO,iconClass:"icon-16-container icon-16-add",onClick:function(){return dojo.hitch(b,"purchaseOrderDialogForm",-1)()}}));e.addChild(new dijit.ToolbarSeparator);
e.addChild(new f({id:"deleteCompanyFromPurchaseOrder",label:a["delete"],iconClass:"icon-16-container icon-16-delete",disabled:!0,onClick:function(){return d.deleteRow(d.selection.selectedIndex)}}));c=this.mainContainer=new k({style:"padding:0px;width:100%;height:100%;",gutters:!1});c.addChild(new r({region:"top",grid:d,editableGrid:!1,filterFields:["po_no","project","status"]}));c.addChild(e);c.addChild(d);b.win.addChild(c);b.win.show();return b.win.startup()},purchaseOrderDialogForm:function(c){var b=
this;var d=new buildspace.dialog.indeterminateProgressBar({title:a.processing+"..."});d.show();return h.get("purchaseOrder/getPurchaseOrderFormInformation",{query:{poId:c},handleAs:"json"}).then(function(e){d.hide();return(new p({title:a.addNewPurchaseOrder,poId:c,data:e,purchaseOrderGrid:b.purchaseOrderGrid})).show()},function(a){return d.hide()})},getGridLayout:function(){return[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:(new q).rowCountCellFormatter},{name:a.poNo,
field:"po_no",width:"120px",styles:"text-align: center;"},{name:a.project,field:"project",width:"auto"},{name:a.status,field:"status",width:"120px",styles:"text-align: center;"},{name:a.issued_by,field:"issued_by",width:"140px",styles:"text-align: center;"},{name:a.date_issued,field:"date_issued",width:"140px",styles:"text-align: center;"}]},kill:function(){this.win&&"undefined"!=typeof this.win&&this.win.close()}})})}).call(this);
