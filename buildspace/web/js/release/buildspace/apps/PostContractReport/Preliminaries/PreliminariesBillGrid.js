define("buildspace/apps/PostContractReport/Preliminaries/PreliminariesBillGrid","dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/connect dojo/_base/array dojo/request dojo/store/Memory dojo/dom-attr dijit/Menu dojo/number dijit/CheckedMenuItem dojox/grid/enhanced/plugins/Menu dojox/grid/enhanced/plugins/Selector dojox/grid/enhanced/plugins/Rearrange buildspace/widget/grid/plugins/FormulatedColumn dojo/_base/event dojo/keys dijit/focus dojo/_base/html dojo/request/xhr dijit/form/DropDownButton dijit/DropDownMenu dijit/MenuItem dijit/PopupMenuItem dijit/MenuSeparator buildspace/widget/grid/cells/Select buildspace/widget/grid/cells/Textarea buildspace/widget/grid/cells/FormulaTextBox buildspace/widget/grid/cells/Formatter dojox/grid/enhanced/plugins/IndirectSelection dojo/currency ./PrintAllSelectedItemDialog ./PrintAllSelectedItemWithClaims ./PrintAllItemWithCurrentClaimMoreThanZero ./PrintAllItemWithClaims dojo/i18n!buildspace/nls/PostContract".split(" "),
function(k,n,r,p,G,h,t,H,I,l,J,K,L,u,v,M,N,O,P,Q,w,x,y,R,S,T,U,V,z,W,q,A,B,C,D,e){var E=k("buildspace.apps.PostContractReport.Preliminaries.PreliminariesBillGridFormatter",null,{formulaPrelimCurrencyCellFormatter:function(a,b,c){b=this.grid.getItem(b);a=l.parse(a);fieldName=c.field.split("-");a=isNaN(a)||0==a||null==a?"&nbsp;":q.format(a);b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER||b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N||b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID?
(c.customClasses.push("disable-cell"),a="&nbsp;"):!fieldName||fieldName!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_RECURRING&&fieldName!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED&&fieldName!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED||c.customClasses.push("recurring-cell");return a},prelimPercentFormatter:function(a,b,c){b=this.grid.getItem(b);var d=c.fieldName;if(b&&b.grand_total&&
0==b.grand_total[0])a="&nbsp;";else if(isNaN(a)||0==a)a="&nbsp;";else{var f=l.format(a,{places:2})+"%";a=c.fieldName==buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED||c.fieldName==buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED?0<a?'<span style="color:blue;">'+f+"</span>":'<span style="color:#FF0000">'+f+"</span>":0<a?"<span>"+f+"</span>":'<span style="color:#FF0000">'+f+"</span>"}b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER||
b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N||b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID?(c.customClasses.push("disable-cell"),val="&nbsp;"):!d||d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_RECURRING&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED?!d||d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_PREVIOUSCLAIM&&
d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_CURRENTCLAIM&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_UPTODATECLAIM||c.customClasses.push("disable-cell"):c.customClasses.push("recurring-cell");return a},prelimAmountFormatter:function(a,b,c){b=this.grid.getItem(b);a=l.parse(a);var d=c.fieldName;if(isNaN(a)||0==a||null==a)var f="&nbsp;";else f=q.format(a),f=c.fieldName==buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED||
c.fieldName==buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED?0<a?'<span style="color:blue;">'+f+"</span>":'<span style="color:#FF0000">'+f+"</span>":0<a?"<span>"+f+"</span>":'<span style="color:#FF0000">'+f+"</span>";b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER||b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N||b.type==buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID?c.customClasses.push("disable-cell"):!d||d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_RECURRING&&
d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED?!d||d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_PREVIOUSCLAIM&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_CURRENTCLAIM&&d!=buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_UPTODATECLAIM||c.customClasses.push("disable-cell"):c.customClasses.push("recurring-cell");
return f}}),F=k("buildspace.apps.PostContractReport.Preliminaries.PreliminariesBillGrid",dojox.grid.EnhancedGrid,{type:null,billId:-1,elementId:0,itemId:-1,style:"border-top:none;",selectedItem:null,borderContainerWidget:null,keepSelection:!0,rowSelector:"0px",headerMenu:null,typeColumns:null,markupSettings:null,parentGrid:null,elementGridStore:null,currentGridType:"element",typeColumsToQtyUsed:[],currentSelectedClaimRevision:null,currentClaimRevision:null,constructor:function(a){this.type=a.type;
this.hierarchyTypes=a.hierarchyTypes;this.hierarchyTypesForHead=a.hierarchyTypesForHead;this.unitOfMeasurements=a.unitOfMeasurements;this.columnGroup=a.columnGroup;this.typeColumns=a.typeColumns;this.markupSettings=a.markupSettings;this.currencySetting=buildspace.billCurrencyAbbreviation?buildspace.billCurrencyAbbreviation:buildspace.currencyAbbreviation;this.currentGridType=a.currentGridType;this.gridEditable=a.editable;this.formatter=new z;this.typeColumns="tree"!=this.type?this.recurringElementGridStructure():
this.recurringItemGridStructure();this.gridReportingFormatter=new E;this.typeColumnChildren=[{name:e.percent,field_name:"percentage",width:"60px",styles:"text-align:right;",formatter:this.gridReportingFormatter.prelimPercentFormatter},{name:e.amount,field_name:"amount",width:"100px",styles:"text-align:right;",formatter:this.gridReportingFormatter.prelimAmountFormatter}];this.rearranger=u(this,{});this.formulatedColumn=v(this,{});this.setColumnStructure();this.createHeaderCtxMenu();this.plugins={indirectSelection:{headerSelector:!0,
width:"40px",styles:"text-align: center;"}}},postCreate:function(){var a=this;a.inherited(arguments);var b="tree"===a.type?"previewItemStore":"previewElementStore";r.after(a,"_onFetchComplete",function(){a.gridContainer.markedCheckBoxObject(a,a.gridContainer[b])})},startup:function(){var a=this;a.inherited(arguments);this._connects.push(p.connect(this,"onCellClick",function(b){""===b.cell.name&&a.singleCheckBoxSelection(b)}));this._connects.push(p.connect(this.rowSelectCell,"toggleAllSelection",function(b){a.toggleAllSelection(b)}))},
singleCheckBoxSelection:function(a){var b=a.rowIndex;a=this.selection.selected[b];b=this.getItem(b);this.removedIds=[];if(a){if("tree"===this.type)return this.gridContainer.previewItemStore.put({id:b.id[0]}),this.getAffectedElementsByItems(b,"add");this.gridContainer.previewElementStore.put({id:b.id[0]});return this.getAffectedItemsAndBillsByElement(b,"add")}if("tree"===this.type)return this.gridContainer.previewItemStore.remove(b.id[0]),this.removedIds.push(b.id[0]),this.getAffectedElementsByItems(b,
"remove");this.gridContainer.previewElementStore.remove(b.id[0]);this.removedIds.push(b.id[0]);return this.getAffectedItemsAndBillsByElement(b,"remove")},toggleAllSelection:function(a){var b=this,c=this.selection;b.removedIds=[];var d="tree"===b.type?"previewItemStore":"previewElementStore";if(a)return c.selectRange(0,b.rowCount-1),b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,c){0<a.id&&b.gridContainer[d].put({id:a.id[0]})})}}),"tree"===b.type?b.getAffectedElementsByItems(null,
"add"):b.getAffectedItemsAndBillsByElement(null,"add");c.deselectAll();b.store.fetch({onComplete:function(a){dojo.forEach(a,function(a,c){0<a.id&&(b.gridContainer[d].remove(a.id[0]),b.removedIds.push(a.id[0]))})}});return"tree"===b.type?b.getAffectedElementsByItems(null,"remove"):b.getAffectedItemsAndBillsByElement(null,"remove")},canSort:function(a){return!1},doCancelEdit:function(a){this.inherited(arguments);this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a,!0)},setColumnStructure:function(){var a=
this.formatter,b="auto";if(1<this.typeColumns.length||this.markupSettings.bill_markup_enabled||this.markupSettings.element_markup_enabled||this.markupSettings.item_markup_enabled)b="500px";if("tree"==this.type){var c=this.unitOfMeasurements,d=this.hierarchyTypes;b=this.fixedColumns={noscroll:!1,width:57.8,cells:[[{name:"No",field:"id",styles:"text-align:center;",width:"30px",formatter:a.rowCountCellFormatter,noresize:!0,rowSpan:2,showInCtxMenu:!0},{name:e.billReference,field:"bill_ref",styles:"text-align:center; color: red;",
width:"80px",noresize:!0,hidden:!0,rowSpan:2,showInCtxMenu:!0,formatter:a.billRefCellFormatter},{name:e.description,field:"description",width:b,formatter:a.treeCellFormatter,noresize:!0,rowSpan:2,showInCtxMenu:!0},{name:e.type,field:"type",width:"70px",styles:"text-align:center;",type:"dojox.grid.cells.Select",options:d.options,values:d.values,formatter:a.typeCellFormatter,noresize:!0,rowSpan:2,hidden:!0,showInCtxMenu:!0},{name:e.quantity,field:"qty-qty_per_unit",styles:"text-align:right;",width:"90px",
formatter:a.postContractPreliminariesQuantityCellFormatter,noresize:!0,hidden:!0,rowSpan:2,showInCtxMenu:!0},{name:e.unit,field:"uom_id",width:"70px",styles:"text-align:center;",type:"dojox.grid.cells.Select",options:c.options,values:c.values,formatter:a.unitIdCellFormatter,noresize:!0,rowSpan:2,hidden:!0,showInCtxMenu:!0},{name:e.rate,field:"rate",styles:"text-align:right;",width:"75px",formatter:this.gridReportingFormatter.formulaPrelimCurrencyCellFormatter,noresize:!0,rowSpan:2,hidden:!0,showInCtxMenu:!0},
{name:e.itemTotal,field:"item_total",styles:"text-align:right;color:blue;",width:"75px",formatter:a.unEditableNumberCellFormatter,noresize:!0,rowSpan:2}]]};c=[e.includeCapital,e.excludeCapital];d=["true","false"];a=[{name:e.includeInitial,field:"include_initial",width:"100px",styles:"text-align:center;",type:"dojox.grid.cells.Select",options:c,values:d,rowSpan:2,formatter:a.yesNoCellFormatter},{name:e.includeFinal,field:"include_final",width:"100px",styles:"text-align:center;",type:"dojox.grid.cells.Select",
options:c,values:d,rowSpan:2,formatter:a.yesNoCellFormatter}];var f=this.constructTypeColumnStructure(b)}else{b="auto";if(1<this.typeColumns.length||this.markupSettings.bill_markup_enabled||this.markupSettings.element_markup_enabled||this.markupSettings.item_markup_enabled)b="500px";b=this.fixedColumns={noscroll:!1,width:"50",cells:[[{name:"No",field:"id",styles:"text-align:center;",width:"30px",formatter:a.rowCountCellFormatter,noresize:!0,rowSpan:2},{name:e.description,field:"description",width:b,
editable:!1,formatter:a.treeCellFormatter,noresize:!0,rowSpan:2},{name:e.grandTotal,field:"grand_total",styles:"text-align:right;color:blue;",width:"100px",formatter:a.unEditableCurrencyCellFormatter,rowSpan:2,noresize:!0,showInCtxMenu:!0}]]};a=[];f=this.constructTypeColumnStructure(b)}dojo.forEach(a,function(a){f.cells[0].push(a)});this.structure=f},constructTypeColumnStructure:function(a){var b=this,c=this.typeColumnChildren,d=[],e=0;dojo.forEach(this.typeColumns,function(f){b.typeColumsToQtyUsed[f.id]=
f.use_original_quantity;var g=c.length;e++;d.push({name:f.name,styles:"text-align:center;",headerClasses:"staticHeader typeHeader"+e,colSpan:g});for(i=0;i<c.length;i++)g=f.field_name+"-"+c[i].field_name,g={field:g,columnType:"prelimClaimColumn",fieldName:f.field_name},n.mixin(g,c[i]),a.cells[0].push(g)});a.cells.push(d);return a},createHeaderCtxMenu:function(){if("undefined"!==typeof this.fixedColumns){var a=this.fixedColumns.cells[0],b=this,c={headerMenu:new dijit.Menu};dojo.forEach(a,function(a,
e){a.showInCtxMenu&&c.headerMenu.addChild(new dijit.CheckedMenuItem({label:a.name,checked:"undefined"===typeof a.hidden||!1===a.hidden?!0:!1,onChange:function(a){var c=!1;a&&(c=!0);b.showHideMergedColumn(c,e)}}))});this.plugins={menus:c}}},showHideMergedColumn:function(a,b){this.beginUpdate();this.layout.setColumnVisibility(b,a);this.endUpdate()},refreshGrid:function(){this.beginUpdate();this.set("structure",this.structure);this.store.close();this.pluginMgr=new this._pluginMgrClass(this);this.pluginMgr.preInit();
this.pluginMgr.postInit();this.pluginMgr.startup();this._refresh();this.endUpdate()},editableCellDblClick:function(a){var b=1<this._click.length&&has("ie")?this._click[1]:1<this._click.length&&this._click[0].rowIndex!=this._click[1].rowIndex?this._click[0]:a;this.focus.setFocusCell(b.cell,b.rowIndex);this.onRowClick(b);this.onRowDblClick(a)},dodblclick:function(a){if(a.cellNode)if(a.cell.editable)this.editableCellDblClick(a);else this.onCellDblClick(a);else this.onRowDblClick(a)},doEditItemNote:function(a){},
doEditTradeNote:function(a){},onHeaderCellClick:function(a){dojo.hasClass(a.cell.id,"staticHeader")||(a.grid.setSortIndex(a.cell.index),a.grid.onHeaderClick(a))},onHeaderCellMouseOver:function(a){dojo.hasClass(a.cell.id,"staticHeader")||dojo.addClass(a.cellNode,this.cellOverClass)},onStyleRow:function(a){this.inherited(arguments);if(a.node.children[0]&&2<=a.node.children[0].children[0].rows.length){var b=a.node.children[0].children[0].rows[1],c=a.node.children[0].children[0].rows[0].children;b.parentNode.removeChild(b);
dojo.forEach(c,function(a,b){b=dojo.attr(a,"rowSpan");(!b||2>b)&&dojo.attr(a,"rowSpan",2)})}},recurringElementGridStructure:function(){typeColumns=[];for(var a=[{name:e.previousClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_PREVIOUSCLAIM},{name:e.currentClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_CURRENTCLAIM},{name:e.upToDateClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_UPTODATECLAIM}],
b=a.length,c=0;c<b;c++)typeColumns.push({name:a[c].name,field_name:a[c].field_name});return typeColumns},recurringItemGridStructure:function(){typeColumns=[];for(var a=[{name:e.initial,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_INITIAL},{name:e.recurring,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_RECURRING},{name:e.timeBased,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_TIMEBASED},
{name:e.workBased,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_WORKBASED},{name:e.final,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_FINAL},{name:e.previousClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_PREVIOUSCLAIM},{name:e.currentClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_CURRENTCLAIM},{name:e.upToDateClaim,field_name:buildspace.apps.PostContractReport.ProjectStructureConstants.PRELIM_COLUMN_UPTODATECLAIM}],
b=a.length,c=0;c<b;c++)typeColumns.push({name:a[c].name,field_name:a[c].field_name});return typeColumns},getAffectedItemsAndBillsByElement:function(a,b){var c=this;a=c.gridContainer.previewElementStore;var d=[],f=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});f.show();if("add"===b)a.query().forEach(function(a){d.push(a.id)});else for(var m in c.removedIds)d.push(c.removedIds[m]);h.post("postContractPreliminaries/getAffectedItems",{handleAs:"json",data:{id:c.billId,element_ids:JSON.stringify(c.borderContainerWidget.arrayUnique(d))}}).then(function(a){if("add"===
b)for(var d in a)for(var e in a[d])for(var g in a[d][e])c.gridContainer.previewItemStore.put({id:a[d][e][g]});else for(d in a)for(e in a[d])for(g in c.gridContainer.previewElementStore.remove(e),a[d][e])c.gridContainer.previewItemStore.remove(a[d][e][g]);f.hide()},function(a){f.hide();console.log(a)})},getAffectedElementsByItems:function(a,b){var c=this,d=[],f=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});f.show();if("add"===b)c.gridContainer.previewItemStore.query().forEach(function(a){d.push(a.id)});
else for(var m in c.removedIds)d.push(c.removedIds[m]);h.post("postContractPreliminaries/getAffectedElements",{handleAs:"json",data:{id:c.billId,itemIds:JSON.stringify(c.borderContainerWidget.arrayUnique(d))}}).then(function(a){c.gridContainer.previewElementStore=new t({idProperty:"id"});c.updateElementAndBillGridSelectBox(a);f.hide()},function(a){f.hide();console.log(a)})},updateElementAndBillGridSelectBox:function(a){var b=this,c=dijit.byId("postContractReport-element-page-container-"+b.billId);
c.grid.store.fetch({onItem:function(a){if(a)return c.grid.rowSelectCell.toggleRow(a._0,!1)}});for(var d in a)for(var e in a[d])c.grid.store.fetchItemByIdentity({identity:e,onItem:function(a){if(a)return b.gridContainer.previewElementStore.put({id:e}),c.grid.rowSelectCell.toggleRow(a._0,!0)}})}});return k("buildspace.apps.PostContractReport.BillManager.PreliminariesBillGridBuilder",dijit.layout.BorderContainer,{pageId:"page-00",style:"padding:0px;width:100%;height:100%;",gutters:!1,stackContainerTitle:"",
rootProject:null,billId:-1,elementId:0,itemId:-1,rowSelector:null,gridOpts:{},type:null,postCreate:function(){var a=this;a.inherited(arguments);n.mixin(a.gridOpts,{billId:a.billId,elementId:a.elementId,type:a.type,region:"center",borderContainerWidget:a});var b=new x({style:"display: none;"}),c=this.grid=new F(a.gridOpts),d=new dijit.Toolbar({region:"top",style:"outline:none!important; border-bottom:none; padding:2px; width:100%;"});dojo.forEach(["allItems","itemsWithClaimsSelected","itemsWithCurrentClaimMoreThanZero",
"itemsWithClaims"],function(c){switch(c){case "allItems":var d="openPrintAllSelectedItemDialog";break;case "itemsWithClaimsSelected":d="openPrintAllSelectedItemWithClaims";break;case "itemsWithCurrentClaimMoreThanZero":d="openPrintAllItemWithCurrentClaimMoreThanZero";break;case "itemsWithClaims":d="openPrintAllItemWithClaims"}var f=new y({label:e[c],onClick:function(){a[d](c)}});b.addChild(f)});d.addChild(new w({label:e.printPreview,iconClass:"icon-16-container icon-16-print",dropDown:b}));a.addChild(d);
a.addChild(new dijit.layout.ContentPane({style:"width:100%",content:c,region:"center"}));(c=dijit.byId("add_resource_category_"+this.billId+"-btn"))&&c.destroy();if(c=dijit.byId("postContractReportBillGrid"+this.billId+"-stackContainer"))d=document.createElement("div"),d=new dojox.layout.ContentPane({title:buildspace.truncateString(a.stackContainerTitle,60),id:a.pageId},d),c.addChild(d),d.set("content",a),c.selectChild(a.pageId)},openPrintAllSelectedItemDialog:function(){var a=this,b=[];a.gridOpts.gridContainer.previewItemStore.query().forEach(function(a){b.push(a.id)});
var c=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});c.show();h.post("postContractPreliminaries/getPrintingSelectedItem",{handleAs:"json",data:{bill_id:a.billId,itemIds:JSON.stringify(a.arrayUnique(b))}}).then(function(d){(new A({project:a.rootProject,title:e.printPreview+" ("+e.allItems+")",data:d,billId:a.billId,selectedItems:b})).show();c.hide()},function(a){console.log(a);c.hide()})},openPrintAllSelectedItemWithClaims:function(){var a=this,b=[];a.gridOpts.gridContainer.previewItemStore.query().forEach(function(a){b.push(a.id)});
var c=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});c.show();h.post("postContractPreliminaries/getPrintingSelectedItem",{handleAs:"json",data:{bill_id:a.billId,itemIds:JSON.stringify(a.arrayUnique(b))}}).then(function(d){(new B({project:a.rootProject,title:e.printPreview+" ("+e.itemsWithClaimsSelected+")",data:d,billId:a.billId,selectedItems:b})).show();c.hide()},function(a){console.log(a);c.hide()})},openPrintAllItemWithCurrentClaimMoreThanZero:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+
"..."});b.show();h.post("postContractPreliminaries/getPrintingItemWithCurrentClaimMoreThanZero",{handleAs:"json",data:{bill_id:a.billId}}).then(function(c){(new C({project:a.rootProject,title:e.printPreview+" ("+e.itemsWithCurrentClaimMoreThanZero+")",billId:a.billId,data:c})).show();b.hide()},function(a){console.log(a);b.hide()})},openPrintAllItemWithClaims:function(){var a=this,b=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});b.show();h.post("postContractPreliminaries/getPrintingAllItemClaims",
{handleAs:"json",data:{bill_id:a.billId}}).then(function(c){(new D({project:a.rootProject,title:e.printPreview+" ("+e.itemsWithClaims+")",billId:a.billId,data:c})).show();b.hide()},function(a){console.log(a);b.hide()})},arrayUnique:function(a){return a.reverse().filter(function(a,c,d){return-1===d.indexOf(a,c+1)}).reverse()}})});
