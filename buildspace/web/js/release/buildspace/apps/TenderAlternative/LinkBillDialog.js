define("buildspace/apps/TenderAlternative/LinkBillDialog","dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/keys dojo/dom-style dojo/on dojox/grid/EnhancedGrid buildspace/widget/grid/cells/Formatter buildspace/widget/grid/Filter dojox/grid/enhanced/plugins/IndirectSelection dojo/i18n!buildspace/nls/TenderAlternative".split(" "),function(f,q,r,g,h,t,k,l,m,u,e){var n=f("buildspace.apps.TenderAlternative.LinkBillGrid",k,{style:"border-top:none;",containerDialog:null,tenderAlternative:null,
tenderAlternativeGrid:null,region:"center",constructor:function(b){this.plugins={indirectSelection:{headerSelector:!0,width:"20px",styles:"text-align:center;"}};this.inherited(arguments)},postCreate:function(){this.inherited(arguments)},canSort:function(b){return!1},save:function(){if(0<this.selection.getSelected().length){var b=[],a=this;dojo.forEach(a.selection.getSelected(),function(d){(d&&0<parseInt(String(d.id))&&parseInt(String(d.type))==buildspace.constants.TYPE_BILL||parseInt(String(d.type))==
buildspace.constants.TYPE_SUPPLY_OF_MATERIAL_BILL||parseInt(String(d.type))==buildspace.constants.TYPE_SCHEDULE_OF_RATE_BILL)&&b.push(parseInt(String(d.id)))});if(0<b.length){var c=buildspace.dialog.indeterminateProgressBar({title:e.savingData+". "+e.pleaseWait+"..."});c.show().then(function(){dojo.xhrPost({url:"linkTenderAlternativeBills",content:{id:parseInt(String(a.tenderAlternative.id)),_csrf_token:a.tenderAlternative._csrf_token,bids:b.toString()},handleAs:"json",load:function(d){d.success&&
a.tenderAlternativeGrid&&a.tenderAlternativeGrid.reload();c.hide();a.selection.clear();a.containerDialog.hide()},error:function(d){c.hide();a.selection.clear();a.containerDialog.hide()}})})}else a.selection.clear(),a.containerDialog.hide()}else buildspace.dialog.alert(e.noBillAlert,e.pleaseSelectBill+".",90,320)}}),p=f("buildspace.apps.TenderAlternative.LinkBillGridContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",containerDialog:null,tenderAlternative:null,tenderAlternativeGrid:null,
postCreate:function(){this.inherited(arguments);var b=new l;b=this.grid=new n({containerDialog:this.containerDialog,tenderAlternative:this.tenderAlternative,tenderAlternativeGrid:this.tenderAlternativeGrid,structure:[{name:"No.",field:"count",width:"30px",styles:"text-align:center;",formatter:function(a,c){return 0<a?a:""}},{name:e.description,field:"title",width:"auto",formatter:function(a,c){c=this.grid.getItem(c);var d=16*parseInt(String(c.level));a=null==a?"&nbsp":a;parseInt(String(c.type))<buildspace.constants.TYPE_BILL&&
(a="<b>"+a+"</b>");return'<div class="treeNode" style="padding-left:'+d+'px;"><div class="treeContent">'+a+"&nbsp;</div></div>"}},{name:e.overallTotal,field:"overall_total_after_markup",width:"150px",styles:"text-align: right;",formatter:b.unEditableCurrencyCellFormatter}],store:new dojo.data.ItemFileWriteStore({clearOnClose:!0,url:"getTenderAlternativeUnlinkBills/"+parseInt(String(this.tenderAlternative.id))})});this.addChild(b);this.addChild(new m({region:"top",editableGrid:!1,grid:b,filterFields:[{title:e.description}]}))},
save:function(){this.grid.save()}});return f("buildspace.apps.TenderAlternative.LinkBillDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",tenderAlternative:null,tenderAlternativeGrid:null,title:e.tagBillsToTenderAlternatives,buildRendering:function(){var b=this.createContent();b.startup();this.content=b;this.inherited(arguments)},postCreate:function(){h.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";this.inherited(arguments)},_onKey:function(b){b.keyCode==
g.ESCAPE&&dojo.stopEvent(b)},onHide:function(){this.destroyRecursive()},createContent:function(){var b=new dijit.layout.BorderContainer({style:"padding:0px;width:980px;height:580px;",gutters:!1}),a=new p({region:"center",containerDialog:this,tenderAlternative:this.tenderAlternative,tenderAlternativeGrid:this.tenderAlternativeGrid}),c=new dijit.Toolbar({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});c.addChild(new dijit.form.Button({label:e.save,iconClass:"icon-16-container icon-16-save",
style:"outline:none!important;",onClick:dojo.hitch(a,"save")}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",style:"outline:none!important;",onClick:dojo.hitch(this,"hide")}));b.addChild(c);b.addChild(a);return b}})});
