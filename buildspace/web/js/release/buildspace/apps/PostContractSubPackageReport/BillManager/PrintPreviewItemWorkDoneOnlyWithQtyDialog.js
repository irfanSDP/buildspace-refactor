(function(){define("buildspace/apps/PostContractSubPackageReport/BillManager/PrintPreviewItemWorkDoneOnlyWithQtyDialog","dojo/_base/declare dojo/aspect dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dojo/request dojo/json dojo/number dojo/currency ./PrintPreviewFormDialog buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/PostContract".split(" "),function(f,w,n,x,y,z,A,p,q,r,B,g,t,u,v,e){var k,l,m;k=f("buildspace.apps.PostContractSubPackageReport.StandardBillClaim.PreviewItemGridFormatter",
null,{qtyColumnFormatter:function(a,b,c){var d;b=this.grid.getItem(b);d=g.parse(a);!b.type||b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM&&b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT&&b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE||(d=g.parse(b.up_to_date_percentage[0]));isNaN(d)||0===d||null===d?a="&nbsp;":(a=t.format(d),!b.type||b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM&&b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_PERCENT&&
b.type[0]!==buildspace.constants.HIERARCHY_TYPE_ITEM_LUMP_SUM_EXCLUDE||(a+="%"),a=0<=d?a:'<span style="color:#FF0000">'+a+"</span>");b.type&&1>b.type?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");return a}});l=f("buildspace.apps.PostContractSubPackageReport.StandardBillClaim.SelectedItemGrid",dojox.grid.EnhancedGrid,{style:"border-top:none;",region:"center",escapeHTMLInData:!1,canSort:function(){return!1},onStyleRow:function(a){var b,c;this.inherited(arguments);
if(a.node.children[0]&&2<=a.node.children[0].children[0].rows.length)return c=a.node.children[0].children[0].rows[1],b=a.node.children[0].children[0].rows[0].children,c.parentNode.removeChild(c),dojo.forEach(b,function(a,b){var c;c=dojo.attr(a,"rowSpan");if(!c||2>c)return dojo.attr(a,"rowSpan",2)})}});m=f("buildspace.apps.PostContractSubPackageReport.StandardBillClaim.SelectedItemGridContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",region:"center",gutters:!1,dialog:null,
store:null,structure:null,type_ref_id:-1,subPackageId:-1,billId:-1,postCreate:function(){var a,b,c;b=this;b.inherited(arguments);a=this.grid=new l({store:b.store,structure:b.structure});c=new dijit.Toolbar({region:"top",style:"padding:2px;border-bottom:none;width:100%;"});c.addChild(new dijit.form.Button({label:e.print,iconClass:"icon-16-container icon-16-print",onClick:function(){return b.openPrintingDialog()}}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({label:e.close,
iconClass:"icon-16-container icon-16-close",onClick:function(){return b.dialog.hide()}}));b.addChild(c);return b.addChild(new dijit.layout.ContentPane({style:"width:100%",content:a,region:"center"}))},openPrintingDialog:function(a){var b;null==a&&(a=this);b=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});b.show();return r("viewTendererReporting/getPrintingInformation",{handleAs:"json"}).then(function(c){c=new u({title:a.dialog.title,printURL:"postContractSubPackageStandardBill/printStandardBillItemWorkdoneOnlyWithQty",
exportURL:"postContractSubPackageStandardBillExportExcelReporting/exportExcelStandardBillItemWorkDoneOnlyWithQty",_csrf_token:c._csrf_token,type_ref_id:a.type_ref_id,subPackageId:a.subPackageId,billId:a.billId});b.hide();return c.show()},function(){return b.hide()})}});return f("buildspace.apps.PostContractSubPackageReport.StandardBillClaim.GroupProjectAssignmentDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",project:null,companyId:-1,type_ref_id:-1,subPackageId:-1,billId:-1,companyName:null,
data:null,buildRendering:function(){var a;a=this.createContent();a.startup();this.content=a;return this.inherited(arguments)},postCreate:function(){q.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},_onKey:function(a){if(a.keyCode===p.ESCAPE)return dojo.stopEvent(a)},onHide:function(){return this.destroyRecursive()},createContent:function(a){var b;null==a&&(a=this);b=new dijit.layout.BorderContainer({style:"padding:0px;width:1280px;height:600px;",
gutters:!1});a=new m({store:dojo.data.ItemFileWriteStore({data:a.data}),dialog:a,structure:a.constructGridStructure(),type_ref_id:a.type_ref_id,subPackageId:a.subPackageId,billId:a.billId});b.addChild(a);return b},constructGridStructure:function(){var a,b,c,d,h,f,g;d=new v;f=new k;g=this.recurringItemGridStructure();c=0;h=[];b={noscroll:!1,width:"50",cells:[[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:d.rowCountCellFormatter,rowSpan:2},{name:e.billReference,field:"bill_ref",
styles:"text-align:center; color: red;",width:"80px",noresize:!0,formatter:d.billRefCellFormatter,rowSpan:2},{name:e.description,field:"description",width:"auto",formatter:d.postContractPrintPreviewTreeCellFormatter,noresize:!0,rowSpan:2},{name:e.quantity,field:"qty_per_unit",width:"75px",styles:"text-align:right;",formatter:d.unEditableNumberCellFormatter,noresize:!0,rowSpan:2},{name:e.unit,field:"uom_symbol",width:"70px",styles:"text-align:center;",formatter:d.unitIdCellFormatter,noresize:!0,rowSpan:2},
{name:e.rate,field:"rate",width:"75px",styles:"text-align:right;color:blue;",formatter:d.unEditableNumberCellFormatter,noresize:!0,rowSpan:2},{name:e.contractAmount,field:"total_per_unit",styles:"text-align:right;color:blue;",width:"110px",formatter:d.unEditableNumberCellFormatter,noresize:!0,rowSpan:2}]]};a=[{name:e.quantity,field_name:"qty",width:"75px",styles:"text-align:right;",formatter:f.qtyColumnFormatter},{name:e.amount,field_name:"amount",width:"100px",styles:"text-align:right;",formatter:d.unEditableCurrencyCellFormatter}];
dojo.forEach(g,function(d){var e,f,g;f=a.length;c++;h.push({name:d.name,styles:"text-align:center;",headerClasses:"staticHeader typeHeader"+c,colSpan:f});f=0;for(g=[];f<a.length;)e=d.field_name,e=e+"_"+a[f].field_name,e={field:e,columnType:"prelimClaimColumn",fieldName:d.field_name},n.mixin(e,a[f]),b.cells[0].push(e),g.push(f++);return g});b.cells.push(h);return b},recurringItemGridStructure:function(){var a,b,c,d,f;f=[];d=[{name:e.workDone,field_name:"up_to_date"}];b=d.length;for(a=0;a<b;)c={name:d[a].name,
field_name:d[a].field_name},f.push(c),a++;return f}})})}).call(this);
