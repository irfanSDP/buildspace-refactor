(function(){define("buildspace/apps/PostContractSubPackageReport/VariationOrder/PrintSelectedVOItemsWithBuildUpQtyDialog","dojo/_base/declare dojo/aspect dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dojo/request dojo/json dojo/number dojo/currency ./PrintPreviewFormDialog buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/PostContract".split(" "),function(g,u,v,w,x,y,z,n,p,q,A,e,h,r,t,f){var k,l,m;k=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.PreviewItemGridFormatter",
null,{additionQtyCellFormatter:function(a,b,c){var d;b=this.grid.getItem(b);d=e.parse(a);a="&nbsp;";b.type&&1>b.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");isNaN(d)||0===d||null==d||(a=e.format(d,{places:2}));return b.has_addition_build_up_quantity&&b.has_addition_build_up_quantity[0]?'<span style="color:#0000FF;"><b>'+a+"</b></span>":0<=d?a:'<span style="color:#FF0000">'+a+"</span>"},additionTotalCellFormatter:function(a,b,c){var d;b=this.grid.getItem(b);
d=e.parse(a);a="&nbsp;";d=d*e.parse(b["rate-value"][0])*e.parse(b.total_unit[0]);isNaN(d)||0===d||(a=h.format(d));b.type&&1>b.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");return 0<=d?a:'<span style="color:#FF0000">'+a+"</span>"},omissionQtyCellFormatter:function(a,b,c){var d;b=this.grid.getItem(b);d=e.parse(a);a="&nbsp;";b.type&&1>b.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");isNaN(d)||0===d||null==d||(a=e.format(d,
{places:2}));return b.has_omission_build_up_quantity&&b.has_omission_build_up_quantity[0]?'<span style="color:#0000FF;"><b>'+a+"</b></span>":0<=d?a:'<span style="color:#FF0000">'+a+"</span>"},omissionTotalCellFormatter:function(a,b,c){var d;b=this.grid.getItem(b);d=e.parse(a);a="&nbsp;";d=d*e.parse(b["rate-value"][0])*e.parse(b.total_unit[0]);isNaN(d)||0===d||(a=h.format(d));b.type&&1>b.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");return'<span style="color:#FF0000">'+
a+"</span>"},nettOmissionAdditionCellFormatter:function(a,b,c){b=this.grid.getItem(b);a=e.parse(b["omission_quantity-value"][0])*e.parse(b["rate-value"][0])*e.parse(b.total_unit[0]);b=e.parse(b["addition_quantity-value"][0])*e.parse(b["rate-value"][0])*e.parse(b.total_unit[0]);c.customClasses.push("disable-cell");c=b-a;return 0>c?'<span style="color:#FF0000">'+h.format(c)+"</span>":0===c?"&nbsp;":'<span style="color:#42b449;">'+h.format(c)+"</span>"}});l=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.SelectedItemGrid",
dojox.grid.EnhancedGrid,{style:"border-top:none;",region:"center",escapeHTMLInData:!1,canSort:function(){return!1},onStyleRow:function(a){var b,c;this.inherited(arguments);if(a.node.children[0]&&2<=a.node.children[0].children[0].rows.length)return c=a.node.children[0].children[0].rows[1],b=a.node.children[0].children[0].rows[0].children,c.parentNode.removeChild(c),dojo.forEach(b,function(a,b){var c;c=dojo.attr(a,"rowSpan");if(!c||2>c)return dojo.attr(a,"rowSpan",2)})}});m=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.SelectedItemGridContainer",
dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",region:"center",gutters:!1,dialog:null,store:null,structure:null,subPackageId:-1,billId:-1,selectedItems:[],postCreate:function(){var a,b,c;b=this;b.inherited(arguments);a=this.grid=new l({store:b.store,structure:b.structure,selectedItems:b.selectedItems});c=new dijit.Toolbar({region:"top",style:"padding:2px;border-bottom:none;width:100%;"});c.addChild(new dijit.form.Button({label:f.print,iconClass:"icon-16-container icon-16-print",
onClick:function(){return b.openPrintingDialog()}}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({label:f.close,iconClass:"icon-16-container icon-16-close",onClick:function(){return b.dialog.hide()}}));b.addChild(c);return b.addChild(new dijit.layout.ContentPane({style:"width:100%",content:a,region:"center"}))},openPrintingDialog:function(a){var b;null==a&&(a=this);b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});b.show();return q.get("viewTendererReporting/getPrintingInformation",
{handleAs:"json"}).then(function(c){c=new r({title:a.dialog.title,selectedRows:a.selectedItems,printURL:"postContractSubPackageVO/printSelectedVOItemsWithBuildUpQty",exportURL:"postContractSubPackageVOExportExcel/exportExcelSelectedVOItemsWithBuildUpQty",subPackageId:a.subPackageId,billId:a.billId,_csrf_token:c._csrf_token});b.hide();return c.show()},function(){return b.hide()})}});return g("buildspace.apps.PostContractSubPackageReport.VariationOrder.GroupProjectAssignmentDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",
project:null,subPackageId:-1,billId:-1,companyName:null,data:null,selectedItems:[],buildRendering:function(){var a;a=this.createContent();a.startup();this.content=a;return this.inherited(arguments)},postCreate:function(){p.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},_onKey:function(a){if(a.keyCode===n.ESCAPE)return dojo.stopEvent(a)},onHide:function(){return this.destroyRecursive()},createContent:function(a){var b;
null==a&&(a=this);b=new dijit.layout.BorderContainer({style:"padding:0px;width:1280px;height:600px;",gutters:!1});a=new m({store:dojo.data.ItemFileWriteStore({data:a.data}),dialog:a,selectedItems:a.selectedItems,structure:a.constructGridStructure(),subPackageId:a.subPackageId,billId:a.billId});b.addChild(a);return b},constructGridStructure:function(){var a,b,c;b=new t;a=new k;c=[];a={noscroll:!1,width:"50",cells:[[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:b.rowCountCellFormatter,
rowSpan:2},{name:f.billReference,field:"bill_ref",styles:"text-align:center; color: red;",width:"80px",noresize:!0,formatter:b.billRefCellFormatter,rowSpan:2},{name:f.description,field:"description",width:"500px",formatter:b.postContractPrintPreviewTreeCellFormatter,noresize:!0,rowSpan:2},{name:f.unit,field:"uom_symbol",width:"70px",styles:"text-align:center;",formatter:b.unitIdCellFormatter,noresize:!0,rowSpan:2},{name:f.rate,field:"rate",width:"75px",styles:"text-align:right;color:blue;",formatter:b.unEditableNumberCellFormatter,
noresize:!0,rowSpan:2},{name:f.qty,field:"omission_quantity",width:"90px",styles:"text-align:right;",formatter:a.omissionQtyCellFormatter},{name:f.amount,field:"omission_quantity",width:"120px",styles:"text-align:right;",formatter:a.omissionTotalCellFormatter},{name:f.qty,field:"addition_quantity",width:"90px",styles:"text-align:right;",formatter:a.additionQtyCellFormatter},{name:f.amount,field:"addition_quantity",width:"120px",styles:"text-align:right;",formatter:a.additionTotalCellFormatter}]]};
c.push({name:f.omission,styles:"text-align:center;",headerClasses:"staticHeader typeHeader",colSpan:2});c.push({name:f.addition,styles:"text-align:center;",headerClasses:"staticHeader typeHeader",colSpan:2});a.cells.push(c);return a}})})}).call(this);
