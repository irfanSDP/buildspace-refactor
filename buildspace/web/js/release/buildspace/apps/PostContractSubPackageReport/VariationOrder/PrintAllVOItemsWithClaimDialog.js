(function(){define("buildspace/apps/PostContractSubPackageReport/VariationOrder/PrintAllVOItemsWithClaimDialog","dojo/_base/declare dojo/aspect dojo/_base/lang dojo/_base/connect dojo/when dojo/html dojo/dom dojo/keys dojo/dom-style dojo/request dojo/json dojo/number dojo/currency ./PrintPreviewFormDialog buildspace/widget/grid/cells/Formatter dojo/i18n!buildspace/nls/PostContract".split(" "),function(g,u,v,w,x,y,z,n,p,q,A,f,h,r,t,e){var k,l,m;k=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.PreviewItemGridFormatter",
null,{additionQtyCellFormatter:function(b,a,c){var d;a=this.grid.getItem(a);d=f.parse(b);b="&nbsp;";a.type&&1>a.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");isNaN(d)||0===d||null==d||(b=f.format(d,{places:2}));return a.has_addition_build_up_quantity&&a.has_addition_build_up_quantity[0]?'<span style="color:#0000FF;"><b>'+b+"</b></span>":0<=d?b:'<span style="color:#FF0000">'+b+"</span>"},additionTotalCellFormatter:function(b,a,c){var d;a=this.grid.getItem(a);
d=f.parse(b);b="&nbsp;";d=d*f.parse(a["rate-value"][0])*f.parse(a.total_unit[0]);isNaN(d)||0===d||(b=h.format(d));a.type&&1>a.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");return 0<=d?b:'<span style="color:#FF0000">'+b+"</span>"},omissionQtyCellFormatter:function(b,a,c){var d;a=this.grid.getItem(a);d=f.parse(b);b="&nbsp;";a.type&&1>a.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");isNaN(d)||0===d||null==d||(b=f.format(d,
{places:2}));return a.has_omission_build_up_quantity&&a.has_omission_build_up_quantity[0]?'<span style="color:#0000FF;"><b>'+b+"</b></span>":0<=d?b:'<span style="color:#FF0000">'+b+"</span>"},omissionTotalCellFormatter:function(b,a,c){var d;a=this.grid.getItem(a);d=f.parse(b);b="&nbsp;";d=d*f.parse(a["rate-value"][0])*f.parse(a.total_unit[0]);isNaN(d)||0===d||(b=h.format(d));a.type&&1>a.type[0]?c.customClasses.push("invalidTypeItemCell"):c.customClasses.push("disable-cell");return'<span style="color:#FF0000">'+
b+"</span>"},nettOmissionAdditionCellFormatter:function(b,a,c){var d,e;a=this.grid.getItem(a);e=0;d=f.parse(a["omission_quantity-value"][0])*f.parse(a["rate-value"][0])*f.parse(a.total_unit[0]);b=f.parse(a["addition_quantity-value"][0])*f.parse(a["rate-value"][0])*f.parse(a.total_unit[0]);a.type&&1>a.type[0]?c.customClasses.push("invalidTypeItemCell"):(e=b-d,c.customClasses.push("disable-cell"));return 0>e?'<span style="color:#FF0000">'+h.format(e)+"</span>":isNaN(parseFloat(e))||0===e?"&nbsp;":'<span style="color:#42b449;">'+
h.format(e)+"</span>"}});l=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.SelectedItemGrid",dojox.grid.EnhancedGrid,{style:"border-top:none;",region:"center",escapeHTMLInData:!1,canSort:function(){return!1},onStyleRow:function(b){var a,c;this.inherited(arguments);if(b.node.children[0]&&2<=b.node.children[0].children[0].rows.length)return c=b.node.children[0].children[0].rows[1],a=b.node.children[0].children[0].rows[0].children,c.parentNode.removeChild(c),dojo.forEach(a,function(a,
b){var c;c=dojo.attr(a,"rowSpan");if(!c||2>c)return dojo.attr(a,"rowSpan",2)})}});m=g("buildspace.apps.PostContractSubPackageReport.VariationOrder.SelectedItemGridContainer",dijit.layout.BorderContainer,{style:"padding:0px;width:100%;height:100%;",region:"center",gutters:!1,dialog:null,store:null,structure:null,subPackageId:-1,billId:-1,selectedItems:[],postCreate:function(){var b,a,c;a=this;a.inherited(arguments);b=this.grid=new l({store:a.store,structure:a.structure,selectedItems:a.selectedItems});
c=new dijit.Toolbar({region:"top",style:"padding:2px;border-bottom:none;width:100%;"});c.addChild(new dijit.form.Button({label:e.print,iconClass:"icon-16-container icon-16-print",onClick:function(){return a.openPrintingDialog()}}));c.addChild(new dijit.ToolbarSeparator);c.addChild(new dijit.form.Button({label:e.close,iconClass:"icon-16-container icon-16-close",onClick:function(){return a.dialog.hide()}}));a.addChild(c);return a.addChild(new dijit.layout.ContentPane({style:"width:100%",content:b,region:"center"}))},
openPrintingDialog:function(b){var a;null==b&&(b=this);a=buildspace.dialog.indeterminateProgressBar({title:e.pleaseWait+"..."});a.show();return q.get("viewTendererReporting/getPrintingInformation",{handleAs:"json"}).then(function(c){c=new r({title:b.dialog.title,selectedRows:b.selectedItems,printURL:"postContractSubPackageVO/printVOItemsWithClaims",exportURL:"postContractSubPackageVOExportExcel/exportExcelVOItemsWithClaims",subPackageId:b.subPackageId,billId:b.billId,_csrf_token:c._csrf_token});a.hide();
return c.show()},function(){return a.hide()})}});return g("buildspace.apps.PostContractSubPackageReport.VariationOrder.GroupProjectAssignmentDialog",dijit.Dialog,{style:"padding:0px;margin:0px;",project:null,subPackageId:-1,billId:-1,data:null,selectedItems:[],buildRendering:function(){var b;b=this.createContent();b.startup();this.content=b;return this.inherited(arguments)},postCreate:function(){p.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display="none";return this.inherited(arguments)},
_onKey:function(b){if(b.keyCode===n.ESCAPE)return dojo.stopEvent(b)},onHide:function(){return this.destroyRecursive()},createContent:function(b){var a;null==b&&(b=this);a=new dijit.layout.BorderContainer({style:"padding:0px;width:1280px;height:600px;",gutters:!1});b=new m({store:dojo.data.ItemFileWriteStore({data:b.data}),dialog:b,selectedItems:b.selectedItems,structure:b.constructGridStructure(),subPackageId:b.subPackageId,billId:b.billId});a.addChild(b);return a},constructGridStructure:function(){var b,
a,c;a=new t;b=new k;c=[];b={noscroll:!1,width:"50",cells:[[{name:"No",field:"id",width:"30px",styles:"text-align: center;",formatter:a.rowCountCellFormatter,rowSpan:2},{name:e.billReference,field:"bill_ref",styles:"text-align:center; color: red;",width:"80px",noresize:!0,formatter:a.billRefCellFormatter,rowSpan:2},{name:e.description,field:"description",width:"500px",formatter:a.postContractPrintPreviewTreeCellFormatter,noresize:!0,rowSpan:2},{name:e.nettOmissionAddition,field:"id",styles:"text-align:right;",
width:"120px",noresize:!0,formatter:b.nettOmissionAdditionCellFormatter,rowSpan:2},{name:"%",field:"previous_percentage-value",styles:"text-align:right;",width:"60px",formatter:a.unEditablePercentageCellFormatter,noresize:!0},{name:e.amount,field:"previous_amount-value",styles:"text-align:right;",width:"120px",formatter:a.unEditableCurrencyCellFormatter,noresize:!0},{name:"%",field:"up_to_date_percentage-value",styles:"text-align:right;",width:"60px",formatter:a.unEditablePercentageCellFormatter,
noresize:!0},{name:e.amount,field:"up_to_date_amount-value",styles:"text-align:right;",width:"120px",formatter:a.unEditableCurrencyCellFormatter,noresize:!0},{name:"%",field:"current_percentage-value",styles:"text-align:right;",width:"60px",formatter:a.unEditablePercentageCellFormatter,noresize:!0},{name:e.amount,field:"current_amount-value",styles:"text-align:right;",width:"120px",formatter:a.unEditableCurrencyCellFormatter,noresize:!0}]]};c.push({name:e.previousPayment,styles:"text-align:center;",
headerClasses:"staticHeader typeHeader",colSpan:2});c.push({name:e.workDone,styles:"text-align:center;",headerClasses:"staticHeader typeHeader",colSpan:2});c.push({name:e.currentPayment,styles:"text-align:center;",headerClasses:"staticHeader typeHeader",colSpan:2});b.cells.push(c);return b}})})}).call(this);
