define(["dojo/_base/declare","./Builder","buildspace/widget/grid/cells/Formatter","dojo/i18n!buildspace/nls/PostContractSubPackage"],function(d,e,f,b){return d("buildspace.apps.PostContractSubPackageReport",buildspace.apps._App,{win:null,project:null,init:function(a){a=this.project=a.project;this.win=new buildspace.widget.Window({title:b.postContractReport+" > "+b.appName+" :: "+buildspace.truncateString(a.title,100),onClose:dojo.hitch(this,"kill")});var c=new f,g=new dojo.data.ItemFileWriteStore({url:"postContractSubPackage/getSubPackageList/projectId/"+
a.id});this.subpackageListing=new buildspace.apps.PostContractSubPackageReport.SubPackageListing({region:"center",project:a,gridOpts:{structure:[{name:"&nbsp;",field:"id",width:"30px",styles:"text-align:center;",formatter:c.rowCountCellFormatter,filterable:!1},{name:b.title,field:"title",width:"auto",autoComplete:!0},{name:b.amount,field:"amount",width:"120px",styles:"text-align: center;",formatter:c.unEditableCurrencyCellFormatter}],store:g,onRowDblClick:dojo.hitch(this,"subpackageListingDblClick")}});
a=new dijit.layout.BorderContainer({style:"padding:0px;margin:0px;outline:none;width:100%;height:100%;",gutters:!1});a.addChild(this.subpackageListing);this.win.addChild(a);this.win.show();this.win.startup()},subpackageListingDblClick:function(a){a=this.subpackageListing.grid.getItem(a.rowIndex);0<a.id&&this.createBuilderWin(a)},createBuilderWin:function(a){this.kill();var c=this.project;this.win=new buildspace.widget.Window({title:b.postContractReport+" > "+b.appName+" :: "+buildspace.truncateString(c.title,
100)+" > "+a.title,onClose:dojo.hitch(this,"kill")});a=e({project:c,subPackage:a});this.win.addChild(a);this.win.show();this.win.startup()},makeTab:function(a,c,b){this.tabArea.addChild(b);this.tabArea.selectChild(b);b.mod_info={title:c,appName:a}},kill:function(){"undefined"!=typeof this.win&&this.win.close()}})});
