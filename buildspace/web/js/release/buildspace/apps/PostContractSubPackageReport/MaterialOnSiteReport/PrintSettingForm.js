(function(){define("buildspace/apps/PostContractSubPackageReport/MaterialOnSiteReport/PrintSettingForm","dojo/_base/declare dojo/_base/lang dojo/request dojo/dom-style dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/layout/BorderContainer dijit/Toolbar dijit/form/Button dojox/form/Manager dojo/text!./templates/printSettingForm.html dojo/i18n!buildspace/nls/PostContract".split(" "),function(g,l,m,h,n,p,q,r,t,u,v,x,w,f){var k;k=g("buildspace.apps.PostContractSubPackageReport.MaterialOnSiteReport.PrintSettingForm",
[n,p,q,r],{baseClass:"buildspace-form",subPackageId:-1,templateString:w,region:"center",style:"overflow: auto;",formInfo:null,nls:f,startup:function(){this.inherited(arguments);return this["mosPrintSettingForm-"+this.subPackageId].setFormValues(this.formInfo)},clearErrorMsg:function(){var a,b,c,e,d;b="project_name site_belonging_address original_finished_date contract_duration contract_original_amount payment_revision_no evaluation_date total_text percentage_of_material_on_site_text carried_to_final_summary_text".split(" ");
d=[];c=0;for(e=b.length;c<e;c++)a=b[c],(a=dojo.byId("error-material_on_site_print_setting_"+a))?(a.innerHTML=null,d.push(h.set(a,"display","none"))):d.push(void 0);return d},fillErrorMsgs:function(a){var b,c,e,d;d=[];for(e in a)b=a[e],(c=dojo.byId("error-material_on_site_print_setting_"+e))?(c.innerHTML=b,d.push(h.set(c,"display","block"))):d.push(void 0);return d},save:function(){var a,b,c;c=this;if(!this["mosPrintSettingForm-"+this.subPackageId].validate())return!1;a=dojo.formToObject(this["mosPrintSettingForm-"+
this.subPackageId].id);b=buildspace.dialog.indeterminateProgressBar({title:f.pleaseWait+"..."});l.mixin(a,{subPackageId:c.subPackageId});b.show();this.clearErrorMsg();return m.post("subPackageMaterialOnSite/savePrintSetting",{data:a,handleAs:"json"}).then(function(a){a.success||c.fillErrorMsgs(a.errorMsgs);return b.hide()},function(){return b.hide()})}});return g("buildspace.apps.PostContractSubPackageReport.MaterialOnSiteReport.PrintSettingFormContainer",t,{subPackage:null,style:"padding:0px;margin:0px;width:100%;height:100%;",
gutters:!1,data:null,postCreate:function(){var a,b;this.inherited(arguments);a=new k({subPackageId:this.subPackage.id[0],formInfo:this.data.printSettingForm});b=new u({region:"top",style:"outline:none!important;padding:2px;overflow:hidden;"});b.addChild(new v({label:f.save,iconClass:"icon-16-container icon-16-save",onClick:function(){return a.save()}}));this.addChild(b);return this.addChild(a)}})})}).call(this);
