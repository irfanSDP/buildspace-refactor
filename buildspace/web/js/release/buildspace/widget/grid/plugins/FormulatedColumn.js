define("buildspace/widget/grid/plugins/FormulatedColumn",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojox/grid/EnhancedGrid","dojox/grid/enhanced/_Plugin"],function(l,m,b,n,p){b=b("buildspace.widget.grid.plugins.FormulatedColumn",p,{name:"formulatedColumn",constructor:function(a,b){this.grid=a;this.setArgs(b)},setArgs:function(a){this.args=m.mixin(this.args||{},a||{})},destroy:function(){this.inherited(arguments)},convertRowIndexToItemId:function(a,b){var d=this.grid,h="string"!=
typeof a||null==a?null:a.match(/r\d{1,}/gi);if(null==h)return a;var e=a;l.forEach(h,function(a,b){var f=h[b],g=parseInt(f.replace(RegExp("r","ig"),""))-1,f=new RegExp("\\b"+f+"\\b","gi"),c=d.getItem(g);null==c&&(d._fetch(g,!1),c=d.getItem(g));g=!c||void 0==c.type||c.type[0]!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER&&c.type[0]!=buildspace.widget.grid.constants.HIERARCHY_TYPE_HEADER_N&&c.type[0]!=buildspace.widget.grid.constants.HIERARCHY_TYPE_NOID?!0:!1;e=null!=c&&c.id[0]!=buildspace.constants.GRID_LAST_ROW&&
g?e.replace(f,"R"+c.id[0]):e.replace(f,"#REF!")});return e},convertItemIdToRowIndex:function(a,b){var d=this.grid,h=d.store,e="string"!=typeof a||null==a?null:a.match(/r\d{1,}/gi);if(null==e)return a;var k=a;l.forEach(e,function(a,b){var g=e[b],c=g.replace(RegExp("r","ig"),""),f=new RegExp("\\b"+g+"\\b","gi");h.fetchItemByIdentity({identity:c,onItem:function(a){var b=d.getItemIndex(a);-1==b&&(d._fetch(a._0,!1),b=d.getItemIndex(a));k=0<=b?k.replace(f,"R"+(b+1)):k.replace(f,"#REF!")}})});return k}});
n.registerPlugin(b);return b});
