define("dojo dijit dijit/Tree dojo/_base/lang dijit/form/Textarea dijit/InlineEditBox dijit/Tooltip".split(" "),function(c,f,l,m,n,k,p){c.declare("_TreeInlineEditor",f._InlineEditor,{postCreate:function(){this.inherited(arguments);c.forEach(["onmousedown","onmouseup","onclick","onkeypress"],function(a){this.connect(this.domNode,a,function(b){b.stopPropagation()})},this)}});c.declare("TreeInlineEditBox",k,{tree:null,item:null,save:function(a){this.inherited(arguments);var b=this.tree,d=b.model||b.store,
g=d.store||d,h=this.wrapperWidget.getValue();if(b.ajaxSubmitUrl){var e=this;(d=f.byId("TreeInlineEditBox_error-tooltip"))&&d.destroyRecursive();c.xhrPost({url:b.ajaxSubmitUrl,content:{id:e.item.id,_csrf_token:e.item._csrf_token,attr:b.labelAttr||"name",val:h},handleAs:"json",load:function(a){if(a.success)g.setValue(e.item,b.labelAttr,h),g.save(),b.onSuccess(e.item.id);else{b._itemNodesMap[e.item.id][0].labelWidget.edit();var c="",d;for(d in a.errors)c+=a.errors[d]+"<br/>";(new f.Tooltip({id:"TreeInlineEditBox_error-tooltip",
_onHover:function(){},_onUnHover:function(){},position:["below"],selector:"div",connectId:[b._itemNodesMap[e.item.id][0].iconNode.parentNode],label:'<span class="alert-text-error">'+c+"</span>"})).open(b._itemNodesMap[e.item.id][0].iconNode.parentNode)}},error:function(a){}})}}});c.declare("EditableTreeNode",[f._TreeNode],{buildRendering:function(){this.inherited(arguments);this.labelWidget=new TreeInlineEditBox({editorWrapper:"_TreeInlineEditor",width:this.tree.editorWidth,_onClick:function(){},
tree:this.tree,item:this.item},this.labelNode);this.labelWidget._onDblClick=this.labelWidget.constructor.prototype._onClick},_onDblClick:function(a){this.labelWidget._onDblClick(a)},_setLabelAttr:function(a){this.labelWidget.set("value",a,!1)}});c.declare("dijit.EditableTree",[f.Tree],{editorWidth:"100px",ajaxSubmitUrl:null,onSuccess:function(){},labelAttr:"name",_createTreeNode:function(a){return new EditableTreeNode(a)},_onKeyPress:function(a){},_onKeyDown:function(a){}});return f.EditableTree});
