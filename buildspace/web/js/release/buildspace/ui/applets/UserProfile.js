define("dojo/_base/declare dijit/form/DropDownButton dijit/TooltipDialog dijit/popup dojo/keys dojo/dom-style dojo/dom-attr dijit/Dialog buildspace/ui/Applet buildspace/ui/applets/UserProfileForm dojo/i18n!buildspace/nls/UserProfile".split(" "),function(d,f,g,e,h,k,q,l,m,n,b){var p=d("buildspace.apps.applets.UserProfileDialogBox",l,{style:"padding:0px;margin:0px;",postCreate:function(){this.inherited(arguments);k.set(this.containerNode,{padding:"0px",margin:"0px"});this.closeButtonNode.style.display=
"none"},_onKey:function(a){a.keyCode==h.ESCAPE&&dojo.stopEvent(a)},onHide:function(){this.destroyRecursive()}});return d("buildspace.ui.applets.UserProfile",m,{dispName:"User Profile",postCreate:function(){this.dialog=this.toolTipDialog();this.button=f({iconClass:"icon-24-container icon-24-user",baseClass:"buildspace-user_profile-panel",dropDown:this.dialog},this.containerNode);this.inherited("postCreate",arguments)},startup:function(){var a=dijit.byId("buildspace-signout_button"),b=dijit.byId("buildspace-userToolTipProfileForm");
dojo.connect(b,"onClick",dojo.hitch(this,"userProfileForm"));dojo.connect(a,"onClick",dojo.hitch(this,"signout"))},uninitialize:function(){this.inherited("uninitialize",arguments)},toolTipDialog:function(){var a=require.toUrl("images/profiles/"+buildspace.user.profileImg);return g({id:"buildspace-user_profile_tooltip",baseClass:"user_profile-tooltip",style:"width: 300px;border:none;",content:'<table width="100%"><tr><td><img id="toolTipUserProfilePic" src="'+a+'" height="96" width="96"></td><td><strong id="toolTipUserName">'+
buildspace.user.fullname+"</strong><br/>"+buildspace.user.username+'</td></tr><tr><td style="text-align: right;"><button data-dojo-type="dijit/form/Button" id="buildspace-userToolTipProfileForm" type="button">View Profile</button></td><td><button data-dojo-type="dijit/form/Button" id="buildspace-signout_button" type="button">Sign out</button></td></tr></table>'})},userProfileForm:function(){var a=buildspace.dialog.indeterminateProgressBar({title:b.pleaseWait+"..."});a.show().then(function(){dojo.xhrGet({url:"default/getMyProfileInformation",
handleAs:"json",load:function(d){a.hide();var c=dijit.byId("buildspace-user_profile_tooltip");e.close(c);c=new p({title:b.myProfile,style:"width: 600px; height: 240px;"});c.set("content",new n({data:d,myProfileDialogBox:c}));c.show()},error:function(b){a.hide()}})})},signout:function(){var a=dijit.byId("buildspace-user_profile_tooltip");e.close(a);buildspace.dialog.confirm(b.signout,'<div class="icon-24-container icon-24-poweroff" style="float:left;width:32px;"></div><div>'+b.content+"</div>",60,
280,function(){window.location.href="logout"})}})});
