define("dojo/_base/declare dojo/dom-style dojo/i18n!buildspace/nls/Menu dijit/Toolbar dijit/ToolbarSeparator dijit/form/Button dijit/form/DropDownButton dojo/_base/fx dojo/dom-attr dojo/fx/easing dijit/DialogUnderlay buildspace/ui/Applet".split(" "),function(m,n,r,p,t,f,u,h,k,l,e,q){return m("buildspace.ui.applets.Menubar",q,{dispName:"Menu Bar",_drawn:!1,mainMenuToolbar:null,mainToolbar:null,underlayEvtConn:null,mainToolbarEvtConn:null,postCreate:function(){this._menu&&this._menu.destroy();this._drawButton();
dojo.addClass(this.containerNode,"menuApplet");this.inherited("postCreate",arguments)},_drawButton:function(){if(this._drawn)this._appMenuButton.dropDown=this._menu,this._appMenuButton._started=!1,this._appMenuButton.startup();else{this._drawn=!0;var a=this,c=this.mainMenuToolbar=new p({id:"buildspace-main_menu-toolbar"});this.addChild(c);c=new f({id:"buildspace-start_menu-btn",baseClass:"buildspace-main_menu",iconClass:"buildspace-start_menu",showLabel:!1,onClick:function(){a.showMainMenu()}});this.mainMenuToolbar.addChild(c);
this.mainMenuToolbar.addChild(new dijit.ToolbarSeparator({id:"buildspace-main_menu-separator"}));c.domNode.style.height="100%";c.startup()}},updateMenuBar:function(a){var c=this,d=this.mainMenuToolbar,g=d.getChildren();dojo.forEach(g,function(b,a){1<a&&(d.removeChild(b),b.destroyRecursive(!0))});0<a.__children.length&&dojo.forEach(a.__children,function(b){var a=f({id:"main-tool-bar-sub-child-menus_"+b.id,buttonId:b.id,label:b.title,iconClass:b.icon?"icon-14-"+b.icon:"icon-24-container icon-24-application",
onClick:dojo.hitch(this,function(){if(0<b.__children.length)return c.updateMenuBar(b);if(b.is_app){buildspace.app.launch(b);c.clearLastSelectedSubModule();var a=new dijit.byId("main-tool-bar-sub-child-menus_"+b.id);k.set(a.domNode,"style",{backgroundColor:"#ffe284"})}})});d.addChild(a)})},clearLastSelectedSubModule:function(){var a=this.mainMenuToolbar.getChildren();dojo.forEach(a,function(a,d){if(1<d){var c=new dijit.byId("main-tool-bar-sub-child-menus_"+a.params.buttonId);k.set(c.domNode,"style",
"")}})},createMainToolbar:function(){var a=this,c=this.mainToolbar=dijit.byId("buildspace-toolbar");if(c){var d=buildspace.app.appList,g=c.getChildren();dojo.forEach(g,function(a){c.removeChild(a);a.destroyRecursive(!0)});dojo.forEach(d[0],function(b){var d=f({showLabel:!0,label:b.title,iconClass:b.icon?"icon-64-container icon-64-"+b.icon:null,style:"height:64px;width:96px;background:transparent;",onClick:dojo.hitch(this,function(){buildspace.app.launch(b);a.updateMenuBar(b);!0===b.is_app&&a.displayAppName(b)})});
c.addChild(d)},this)}},showMainMenu:function(){this.mainToolbar||this.createMainToolbar();var a=e._singleton;a&&a.destroyRecursive();a=dijit._underlay=e._singleton=new e({dialogId:"buildspace-toolbar",id:"buildspace-toolbar-underlay","class":"buildspace-toolbar-underlay"});h.animateProperty({node:"buildspace-toolbar",properties:{top:{start:-200,end:0,unit:"px"}},easing:l.liner,duration:150}).play();a.show();n.set(e._singleton.domNode,"zIndex",3E5);this.underlayEvtConn=dojo.connect(a,"onClick",dojo.hitch(this,
"hideMainMenu"));this.mainToolbarEvtConn=dojo.connect(this.mainToolbar,"onClick",dojo.hitch(this,"hideMainMenu"))},hideMainMenu:function(){dojo.disconnect(this.underlayEvtConn);dojo.disconnect(this.mainToolbarEvtConn);var a=e._singleton;h.animateProperty({node:"buildspace-toolbar",properties:{top:{start:0,end:-200,unit:"px"}},easing:l.liner,duration:150}).play();a&&a.destroyRecursive()},displayAppName:function(a){var c=this.mainMenuToolbar,d=c.getChildren();dojo.forEach(d,function(a,b){1<b&&(c.removeChild(a),
a.destroyRecursive(!0))});c.addChild(f({label:'<h1 style="font-size:12px; color:#414841;">'+a.title+"</h1>"}))}})});
