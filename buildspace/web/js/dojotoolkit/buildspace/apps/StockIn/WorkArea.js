// Generated by CoffeeScript 1.9.0
(function() {
  define('buildspace/apps/StockIn/WorkArea', ["dojo/_base/declare", 'dojo/data/ItemFileWriteStore', 'dojo/request', 'dijit/layout/TabContainer', 'dijit/layout/ContentPane', 'dijit/layout/BorderContainer', 'dijit/Toolbar', 'dijit/form/Button', './InvoiceListContainer', 'dojo/i18n!../../nls/StockIn'], function(declare, ItemFileWriteStore, request, TabContainer, ContentPane, BorderContainer, Toolbar, Button, InvoiceListContainer, nls) {
    return declare('buildspace.apps.StockIn.WorkArea', TabContainer, {
      region: "center",
      style: "padding:0px;margin:0px;border:0px;width:100%;height:100%;",
      project: null,
      postCreate: function() {
        var pb, self;
        self = this;
        pb = new buildspace.dialog.indeterminateProgressBar({
          title: nls.processing + "..."
        });
        pb.show();
        return request.get('stockIn/getStockInInvoiceList', {
          query: {
            pId: self.project.id
          },
          handleAs: 'json'
        }).then(function(response) {
          var firstPane;
          self.createContentPaneTab('main-invoiceList', nls.invoiceList, self.invoiceListContainer(response), false);
          firstPane = dijit.byId('main-invoiceList');
          self.selectChild(firstPane);
          return pb.hide();
        }, function(error) {
          return pb.hide();
        });
      },
      createContentPaneTab: function(id, title, content, closable) {
        var pane = new dijit.layout.ContentPane({
          closable: closable,
          id: id,
          style: "padding:0px;border:0px;margin:0px;overflow:hidden;",
          title: buildspace.truncateString(title, 35),
          content: content
        });
        this.addChild(pane);
        return this.selectChild(pane);
      },
      invoiceListContainer: function(store) {
        return new InvoiceListContainer({
          workArea: this,
          project: this.project,
          store: store
        });
      }
    });
  });

}).call(this);
