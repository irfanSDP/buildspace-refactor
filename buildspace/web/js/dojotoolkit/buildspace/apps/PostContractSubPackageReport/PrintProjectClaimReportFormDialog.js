// Generated by CoffeeScript 1.9.0
(function() {
  define("buildspace/apps/PostContractSubPackageReport/PrintProjectClaimReportFormDialog", ["dojo/_base/declare", 'dojo/_base/lang', "dojo/keys", "dojo/parser", "dijit/_WidgetBase", "dijit/_OnDijitClickMixin", "dijit/_TemplatedMixin", "dijit/_WidgetsInTemplateMixin", 'dijit/Toolbar', 'dijit/form/Button', "dijit/layout/BorderContainer", "dijit/form/ValidationTextBox", "dijit/form/RadioButton", "dijit/form/SimpleTextarea", "dijit/registry", "dojo/dom-style", "dojo/dom-form", "dojo/request", "dojo/json", "dojox/validate/web", "dojox/form/Manager", "dojo/text!./templates/printProjectClaimReportForm.html", 'dojo/i18n!buildspace/nls/TenderingReport'], function(declare, lang, keys, parser, _WidgetBase, _OnDijitClickMixin, _TemplatedMixin, _WidgetsInTemplateMixin, Toolbar, Button, BorderContainer, ValidationTextBox, RadioButton, SimpleTextarea, registry, domStyle, domForm, request, JSON, web, Manager, template, nls) {
    var printPreviewForm;
    printPreviewForm = declare("buildspace.apps.PostContractSubPackageReport.PrintProjectClaimReportForm", [_WidgetBase, _OnDijitClickMixin, _TemplatedMixin, _WidgetsInTemplateMixin], {
      baseClass: "buildspace-form",
      templateString: template,
      region: 'center',
      style: "overflow: auto;",
      default_title_input: null,
      printURL: null,
      exportURL: null,
      subPackageId: -1,
      _csrf_token: null,
      nls: nls,
      dialogContainer: null,
      print: function() {
        var csrfToken, exportFileName, form, formValues, pageNoPrefix, printingPageTitle, subPackageIdElement;
        form = this.viewTendererReportingPrintForm;
        if (!form.validate()) {
          return false;
        }
        formValues = dojo.formToObject(form.id);
        form = document.getElementById('printingPreviewForm');
        if (form) {
          form.parentNode.removeChild(form);
        }
        form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", this.printURL);
        form.setAttribute("id", 'printingPreviewForm');
        form.setAttribute("target", "formresult");
        printingPageTitle = document.createElement("input");
        printingPageTitle.setAttribute("name", "printingPageTitle");
        printingPageTitle.setAttribute("value", formValues['fileName']);
        printingPageTitle.setAttribute('type', 'hidden');
        form.appendChild(printingPageTitle);
        exportFileName = document.createElement("input");
        exportFileName.setAttribute("name", "exportFileName");
        exportFileName.setAttribute("value", formValues['exportFileName']);
        exportFileName.setAttribute('type', 'hidden');
        form.appendChild(exportFileName);
        pageNoPrefix = document.createElement("input");
        pageNoPrefix.setAttribute("name", "pageNoPrefix");
        pageNoPrefix.setAttribute("value", formValues['pageNoPrefix']);
        pageNoPrefix.setAttribute('type', 'hidden');
        form.appendChild(pageNoPrefix);
        if (this.subPackageId > 0) {
          subPackageIdElement = document.createElement("input");
          subPackageIdElement.setAttribute("name", "subPackageId");
          subPackageIdElement.setAttribute("value", this.subPackageId);
          subPackageIdElement.setAttribute('type', 'hidden');
          form.appendChild(subPackageIdElement);
        }
        csrfToken = document.createElement("input");
        csrfToken.setAttribute("name", "_csrf_token");
        csrfToken.setAttribute("value", this._csrf_token);
        csrfToken.setAttribute('type', 'hidden');
        form.appendChild(csrfToken);
        document.body.appendChild(form);
        window.open(null, 'formresult');
        return form.submit();
      },
      "export": function() {
        var csrfToken, exportFileName, form, formValues, pageNoPrefix, printingPageTitle, subPackageIdElement;
        form = this.viewTendererReportingPrintForm;
        if (!form.validate()) {
          return false;
        }
        formValues = dojo.formToObject(form.id);
        form = document.getElementById('printingPreviewForm');
        if (form) {
          form.parentNode.removeChild(form);
        }
        form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", this.exportURL);
        form.setAttribute("id", 'printingPreviewForm');
        form.setAttribute("target", "formresult");
        printingPageTitle = document.createElement("input");
        printingPageTitle.setAttribute("name", "printingPageTitle");
        printingPageTitle.setAttribute("value", formValues['fileName']);
        printingPageTitle.setAttribute('type', 'hidden');
        form.appendChild(printingPageTitle);
        exportFileName = document.createElement("input");
        exportFileName.setAttribute("name", "exportFileName");
        exportFileName.setAttribute("value", formValues['exportFileName']);
        exportFileName.setAttribute('type', 'hidden');
        form.appendChild(exportFileName);
        pageNoPrefix = document.createElement("input");
        pageNoPrefix.setAttribute("name", "pageNoPrefix");
        pageNoPrefix.setAttribute("value", formValues['pageNoPrefix']);
        pageNoPrefix.setAttribute('type', 'hidden');
        form.appendChild(pageNoPrefix);
        if (this.subPackageId > 0) {
          subPackageIdElement = document.createElement("input");
          subPackageIdElement.setAttribute("name", "subPackageId");
          subPackageIdElement.setAttribute("value", this.subPackageId);
          subPackageIdElement.setAttribute('type', 'hidden');
          form.appendChild(subPackageIdElement);
        }
        csrfToken = document.createElement("input");
        csrfToken.setAttribute("name", "_csrf_token");
        csrfToken.setAttribute("value", this._csrf_token);
        csrfToken.setAttribute('type', 'hidden');
        form.appendChild(csrfToken);
        document.body.appendChild(form);
        if (this.dialogContainer) {
          this.dialogContainer.hide();
        }
        return form.submit();
      }
    });
    return declare('buildspace.apps.PostContractSubPackageReport.PrePrintFormDialog', dijit.Dialog, {
      style: "padding:0px;margin:0px;width:480px;height:240px;",
      printURL: null,
      exportURL: null,
      subPackageId: -1,
      _csrf_token: null,
      projectTitle: null,
      buildRendering: function() {
        var content;
        content = this.createContent();
        this.content = content;
        content.startup();
        return this.inherited(arguments);
      },
      postCreate: function() {
        domStyle.set(this.containerNode, {
          padding: "0px",
          margin: "0px"
        });
        this.closeButtonNode.style.display = "none";
        return this.inherited(arguments);
      },
      createContent: function(self) {
        var borderContainer, form, toolbar;
        if (self == null) {
          self = this;
        }
        borderContainer = new BorderContainer({
          style: "width:480px;height:240px;padding:0;margin:0;",
          gutters: false
        });
        form = new printPreviewForm({
          default_title_input: self.projectTitle,
          dialogContainer: self,
          printURL: self.printURL,
          exportURL: self.exportURL,
          subPackageId: self.subPackageId,
          _csrf_token: self._csrf_token
        });
        toolbar = new Toolbar({
          region: 'top',
          style: "outline:none!important;padding:2px;overflow:hidden;"
        });
        toolbar.addChild(new Button({
          label: nls.print,
          iconClass: "icon-16-container icon-16-print",
          onClick: function() {
            return form.print();
          }
        }));
        toolbar.addChild(new dijit.ToolbarSeparator());
        toolbar.addChild(new Button({
          label: nls.exportToExcel,
          iconClass: "icon-16-container icon-16-spreadsheet",
          onClick: function() {
            return form["export"]();
          }
        }));
        toolbar.addChild(new dijit.ToolbarSeparator());
        toolbar.addChild(new dijit.form.Button({
          label: nls.close,
          iconClass: "icon-16-container icon-16-close",
          onClick: function() {
            return self.hide();
          }
        }));
        borderContainer.addChild(toolbar);
        borderContainer.addChild(form);
        return borderContainer;
      },
      _onKey: function(e) {
        var key;
        key = e.keyCode;
        if (key === keys.ESCAPE) {
          return dojo.stopEvent(e);
        }
      },
      onHide: function() {
        return this.destroyRecursive();
      }
    });
  });

}).call(this);
