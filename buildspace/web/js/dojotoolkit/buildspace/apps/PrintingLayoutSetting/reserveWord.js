// Generated by CoffeeScript 1.9.0
(function() {
  define(['dojo/_base/declare', 'dojo/parser', 'dijit/_WidgetBase', 'dijit/_OnDijitClickMixin', 'dijit/_TemplatedMixin', 'dijit/_WidgetsInTemplateMixin', 'dojox/validate/web', 'dojox/form/Manager', 'dijit/form/ValidationTextBox', 'dijit/form/CheckBox', 'dojo/dom-form', 'dojo/_base/lang', 'dojo/on', 'dojo/dom-construct', 'dijit/layout/ContentPane', 'dojo/text!./templates/reserveWordForm.html'], function(declare, parser, _WidgetBase, _OnDijitClickMixin, _TemplatedMixin, _WidgetsInTemplateMixin, web, Manager, ValidationTextBox, CheckBox, domForm, lang, delegate, domConstruct, ContentPane, template) {
    return declare('buildspace.apps.PrintingLayoutSetting.ReserveWordForm', [_WidgetBase, _OnDijitClickMixin, _TemplatedMixin, _WidgetsInTemplateMixin], {
      templateString: template,
      projectId: 1,
      data: void 0,
      counter: 4,
      postCreate: function() {
        this.inherited(arguments);
        return this.generateTableRow(this.data.length);
      },
      startup: function() {
        this.inherited(arguments);
        this.populateForm();
        return this.bindEvents();
      },
      generateTableRow: function(dataCount) {
        var actualHead, i, largeString, string, _i;
        if (dataCount == null) {
          dataCount = 0;
        }
        largeString = "";
        for (i = _i = 0; _i < dataCount; i = _i += 1) {
          actualHead = i + 1;
          string = "<tr><td data-wordIdentifier=" + actualHead + "><input type=\"text\" data-dojo-type=\"dijit/form/ValidationTextBox\" name=\"word[word][" + actualHead + "]\"><input type=\"hidden\" id=\"word[id][" + actualHead + "]\" name=\"word[id][" + actualHead + "]\" value=\"0\"><input type=\"hidden\" name=\"word[head][" + actualHead + "]\" value=\"" + actualHead + "\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[bold][" + actualHead + "]\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[underline][" + actualHead + "]\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[italic][" + actualHead + "]\"></td><td><input type=\"text\" data-dojo-type=\"dijit/form/ValidationTextBox\" name=\"word[color][" + actualHead + "]\"></td></tr>";
          largeString += string;
          if (actualHead >= this.counter) {
            this.counter += 1;
          }
        }
        return new ContentPane({
          content: largeString,
          style: "display: table-row-group;"
        }, this.tableContainer);
      },
      populateForm: function() {
        var data, myForm, object, _ref, _results;
        myForm = this.myForm;
        _ref = this.data;
        _results = [];
        for (object in _ref) {
          data = _ref[object];
          _results.push(myForm.setFormValues(data));
        }
        return _results;
      },
      validateForm: function() {
        var formID, formValues, myForm, postContent;
        myForm = this.myForm;
        if (myForm.validate()) {
          formID = myForm.id;
          formValues = dojo.formToObject(formID);
          return postContent = formValues;
        } else {
          return false;
        }
      },
      bindEvents: function() {
        var addHeadBtn;
        addHeadBtn = this.addReserveWord;
        return delegate(addHeadBtn, 'click', (function(_this) {
          return function(evt) {
            domConstruct.create('tr', {
              innerHTML: "<tr><td data-wordIdentifier=" + _this.counter + "><input type=\"text\" data-dojo-type=\"dijit/form/ValidationTextBox\" name=\"word[word][" + _this.counter + "]\"><input type=\"hidden\" id=\"word[id][" + _this.counter + "]\" name=\"word[id][" + _this.counter + "]\" value=\"0\"><input type=\"hidden\" name=\"word[head][" + _this.counter + "]\" value=\"" + _this.counter + "\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[bold][" + _this.counter + "]\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[underline][" + _this.counter + "]\"></td><td><input type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" name=\"word[italic][" + _this.counter + "]\"></td><td><input type=\"text\" data-dojo-type=\"dijit/form/ValidationTextBox\" name=\"word[color][" + _this.counter + "]\"></td></tr>"
            }, _this.tableContainer, 'last');
            parser.parse(_this.myForm.id);
            _this.counter++;
            return evt.preventDefault();
          };
        })(this));
      }
    });
  });

}).call(this);
