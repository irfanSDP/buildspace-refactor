// Generated by CoffeeScript 1.9.0
(function() {
  define('buildspace/apps/RequestForQuotation/WorkArea', ["dojo/_base/declare", 'dojo/data/ItemFileWriteStore', 'dojo/request', 'dijit/layout/TabContainer', 'dijit/layout/ContentPane', 'dijit/layout/BorderContainer', 'dijit/Toolbar', 'dijit/form/Button', './ItemList/ItemListContainer', './SupplierList/SupplierListContainer', './RequestForQuotationViewOnlyForm/RequestForQuotationViewOnlyForm', 'dojo/i18n!../../nls/RequestForQuotation'], function(declare, ItemFileWriteStore, request, TabContainer, ContentPane, BorderContainer, Toolbar, Button, ItemListContainer, SupplierListContainer, RequestForQuotationViewOnlyForm, nls) {
    var WorkArea;
    return WorkArea = declare('buildspace.apps.RequestForQuotation.WorkArea', TabContainer, {
      region: "center",
      style: "padding:0px;margin:0px;border:0px;width:100%;height:100%;",
      rfq: null,
      postCreate: function() {
        var pb, self;
        self = this;
        pb = new buildspace.dialog.indeterminateProgressBar({
          title: nls.processing + "..."
        });
        pb.show();
        return request.get('requestForQuotation/getRFQWorkareaInformation', {
          query: {
            rfqId: self.rfq.id
          },
          handleAs: 'json'
        }).then(function(response) {
          var firstPane;
          self.createContentPaneTab('main-rfqItemList', nls.rfqItemListTabDesc, self.rfqItemListContainer(), false, null);
          self.createContentPaneTab('main-rfqSupplierList', nls.rfqSupplierListTabDesc, self.rfqSupplierListContainer(), false, null);
          self.createContentPaneTab('main-rfqInformation', nls.rfqInformationTabDesc, self.rfqInformationContainer(response), false, null);
          firstPane = dijit.byId('main-rfqItemList');
          self.selectChild(firstPane);
          return pb.hide();
        }, function(error) {
          return pb.hide();
        });
      },
      createContentPaneTab: function(id, title, content, closable, type) {
        var pane;
        pane = new dijit.layout.ContentPane({
          closable: closable,
          id: id,
          style: "padding:0px;border:0px;margin:0px;overflow:hidden;",
          title: buildspace.truncateString(title, 35),
          content: content
        });
        this.addChild(pane);
        return this.selectChild(pane);
      },
      rfqItemListContainer: function() {
        var container;
        return container = new ItemListContainer({
          rfq: this.rfq
        });
      },
      rfqSupplierListContainer: function(response) {
        var container;
        return container = new SupplierListContainer({
          rfq: this.rfq
        });
      },
      rfqInformationContainer: function(response) {
        var form;
        return form = new RequestForQuotationViewOnlyForm({
          rfqId: this.rfq.id,
          data: response
        });
      }
    });
  });

}).call(this);
