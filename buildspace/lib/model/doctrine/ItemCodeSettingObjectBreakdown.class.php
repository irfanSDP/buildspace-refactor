<?php

/**
 * ItemCodeSettingObjectBreakdown
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 *  
 * @package    buildspace
 * @subpackage model
 * @author     1337 developers
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class ItemCodeSettingObjectBreakdown extends BaseItemCodeSettingObjectBreakdown
{
    public static function find($itemCodeSettingObjectId, $claimCertificateId, $itemCodeSettingId)
    {
        $query = DoctrineQuery::create()
                    ->select('*')
                    ->from('ItemCodeSettingObjectBreakdown brk')
                    ->where('brk.item_code_setting_object_id = ?', $itemCodeSettingObjectId)
                    ->andWhere('brk.claim_certificate_id = ?', $claimCertificateId)
                    ->andWhere('brk.item_code_setting_id = ?', $itemCodeSettingId);
                    
        return $query->fetchOne();
    }

    public static function create($itemCodeSettingObjectId, $claimCertificateId, $itemCodeSettingId, $amount)
    {
        $itemCodeSettingObjectBreakdown = new self;
        $itemCodeSettingObjectBreakdown->item_code_setting_object_id = $itemCodeSettingObjectId;
        $itemCodeSettingObjectBreakdown->claim_certificate_id = $claimCertificateId;
        $itemCodeSettingObjectBreakdown->item_code_setting_id = $itemCodeSettingId;
        $itemCodeSettingObjectBreakdown->amount = $amount;
        $itemCodeSettingObjectBreakdown->created_by = sfContext::getInstance()->getUser()->getGuardUser()->getId();
        $itemCodeSettingObjectBreakdown->updated_by = sfContext::getInstance()->getUser()->getGuardUser()->getId();
        $itemCodeSettingObjectBreakdown->save();

        return $itemCodeSettingObjectBreakdown;
    }
}
