<?php

/**
 * MaterialOnSiteTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class MaterialOnSiteTable extends Doctrine_Table {

	/**
	 * Returns an instance of this class.
	 *
	 * @return object MaterialOnSiteTable
	 */
	public static function getInstance()
	{
		return Doctrine_Core::getTable('MaterialOnSite');
	}

	public static function calculateTotalFromItem(MaterialOnSite $materialOnSite)
	{
		$query = Doctrine_Query::create()
			->select('sum(amount) as total')
			->from('MaterialOnSiteItem')
			->where('material_on_site_id = ?', $materialOnSite->id)
			->execute(array(), Doctrine::HYDRATE_SCALAR);

		return $query[0]['MaterialOnSiteItem_total'];
	}

}