<?php

/**
 * SubPackageMaterialOnSiteTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class SubPackageMaterialOnSiteTable extends Doctrine_Table {

	/**
	 * Returns an instance of this class.
	 *
	 * @return object SubPackageMaterialOnSiteTable
	 */
	public static function getInstance()
	{
		return Doctrine_Core::getTable('SubPackageMaterialOnSite');
	}

	public static function calculateTotalFromItem(SubPackageMaterialOnSite $spMaterialOnSite)
	{
		$query = Doctrine_Query::create()
			->select('sum(amount) as total')
			->from('SubPackageMaterialOnSiteItem')
			->where('sp_material_on_site_id = ?', $spMaterialOnSite->id)
			->execute(array(), Doctrine::HYDRATE_SCALAR);

		return $query[0]['SubPackageMaterialOnSiteItem_total'];
	}

}