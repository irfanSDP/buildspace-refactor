<?php

/**
 * BillBuildUpFloorAreaSummaryTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class BillBuildUpFloorAreaSummaryTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object BillBuildUpFloorAreaSummaryTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('BillBuildUpFloorAreaSummary');
    }

    public static function createByBillColumnSettingId($billColumnSettingId)
    {
        $count = DoctrineQuery::create()->select('s.id')
            ->from('BillBuildUpFloorAreaSummary s')
            ->where('s.bill_column_setting_id = ?', $billColumnSettingId)
            ->count();

        if($count == 0)
        {
            $billBuildUpFloorAreaSummary = new BillBuildUpFloorAreaSummary();
            $billBuildUpFloorAreaSummary->bill_column_setting_id = $billColumnSettingId;
            $billBuildUpFloorAreaSummary->conversion_factor_operator = Constants::ARITHMETIC_OPERATOR_ADDITION;
            $billBuildUpFloorAreaSummary->rounding_type = BillSetting::ROUNDING_TYPE_DISABLED;
            $billBuildUpFloorAreaSummary->save(self::getInstance()->getConnection());
        }
    }

    public static function getByBillColumnSettingId($billColumnSettingId)
    {
        $record = DoctrineQuery::create()->select('s.id')
            ->from('BillBuildUpFloorAreaSummary s')
            ->andWhere('s.bill_column_setting_id = ?', $billColumnSettingId)
            ->limit(1)
            ->fetchOne();

        return $record;
    }
}