<?php

/**
 * PostContractClaimMaterialOnSite
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    buildspace
 * @subpackage model
 * @author     1337 developers
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class PostContractClaimMaterialOnSite extends BasePostContractClaimMaterialOnSite
{
	public function updateReductionPercentage($value)
	{
		$totalQty = $this->PostContractClaimItem->quantity;
		$rate = $this->PostContractClaimItem->rate;

		$currentAmount = round($totalQty * $rate, 2); 
		$reductionAmount = round($currentAmount * ($value / 100), 2 );

		$this->reduction_percentage = $value;
		$this->reduction_amount = $reductionAmount;
		$this->final_amount = $currentAmount - $reductionAmount; 
	}

	public function updateReductionAmount($value)
	{
		$totalQty = $this->PostContractClaimItem->quantity;
		$rate = $this->PostContractClaimItem->rate;

		$currentAmount = round($totalQty * $rate, 2); 
		$reductionPercentage = round(($value / $currentAmount) * 100, 2 );

		$this->reduction_percentage = $reductionPercentage;
		$this->reduction_amount = $value;
		$this->final_amount = $currentAmount - $value; 
	}
}
