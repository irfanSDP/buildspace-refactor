<?php

/**
 * PostContractSubPackageRemeasurementBuildUpQuantityItemTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PostContractSubPackageRemeasurementBuildUpQuantityItemTable extends Doctrine_Table
{
	/**
	 * Returns an instance of this class.
	 *
	 * @return object PostContractSubPackageRemeasurementBuildUpQuantityItemTable
	 */
	public static function getInstance()
	{
		return Doctrine_Core::getTable('PostContractSubPackageRemeasurementBuildUpQuantityItem');
	}

	public static function getFormulatedColumnByRelationIdAndColumnName($id, $columnName, $hydrate=null)
	{
		$query = DoctrineQuery::create()
		->select('*')
		->from('PostContractSubPackageRemeasurementBuildUpQuantityFormulatedColumn c')
		->where('c.relation_id = ?', $id)
		->andWhere('c.column_name = ?', $columnName)
		->limit(1);

		if(!is_null($hydrate))
		{
			$query->setHydrationMode($hydrate);
		}

		return $query->fetchOne();
	}

	public static function getFormulatedColumnNames(UnitOfMeasurement $unitOfMeasurement)
	{
		$columnNames = array();
		foreach($unitOfMeasurement->Dimensions as $dimension)
		{
			$columnNames[] = $dimension->id.'-dimension_column';
		}

		array_push($columnNames, BillBuildUpQuantityItem::FORMULATED_COLUMN_FACTOR);

		return $columnNames;
	}
}