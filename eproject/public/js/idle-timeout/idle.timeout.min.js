!function(e){e.fn.idleTimeout=function(i){var t,o,n,a,l,s,r,c,d,u,g,m,v,f,h,y,T,b,p,L,w,A,D,k={redirectUrl:"/logout",idleTimeLimit:1200,idleCheckHeartbeat:2,customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",enableDialog:!0,dialogDisplayLimit:180,dialogTitle:"Session Expiration Warning",dialogText:"Because you have been inactive, your session is about to expire.",dialogTimeRemaining:"Time remaining",dialogStayLoggedInButton:"Stay Logged In",dialogLogOutNowButton:"Log Out Now",errorAlertMessage:'Please disable "Private Mode", or upgrade to a modern browser. Or perhaps a dependent file missing. Please see: https://github.com/marcuswestin/store.js',sessionKeepAliveTimer:600,sessionKeepAliveUrl:window.location.href},O=e.extend(k,i),C=document.title;return this.logout=function(){store.set("idleTimerLoggedOut",!0)},this.iframeRecheck=function(){w()},t=function(){store.set("activityEvents",O.activityEvents)},n=function(){l=setTimeout((function(){e.get(O.sessionKeepAliveUrl),n()}),1e3*O.sessionKeepAliveTimer)},a=function(){clearTimeout(l)},o=function(){e("body").on(O.activityEvents,(function(){(!O.enableDialog||O.enableDialog&&!0!==T())&&u()}))},c=function(){Math.floor(Number(O.idleTimeLimit)%3600%60);var i=store.get("idleTimerLastActivity")+1e3*O.idleTimeLimit;e.now()>i?O.enableDialog?O.enableDialog&&!0!==T()&&(m(),h()):L():!0===store.get("idleTimerLoggedOut")?L():O.enableDialog&&!0===T()&&(b(),y())},u=function(){g(),store.set("idleTimerLastActivity",e.now()),d()},d=function(){c(),s=setTimeout(d,1e3*O.idleCheckHeartbeat)},g=function(){clearTimeout(s)},m=function(){var i="<div id='idletimer_warning_dialog' class='alert-danger'><h4>"+O.dialogText+"</h4><h4 style='display:inline'><strong>"+O.dialogTimeRemaining+":</strong> <div style='display:inline' id='countdownDisplay'></div></h4></div>";e(i).dialog({buttons:[{text:O.dialogStayLoggedInButton,class:"btn btn-primary",click:function(){b(),y(),u()}},{text:O.dialogLogOutNowButton,class:"btn btn-danger",click:function(){L()}}],closeOnEscape:!1,modal:!0,resizable:!1,width:400,title:O.dialogTitle,open:function(){e(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}}),p(),document.title=O.dialogTitle,O.sessionKeepAliveTimer&&a()},f=function(){var i=store.get("idleTimerLastActivity")+1e3*O.idleTimeLimit+1e3*O.dialogDisplayLimit;(e.now()>i||!0===store.get("idleTimerLoggedOut"))&&L()},h=function(){v=setInterval(f,1e3*O.idleCheckHeartbeat)},y=function(){clearInterval(v),clearInterval(r)},T=function(){return!0===e("#idletimer_warning_dialog").is(":visible")},b=function(){e("#idletimer_warning_dialog").dialog("destroy").remove(),document.title=C,O.sessionKeepAliveTimer&&n()},p=function(){var i,t,o=O.dialogDisplayLimit;r=setInterval((function(){(i=Math.floor(o/60))<10&&(i="0"+i),(t=o-60*i)<10&&(t="0"+t),e("#countdownDisplay").html(i+":"+t),o-=1}),1e3)},L=function(){store.set("idleTimerLoggedOut",!0),O.sessionKeepAliveTimer&&a(),O.customCallback&&O.customCallback(),O.redirectUrl&&(window.location.href=O.redirectUrl)},e("body").on("dialogopen",(function(){O.enableDialog&&!0!==T()&&w()})),w=function(){var e;e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),A())}),1e3)},A=function(i){i||(i=e(document));var t=0;i.find("iframe,frame").each((function(){if(!1===e(this).hasClass("jit-inspected"))try{A(e(this).contents()),e(this).on("load",D(e(this)));var i=e(this)[t];i.attachEvent&&i.attachEvent("onload",D(e(this))),t++}catch(i){e(this).addClass("jit-inspected cross-site")}}))},D=function(i){var t=i.contents(),o=store.get("activityEvents");try{t.on(o,(function(i){e("body").trigger(i)})),i.addClass("jit-inspected")}catch(e){}},this.each((function(){store.enabled?(store.set("idleTimerLastActivity",e.now()),store.set("idleTimerLoggedOut",!1),t(),o(),O.sessionKeepAliveTimer&&n(),u(),w()):alert(O.errorAlertMessage)}))}}(jQuery);